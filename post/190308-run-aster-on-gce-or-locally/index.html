<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用谷歌云进行深度学习训练，以aster为例 | 闲言语</title><meta name=keywords content><meta name=description content="光阴似箭，我也做起了毕业设计。随波逐流，我也玩起了深度学习。"><meta name=author content><link rel=canonical href=https://ret2neo.cn/post/190308-run-aster-on-gce-or-locally/><link crossorigin=anonymous href=/assets/css/stylesheet.42b1e004fb78db2fc933d33c9db659598f62453f0de6f9db50c85e5936c0d8c3.css integrity="sha256-QrHgBPt42y/JM9M8nbZZWY9iRT8N5vnbUMheWTbA2MM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ret2neo.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ret2neo.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ret2neo.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://ret2neo.cn/apple-touch-icon.png><link rel=mask-icon href=https://ret2neo.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="使用谷歌云进行深度学习训练，以aster为例"><meta property="og:description" content="光阴似箭，我也做起了毕业设计。随波逐流，我也玩起了深度学习。"><meta property="og:type" content="article"><meta property="og:url" content="https://ret2neo.cn/post/190308-run-aster-on-gce-or-locally/"><meta property="article:section" content="post"><meta property="article:published_time" content="2019-03-08T16:33:07+08:00"><meta property="article:modified_time" content="2019-03-08T16:33:07+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="使用谷歌云进行深度学习训练，以aster为例"><meta name=twitter:description content="光阴似箭，我也做起了毕业设计。随波逐流，我也玩起了深度学习。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ret2neo.cn/post/"},{"@type":"ListItem","position":2,"name":"使用谷歌云进行深度学习训练，以aster为例","item":"https://ret2neo.cn/post/190308-run-aster-on-gce-or-locally/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用谷歌云进行深度学习训练，以aster为例","name":"使用谷歌云进行深度学习训练，以aster为例","description":"光阴似箭，我也做起了毕业设计。随波逐流，我也玩起了深度学习。","keywords":[],"articleBody":"深度学习需要较强的计算能力，在网络上找了一圈，列出一些可用的方案。\n极客云 谷歌云 。提供一年免费试用，但需要外币信用卡。 谷歌的Colaboratory 厦大HPC 淘宝西电机房等 百度深度学习平台 AWS DeepBrain Chain 美团云 售罄 滴滴云 华为云 阿里云 参考文章 机器学习深度学习云GPU资源与对比 有没有云端的深度学习计算服务？ 基本环境 在谷歌云上搭建起 Ubuntu16.04 + Python3.5 + tensorflow-gpu-1.4 + CUDA v8 + cuDNN v6 的环境。\n申请试用谷歌云 地址可随意填，记录两个。\n台中市大甲区大甲里 邮编：43749\nCalifornia(加利福尼亚省) Adelanto(阿德兰托市) 邮编[ADELANTO CA 92301]\n新建虚拟机 进入Google Cloud Platform -\u003e Compute Engine -\u003e VM 实例 ，通过“创建实例”新建一台虚拟机。\n机器类型中选择自定义来添加GPU数量和类型。 需要先按提示申请升级账户才能进行上述操作。很快会有邮件反馈申请成功。 自定义磁盘容量，防火墙允许流量。 点击创建得到一台全新的云端虚拟机。 远程访问 添加静态外部IP地址。在VM实例页面，实例右侧的设置处点击查看网络详情即可。 在Compute Engine -\u003e 元数据 中修改SSH 密钥。使用XHSELL或命令行工具生成密钥对后在云端按指定格式添加公钥，然后可在本地用私钥远程登陆。 安装Anaconda wget https://repo.continuum.io/archive/Anaconda3-4.2.0-Linux-x86_64.sh\nchmod +x Anaconda3-4.2.0-Linux-x86_64.sh\n./Anaconda3-4.2.0-Linux-x86_64.sh 按提示选择，对于是否添加到PATH记得选yes。\nsource ~/.bashrc 使conda等命令生效。\nconda create -n tensorflow python=3.5 建立虚拟环境。\nsource activate tensorflow 激活环境。\npip install --ignore-installed --upgrade tensorflow-gpu==1.4.0 安装tensorflow。\nlspci -vnn | grep VGA -A 12 查看显卡类型\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 (tensorflow) dfindneo@gaster:~/tf/aster/c_ops$ lspci -vnn | grep VGA -A 12 00:03.0 Non-VGA unclassified device [0000]: Red Hat, Inc. Virtio SCSI [1af4:1004] Subsystem: Red Hat, Inc. Virtio SCSI [1af4:0008] Physical Slot: 3 Flags: bus master, fast devsel, latency 0, IRQ 11 I/O ports at c080 [size=64] Memory at fd000000 (32-bit, non-prefetchable) [size=128] Capabilities: Kernel driver in use: virtio-pci 00:04.0 3D controller [0302]: NVIDIA Corporation GP100GL [Tesla P100 PCIe 16GB] [10de:15f8] (rev a1) Subsystem: NVIDIA Corporation Device [10de:118f] Physical Slot: 4 Flags: fast devsel, IRQ 11 安装显卡驱动 访问NVIDIA官网 ，选择配置。 点击search，看到对应的版本是384.66 安装驱动\n1 2 3 4 5 6 sudo add-apt-repository ppa:graphics-drivers/ppa sudo apt-get update sudo apt-get install nvidia-384 #此处要根据上面查询到的版本适当更改 sudo apt-get install mesa-common-dev sudo apt-get install freeglut3-dev sudo reboot -h now 重启后可以使用nvidia-smi 命令查看是否安装成功。 安装CUDA8.0 我使用sudo apt install nvidia-cuda-toolkit 安装的CUDA是7.?版本的，使用sudo apt remove nvidia-cuda* 卸载掉了。\n要安装CUDAv8.0，在这个页面选择系统、架构、发行版及其版本，安装类型可选择runfile。如果是Ubuntu16.04，可直接 wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run ，然后 sh cuda_8.0.61_375.26_linux-run 。询问是否安装驱动时应选择否，因为我们已经安装过驱动了。\n看到提示\n1 2 3 Please make sure that - PATH includes /usr/local/cuda-8.0/bin - LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as root 于是将 export PATH=\"/usr/local/cuda-8.0/bin:$PATH\";export LD_LIBRARY_PATH=\"/usr/lib/nvidia-384:$LD_LIBRARY_PATH\" 添加到~/.bashrc 并source更新。将/usr/local/cuda-8.0/lib64 添加到文件 /etc/ld.so.conf 然后 sudo ldconfig。\n执行 cd ~/NVIDIA_CUDA-8.0_Samples/1_Utilities/deviceQuery \u0026\u0026 make \u0026\u0026 ./deviceQuery 。如果输出末尾有PASS字样，表示安装成功。\n使用 nvcc --version 查看版本信息。 安装cuDNN6.0 登陆账号后访问 https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v6/prod/8.0_20170307/cudnn-8.0-linux-x64-v6.0-tgz ，点击下载，在chrome浏览器中按CTRL+J查看真实下载链接，暂停下载，然后在shell里wget该链接即可。下载后重命名文件为cudnn-8.0-linux-x64-v6.0.tgz 。 tar xzf cudnn-8.0-linux-x64-v6.0.tgz sudo cp cuda/include/cudnn.h /usr/local/cuda/include/ sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/ sudo chmod a+r /usr/local/cuda/include/cudnn.h sudo chmod a+r /usr/local/cuda/lib64/libcudnn* 安装完成 到此为止深度学习的基本环境已经安装完成。可以在Compute Engine -\u003e 快照 中建立一个快照。\n接下来记录想要复现和改进的模型 aster 的基本环境配置。\nASTER环境 激活虚拟环境并安装依赖 1 2 3 4 5 source activate tensorflow cd ~ sudo apt update sudo apt install git cmake libcupti-dev build-essential protobuf-compiler unzip python-pip3 pip install --user protobuf tqdm numpy editdistance Pillow scipy matplotlib edit_distance 下载源码 1 2 mkdir tf \u0026\u0026 cd tf git clone https://github.com/bgshih/aster.git 按照readme依次完成三步配置 ①Go to c_ops/ and run build.sh to build the custom operators\n1 2 3 cd ~/tf/aster/c_ops chmod +x build.sh ./build.sh ②Execute protoc aster/protos/*.proto --python_out=. to build the protobuf files\n1 2 cd ~/tf protoc aster/protos/*.proto --python_out=. ③Add /path/to/aster to PYTHONPATH, or set this variable for every run\n在~/.bashrc 末尾加两行\n1 2 export PYTHONPATH=\"${PYTHONPATH}:/home/neo/tf/aster\" source activate tensorflow 下载作者提供的模型 1 2 3 cd ~/tf/aster/experiments/demo/ wget https://github.com/bgshih/aster/releases/download/v1.0.1/model-demo.zip unzip model-demo.zip 运行demo python aster/demo.py\n数据集下载 cute80 主页 下载：CUTE80_Dataset.zip (44 MB) ic03 下载\nic13 主页 下载 （注册账号后可见） ic15 主页 下载 （注册账号后可见） 文件说明 Downloads - Incidental Scene Text Download below the training dataset and associated ground truth information for each of the Tasks.\nTask 4.1: Text Localization (2015 edition) Training Set Training Set Images (88.5MB).- 1000 images obtained with wearable cameras\nTraining Set Localisation and Transcription Ground Truth (157KB).- 1000 text files with word level localisation and transcription ground truth\nTest Set Test Set Images (43.3MB).- 500 images obtained with wearable cameras. You can submit your results for this Task over the images of the test set through the My Methods section.\nTest Set Ground Truth (244Kb). - 500 text files with text localisation bounding boxes for the images of the test set.\nTask 4.2: Text Segmentation (N/A) Not available.\nTask 4.3: Word Recognition (2015 edition) Training Set Training Set Word Images, along with Transcriptions Ground truth (40.5MB).- ~4468 cut out word images corresponding to the axis oriented bounding boxes of the words are provided along with a single text file with the relative coordinates of the bounding shape within each word image. Transcription ground truth is provided in a single txt file.\nTest Set Test Set Word Images (21.5MB).- 2077 cut out word images corresponding to the axis oriented bounding boxes of the words are provided along with a single text file with the relative coordinates of the bounding shape within each word image. You can submit your results for this Task over the images of the test set through the My Methods section.\nTest Set Ground Truth (49Kb). - A single text file with the transcriptions of the 2077 images of the test set. Each line corresponds to an image of the test set.\nTask 4.4: End to End (2015 edition) Training Set Training Set Images (88.5MB).- 1000 images obtained with wearable cameras\nTraining Set Vocabulary (16KB).- Vocabulary of all words (words of 3 characters or longer comprising only letters) appearing in the training set\nTraining Set Per-image Vocabularies (504KB).- Vocabularies of 100 words per image, comprising the words appearing in the image plus distractors\nTraining Set Localisation and Transcription Ground Truth (157KB).- 1000 text files with word level localisation and transcription ground truth\nTest Set Test Set Images (43.3MB).- 500 images obtained with wearable cameras. You can submit your results for this Task over the images of the test set through the My Methods section.\nTest Set Vocabulary (8KB).- Vocabulary of all words (words of 3 characters or longer comprising only letters) appearing in the test set\nTest Set Per-image Vocabularies (248KB).- Vocabularies of 100 words per image, comprising the words appearing in the image plus distractors\nTest Set Ground Truth (244 Kb). - 500 text files with text localisation bounding boxes for the images of the test set.\nOther Generic Vocabulary (796 KB).- A vocabulary of about 90 k words derived from the dataset publicly available here. Please consult [1,2] for further information as well as the disclaimer in the vocabulary file itself.\niiit5k 主页 下载：IIIT5K-Word_V3.0.tar.gz (106 MB) svt 主页 下载：Street View Text (118MB) synth90k 主页 下载：mjsynth.tar.gz ( 10 GB )，解压后约34 G，生成的 tfrecord 约16 G。 synthtext 主页 下载：SynthText.zip 约40G 数据集处理 在 ~/tf/data 目录下存放数据集文件夹，配置 ~/tf/aster/tools/creat_*.py 中的输入输出目录，运行脚本可在数据集同目录下得到tfrecord文件。\n训练 在~/tf/data/目录下存放tfrecord文件；\n在~/tf/aster/experiments/ 新建train1 文件夹，再在其中新建config 和 log 文件夹；\n在config 文件夹内新建trainval.prototxt ，内容参照~/tf/aster/experiments/demo/config/trainval.prototxt 。\n执行训练命令后在~/tf/aster/experiments/train1/log 目录下生成checkpoint文件等。\ntrain :\n1 2 cd ~/tf/ python aster/train.py --exp_dir=aster/experiments/train1/ --num_clones=2 eval :\n1 2 cd ~/tf/ python aster/eval.py --exp_dir=aster/experiments/train1/ 其他 提高访问速度 如果是位于国内的服务器，可更改部分操作以提高访问速度。\n修改Ubuntu更新源 编辑Ubuntu16.04的 /etc/apt/source.list 为以下内容。\n1 2 3 4 deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse 使用ssh sudo apt update \u0026\u0026 sudo apt install openssh-server \u0026\u0026 sudo service ssh start\nsudo apt install lrzsz 安装 lrzsz 后用sz / rz 命令进行小文件传输，大文件用sftp。\n下载Anaconda wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-4.2.0-Linux-x86_64.sh 修改Anaconda软件源 1 2 3 conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/ conda config --set show_channel_urls yes 修改pip源 mkdir -p ~/.pip \u0026\u0026 touch ~/.pip/pip.conf\n修改 ~/.pip/pip.conf 内容为\n1 2 3 4 [global] index-url = https://pypi.tuna.tsinghua.edu.cn/simple [install] trusted-host=mirrors.aliyun.com （Windows下为 C:\\Users\\USERNAME\\AppData\\Roaming\\pip\\pip.ini ）\n克隆GitHub公开repo到私有 GitHub前段时间已经支持免费使用私有仓库，可以将代码仓库镜像自己的私有仓库，更方便地记录代码更改。\nsudo apt install git\n设置git配置和远程访问\n1 2 3 git config --global user.name findneo git config --global user.email username@gmail.com ssh-keygen -t rsa -b 4096 -C \"usernameo@gmail.com\" 将~/.ssh/id_rsa.pub添加到GitHub的SSH keys。\nssh -T git@github.com 测试是否成功\nmirror 公开仓库 bgshih/aster 到 私有仓库 findneo/myaster\n在GitHub新建名为myaster的私有仓库\n1 2 3 4 5 6 git clone --bare https://github.com/bgshih/aster.git cd aster.git git push -mirror https://github.com/findneo/myaster.git cd .. rm -rf aster.git git clone git@github.com:findneo/myaster.git protocol buffers 和XML/JSON/Thrift类似，优点在于简单，快，小，后向兼容，语言平台应用无关；缺点在于自解释性不够，不能表示很复杂的结构。\n只要描述proto文件，就可以使用编译器protoc(支持c++/Java/Python)自动生成用于序列化、反序列化、读写对象的操作的代码。\n感谢 最后，感谢慷慨借用信用卡的朋友。\n参考链接 学姿势 - 校园金融第一站 ——学习信用卡相关的姿势 美国人信息生成，美国身份生成-世界各国身份信息、地址、信用卡生成 CUDA 下载 cuDNN下载 NVIDIA显卡驱动下载 保姆级教程——Ubuntu16.04 Server下深度学习环境搭建：安装CUDA8.0，cuDNN6.0，Bazel0.5.4，源码编译安装TensorFlow1.4.0(GPU版) 深度学习环境搭建：Tensorflow1.4.0+Ubuntu16.04+Python3.5+Cuda8.0+Cudnn6.0 论文下载：【PAMI2018】ASTER_An Attentional Scene Text Recognizer with Flexible Rectification.pdf 代码仓库：https://github.com/bgshih/aster 清华大学开源软件镜像站 国内Anaconda下载 国际Anaconda下载 Duplicating a repository Google Protocol Buffer 的使用和原理 ","wordCount":"1228","inLanguage":"en","datePublished":"2019-03-08T16:33:07+08:00","dateModified":"2019-03-08T16:33:07+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ret2neo.cn/post/190308-run-aster-on-gce-or-locally/"},"publisher":{"@type":"Organization","name":"闲言语","logo":{"@type":"ImageObject","url":"https://ret2neo.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ret2neo.cn/ accesskey=h title="闲言语 (Alt + H)">闲言语</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ret2neo.cn/mind/ title=随笔><span>随笔</span></a></li><li><a href=https://ret2neo.cn/about title=关于><span>关于</span></a></li><li><a href=https://ret2neo.cn/search title="搜索 (Alt + /)" accesskey=/><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>使用谷歌云进行深度学习训练，以aster为例</h1><div class=post-description>光阴似箭，我也做起了毕业设计。随波逐流，我也玩起了深度学习。</div><div class=post-meta><span title='2019-03-08 16:33:07 +0800 CST'>March 8, 2019</span>&nbsp;|&nbsp;<a href=https://github.dev/findneo/priblog/content/post/190308-run-aster-on-gce-or-locally.md rel="noopener noreferrer" target=_blank>edit</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%9f%ba%e6%9c%ac%e7%8e%af%e5%a2%83 aria-label=基本环境>基本环境</a><ul><li><a href=#%e7%94%b3%e8%af%b7%e8%af%95%e7%94%a8%e8%b0%b7%e6%ad%8c%e4%ba%91 aria-label=申请试用谷歌云>申请试用谷歌云</a></li><li><a href=#%e6%96%b0%e5%bb%ba%e8%99%9a%e6%8b%9f%e6%9c%ba aria-label=新建虚拟机>新建虚拟机</a></li><li><a href=#%e8%bf%9c%e7%a8%8b%e8%ae%bf%e9%97%ae aria-label=远程访问>远程访问</a></li><li><a href=#%e5%ae%89%e8%a3%85anaconda aria-label=安装Anaconda>安装Anaconda</a></li><li><a href=#%e5%ae%89%e8%a3%85%e6%98%be%e5%8d%a1%e9%a9%b1%e5%8a%a8 aria-label=安装显卡驱动>安装显卡驱动</a></li><li><a href=#%e5%ae%89%e8%a3%85cuda80 aria-label=安装CUDA8.0>安装CUDA8.0</a></li><li><a href=#%e5%ae%89%e8%a3%85cudnn60 aria-label=安装cuDNN6.0>安装cuDNN6.0</a></li></ul></li><li><a href=#aster%e7%8e%af%e5%a2%83 aria-label=ASTER环境>ASTER环境</a><ul><li><a href=#%e6%bf%80%e6%b4%bb%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83%e5%b9%b6%e5%ae%89%e8%a3%85%e4%be%9d%e8%b5%96 aria-label=激活虚拟环境并安装依赖>激活虚拟环境并安装依赖</a></li><li><a href=#%e4%b8%8b%e8%bd%bd%e6%ba%90%e7%a0%81 aria-label=下载源码>下载源码</a></li><li><a href=#%e6%8c%89%e7%85%a7readme%e4%be%9d%e6%ac%a1%e5%ae%8c%e6%88%90%e4%b8%89%e6%ad%a5%e9%85%8d%e7%bd%ae aria-label=按照readme依次完成三步配置>按照readme依次完成三步配置</a></li><li><a href=#%e4%b8%8b%e8%bd%bd%e4%bd%9c%e8%80%85%e6%8f%90%e4%be%9b%e7%9a%84%e6%a8%a1%e5%9e%8b aria-label=下载作者提供的模型>下载作者提供的模型</a></li><li><a href=#%e8%bf%90%e8%a1%8cdemo aria-label=运行demo>运行demo</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e4%b8%8b%e8%bd%bd aria-label=数据集下载>数据集下载</a><ul><li><a href=#cute80 aria-label=cute80>cute80</a></li><li><a href=#ic03 aria-label=ic03>ic03</a></li><li><a href=#ic13 aria-label=ic13>ic13</a></li><li><a href=#ic15 aria-label=ic15>ic15</a></li><li><a href=#iiit5k aria-label=iiit5k>iiit5k</a></li><li><a href=#svt aria-label=svt>svt</a></li><li><a href=#synth90k aria-label=synth90k>synth90k</a></li><li><a href=#synthtext aria-label=synthtext>synthtext</a></li></ul></li><li><a href=#%e6%95%b0%e6%8d%ae%e9%9b%86%e5%a4%84%e7%90%86 aria-label=数据集处理>数据集处理</a></li><li><a href=#%e8%ae%ad%e7%bb%83 aria-label=训练>训练</a></li></ul></li><li><a href=#%e5%85%b6%e4%bb%96 aria-label=其他>其他</a><ul><li><a href=#%e6%8f%90%e9%ab%98%e8%ae%bf%e9%97%ae%e9%80%9f%e5%ba%a6 aria-label=提高访问速度>提高访问速度</a><ul><li><a href=#%e4%bf%ae%e6%94%b9ubuntu%e6%9b%b4%e6%96%b0%e6%ba%90 aria-label=修改Ubuntu更新源>修改Ubuntu更新源</a></li><li><a href=#%e4%bd%bf%e7%94%a8ssh aria-label=使用ssh>使用ssh</a></li><li><a href=#%e4%b8%8b%e8%bd%bdanaconda aria-label=下载Anaconda>下载Anaconda</a></li><li><a href=#%e4%bf%ae%e6%94%b9anaconda%e8%bd%af%e4%bb%b6%e6%ba%90 aria-label=修改Anaconda软件源>修改Anaconda软件源</a></li><li><a href=#%e4%bf%ae%e6%94%b9pip%e6%ba%90 aria-label=修改pip源>修改pip源</a></li></ul></li><li><a href=#%e5%85%8b%e9%9a%86github%e5%85%ac%e5%bc%80repo%e5%88%b0%e7%a7%81%e6%9c%89 aria-label=克隆GitHub公开repo到私有>克隆GitHub公开repo到私有</a></li><li><a href=#protocol-buffers aria-label="protocol buffers">protocol buffers</a></li></ul></li><li><a href=#%e6%84%9f%e8%b0%a2 aria-label=感谢>感谢</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%93%be%e6%8e%a5 aria-label=参考链接>参考链接</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>深度学习需要较强的计算能力，在网络上找了一圈，列出一些可用的方案。</p><ul><li><a href=https://www.jikecloud.net>极客云</a></li><li><a href=https://console.cloud.google.com/freetrial/signup/tos>谷歌云</a> 。提供一年免费试用，但需要外币信用卡。</li><li>谷歌的<a href=https://www.138vps.com/jc/1325.html>Colaboratory</a></li><li><a href=https://net.xmu.edu.cn/19/47/c17463a334151/page.htm>厦大HPC</a></li><li><a href="https://item.taobao.com/item.htm?id=572068150187">淘宝西电机房等</a></li><li><a href=https://cloud.baidu.com/product/bdl.html>百度深度学习平台</a></li><li><a href=https://amazonaws-china.com/cn/free/>AWS</a></li><li><a href=https://www.deepbrainchain.org/>DeepBrain Chain</a></li><li>美团云 售罄</li><li><a href=https://blog.csdn.net/sinat_36256646/article/details/80745792>滴滴云</a></li><li><a href=https://www.huaweicloud.com/product/hmi.html>华为云</a></li><li>阿里云</li><li>参考文章<ul><li><a href=https://blog.csdn.net/cccat6/article/details/79057746>机器学习深度学习云GPU资源与对比</a></li><li><a href=https://www.zhihu.com/question/51362855>有没有云端的深度学习计算服务？</a></li></ul></li></ul><h1 id=基本环境>基本环境<a hidden class=anchor aria-hidden=true href=#基本环境>#</a></h1><p>在谷歌云上搭建起 <strong>Ubuntu16.04 + Python3.5 + tensorflow-gpu-1.4 + CUDA v8 + cuDNN v6</strong> 的环境。</p><h2 id=申请试用谷歌云>申请试用谷歌云<a hidden class=anchor aria-hidden=true href=#申请试用谷歌云>#</a></h2><p>地址可随意填，记录两个。</p><p><code>台中市大甲区大甲里 邮编：43749</code></p><p><code>California(加利福尼亚省) Adelanto(阿德兰托市) 邮编[ADELANTO CA 92301]</code></p><h2 id=新建虚拟机>新建虚拟机<a hidden class=anchor aria-hidden=true href=#新建虚拟机>#</a></h2><p>进入Google Cloud Platform -> Compute Engine -> VM 实例 ，通过“创建实例”新建一台虚拟机。</p><ul><li>机器类型中选择自定义来添加GPU数量和类型。</li><li>需要先按提示申请升级账户才能进行上述操作。很快会有邮件反馈申请成功。</li><li>自定义磁盘容量，防火墙允许流量。</li><li>点击创建得到一台全新的云端虚拟机。</li></ul><h2 id=远程访问>远程访问<a hidden class=anchor aria-hidden=true href=#远程访问>#</a></h2><ul><li>添加静态外部IP地址。在VM实例页面，实例右侧的设置处点击查看网络详情即可。</li><li>在Compute Engine -> 元数据 中修改SSH 密钥。使用XHSELL或命令行工具生成密钥对后在云端按指定格式添加公钥，然后可在本地用私钥远程登陆。</li></ul><h2 id=安装anaconda>安装Anaconda<a hidden class=anchor aria-hidden=true href=#安装anaconda>#</a></h2><ul><li><p><code>wget https://repo.continuum.io/archive/Anaconda3-4.2.0-Linux-x86_64.sh</code></p></li><li><p><code>chmod +x Anaconda3-4.2.0-Linux-x86_64.sh</code></p></li><li><p><code>./Anaconda3-4.2.0-Linux-x86_64.sh</code> 按提示选择，对于是否添加到PATH记得选yes。</p></li><li><p><code>source ~/.bashrc</code> 使conda等命令生效。</p></li><li><p><code>conda create -n tensorflow python=3.5</code> 建立虚拟环境。</p></li><li><p><code>source activate tensorflow</code> 激活环境。</p></li><li><p><code>pip install --ignore-installed --upgrade tensorflow-gpu==1.4.0</code> 安装tensorflow。</p></li><li><p><code>lspci -vnn | grep VGA -A 12</code> 查看显卡类型</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-15>15</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>(</span>tensorflow<span style=color:#f92672>)</span> dfindneo@gaster:~/tf/aster/c_ops$ lspci -vnn | grep VGA -A <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>00:03.0 Non-VGA unclassified device <span style=color:#f92672>[</span>0000<span style=color:#f92672>]</span>: Red Hat, Inc. Virtio SCSI <span style=color:#f92672>[</span>1af4:1004<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        Subsystem: Red Hat, Inc. Virtio SCSI <span style=color:#f92672>[</span>1af4:0008<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        Physical Slot: <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>        Flags: bus master, fast devsel, latency 0, IRQ <span style=color:#ae81ff>11</span>
</span></span><span style=display:flex><span>        I/O ports at c080 <span style=color:#f92672>[</span>size<span style=color:#f92672>=</span>64<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        Memory at fd000000 <span style=color:#f92672>(</span>32-bit, non-prefetchable<span style=color:#f92672>)</span> <span style=color:#f92672>[</span>size<span style=color:#f92672>=</span>128<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        Capabilities: &lt;access denied&gt;
</span></span><span style=display:flex><span>        Kernel driver in use: virtio-pci
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>00:04.0 3D controller <span style=color:#f92672>[</span>0302<span style=color:#f92672>]</span>: NVIDIA Corporation GP100GL <span style=color:#f92672>[</span>Tesla P100 PCIe 16GB<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>10de:15f8<span style=color:#f92672>]</span> <span style=color:#f92672>(</span>rev a1<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        Subsystem: NVIDIA Corporation Device <span style=color:#f92672>[</span>10de:118f<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        Physical Slot: <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>        Flags: fast devsel, IRQ <span style=color:#ae81ff>11</span>
</span></span></code></pre></td></tr></table></div></div></li></ul><h2 id=安装显卡驱动>安装显卡驱动<a hidden class=anchor aria-hidden=true href=#安装显卡驱动>#</a></h2><ul><li><p>访问<a href="https://www.nvidia.com/Download/index.aspx?lang=en-us">NVIDIA官网</a> ，选择配置。
<img loading=lazy src=49385a7a2a07bf6fc.png alt></p></li><li><p>点击search，看到对应的版本是384.66
<img loading=lazy src=5f4c90329cbdeb6f2.png alt></p></li><li><p>安装驱动</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo add-apt-repository ppa:graphics-drivers/ppa  
</span></span><span style=display:flex><span>sudo apt-get update  
</span></span><span style=display:flex><span>sudo apt-get install nvidia-384 <span style=color:#75715e>#此处要根据上面查询到的版本适当更改</span>
</span></span><span style=display:flex><span>sudo apt-get install mesa-common-dev  
</span></span><span style=display:flex><span>sudo apt-get install freeglut3-dev
</span></span><span style=display:flex><span>sudo reboot -h now
</span></span></code></pre></td></tr></table></div></div></li><li><p>重启后可以使用<code>nvidia-smi</code> 命令查看是否安装成功。
<img loading=lazy src=216a53df05c277388.png alt></p></li></ul><h2 id=安装cuda80>安装CUDA8.0<a hidden class=anchor aria-hidden=true href=#安装cuda80>#</a></h2><ul><li><p>我使用<code>sudo apt install nvidia-cuda-toolkit</code> 安装的CUDA是7.?版本的，使用<code>sudo apt remove nvidia-cuda*</code> 卸载掉了。</p></li><li><p>要安装CUDAv8.0，在<a href=https://developer.nvidia.com/cuda-80-ga2-download-archive>这个页面</a>选择系统、架构、发行版及其版本，安装类型可选择runfile。如果是Ubuntu16.04，可直接 <code>wget https://developer.nvidia.com/compute/cuda/8.0/Prod2/local_installers/cuda_8.0.61_375.26_linux-run</code> ，然后 <code>sh cuda_8.0.61_375.26_linux-run</code> 。询问是否安装驱动时应选择否，因为我们已经安装过驱动了。</p></li><li><p>看到提示</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Please make sure that
</span></span><span style=display:flex><span>-   PATH includes /usr/local/cuda-8.0/bin
</span></span><span style=display:flex><span>-   LD_LIBRARY_PATH includes /usr/local/cuda-8.0/lib64, or, add /usr/local/cuda-8.0/lib64 to /etc/ld.so.conf and run ldconfig as root
</span></span></code></pre></td></tr></table></div></div><p>于是将 <code>export PATH="/usr/local/cuda-8.0/bin:$PATH";export LD_LIBRARY_PATH="/usr/lib/nvidia-384:$LD_LIBRARY_PATH"</code> 添加到<code>~/.bashrc</code> 并source更新。将<code>/usr/local/cuda-8.0/lib64</code> 添加到文件 /etc/ld.so.conf 然后 sudo ldconfig。</p></li><li><p>执行 <code>cd ~/NVIDIA_CUDA-8.0_Samples/1_Utilities/deviceQuery && make && ./deviceQuery</code> 。如果输出末尾有PASS字样，表示安装成功。</p></li><li><p>使用 <code>nvcc --version</code> 查看版本信息。
<img loading=lazy src=78536cef395baf036.png alt></p></li></ul><h2 id=安装cudnn60>安装cuDNN6.0<a hidden class=anchor aria-hidden=true href=#安装cudnn60>#</a></h2><ul><li>登陆账号后访问 <code>https://developer.nvidia.com/compute/machine-learning/cudnn/secure/v6/prod/8.0_20170307/cudnn-8.0-linux-x64-v6.0-tgz</code> ，点击下载，在chrome浏览器中按CTRL+J查看真实下载链接，暂停下载，然后在shell里wget该链接即可。下载后重命名文件为<code>cudnn-8.0-linux-x64-v6.0.tgz</code> 。</li><li><code>tar xzf cudnn-8.0-linux-x64-v6.0.tgz</code>
<code>sudo cp cuda/include/cudnn.h /usr/local/cuda/include/</code>
<code>sudo cp cuda/lib64/libcudnn* /usr/local/cuda/lib64/</code>
<code>sudo chmod a+r /usr/local/cuda/include/cudnn.h</code>
<code>sudo chmod a+r /usr/local/cuda/lib64/libcudnn*</code></li><li>安装完成
<img loading=lazy src=3bb6df8d97873e79a.png alt></li></ul><p>到此为止深度学习的基本环境已经安装完成。可以在Compute Engine -> 快照 中建立一个快照。</p><p>接下来记录想要复现和改进的模型 <code>aster</code> 的基本环境配置。</p><h1 id=aster环境>ASTER环境<a hidden class=anchor aria-hidden=true href=#aster环境>#</a></h1><h2 id=激活虚拟环境并安装依赖>激活虚拟环境并安装依赖<a hidden class=anchor aria-hidden=true href=#激活虚拟环境并安装依赖>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>source activate tensorflow
</span></span><span style=display:flex><span>cd ~
</span></span><span style=display:flex><span>sudo apt update
</span></span><span style=display:flex><span>sudo apt install git cmake libcupti-dev build-essential protobuf-compiler unzip python-pip3
</span></span><span style=display:flex><span>pip install --user protobuf tqdm numpy editdistance Pillow scipy matplotlib edit_distance
</span></span></code></pre></td></tr></table></div></div><h2 id=下载源码>下载源码<a hidden class=anchor aria-hidden=true href=#下载源码>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>mkdir tf <span style=color:#f92672>&amp;&amp;</span> cd tf
</span></span><span style=display:flex><span>git clone https://github.com/bgshih/aster.git
</span></span></code></pre></td></tr></table></div></div><h2 id=按照readme依次完成三步配置>按照readme依次完成三步配置<a hidden class=anchor aria-hidden=true href=#按照readme依次完成三步配置>#</a></h2><p>①<code>Go to c_ops/ and run build.sh to build the custom operators</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/tf/aster/c_ops
</span></span><span style=display:flex><span>chmod +x build.sh
</span></span><span style=display:flex><span>./build.sh
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=7edd4a7ef94f50629.png alt></p><p><img loading=lazy src=7698eaa4dfe266043.png alt></p><p>②<code>Execute protoc aster/protos/*.proto --python_out=. to build the protobuf files</code></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/tf
</span></span><span style=display:flex><span>protoc aster/protos/*.proto --python_out<span style=color:#f92672>=</span>.
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=4dc179352dffcef6a.png alt></p><p>③<code>Add /path/to/aster to PYTHONPATH, or set this variable for every run</code></p><p>在<code>~/.bashrc</code> 末尾加两行</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>export PYTHONPATH=&#34;${PYTHONPATH}:/home/neo/tf/aster&#34;
</span></span><span style=display:flex><span>source activate tensorflow
</span></span></code></pre></td></tr></table></div></div><h2 id=下载作者提供的模型>下载作者提供的模型<a hidden class=anchor aria-hidden=true href=#下载作者提供的模型>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/tf/aster/experiments/demo/
</span></span><span style=display:flex><span>wget  https://github.com/bgshih/aster/releases/download/v1.0.1/model-demo.zip
</span></span><span style=display:flex><span>unzip model-demo.zip
</span></span></code></pre></td></tr></table></div></div><h2 id=运行demo>运行demo<a hidden class=anchor aria-hidden=true href=#运行demo>#</a></h2><p><code>python aster/demo.py</code></p><p><img loading=lazy src=d1a7c36d8fb5a9151.png alt></p><h2 id=数据集下载>数据集下载<a hidden class=anchor aria-hidden=true href=#数据集下载>#</a></h2><h3 id=cute80>cute80<a hidden class=anchor aria-hidden=true href=#cute80>#</a></h3><ul><li><a href=http://cs-chan.com/downloads_CUTE80_dataset.html>主页</a></li><li>下载：<a href=http://cs-chan.com/source/CUTE80_Dataset.zip>CUTE80_Dataset.zip</a> (44 MB)</li></ul><h3 id=ic03>ic03<a hidden class=anchor aria-hidden=true href=#ic03>#</a></h3><p><a href=http://www.iapr-tc11.org/mediawiki/index.php/ICDAR_2003_Robust_Reading_Competitions>下载</a></p><h3 id=ic13>ic13<a hidden class=anchor aria-hidden=true href=#ic13>#</a></h3><ul><li><a href="http://dagdata.cvc.uab.es/icdar2013competition/?ch=2&amp;com=downloads">主页</a></li><li><a href="http://rrc.cvc.uab.es/?ch=2&amp;com=downloads">下载</a> （注册账号后可见）</li></ul><h3 id=ic15>ic15<a hidden class=anchor aria-hidden=true href=#ic15>#</a></h3><ul><li><a href="http://rrc.cvc.uab.es/?ch=4">主页</a></li><li><a href="http://rrc.cvc.uab.es/?ch=4&amp;com=downloads">下载</a> （注册账号后可见）</li><li>文件说明</li></ul><p><em><strong>Downloads - Incidental Scene Text</strong></em>
Download below the training dataset and associated ground truth information for each of the Tasks.</p><hr><p><em><strong>Task 4.1: Text Localization (2015 edition)</strong></em>
<strong>Training Set</strong>
Training Set Images (88.5MB).- 1000 images obtained with wearable cameras</p><p>Training Set Localisation and Transcription Ground Truth (157KB).- 1000 text files with word level localisation and transcription ground truth</p><p><strong>Test Set</strong>
Test Set Images (43.3MB).- 500 images obtained with wearable cameras. You can submit your results for this Task over the images of the test set through the My Methods section.</p><p>Test Set Ground Truth (244Kb). - 500 text files with text localisation bounding boxes for the images of the test set.</p><hr><p><em><strong>Task 4.2: Text Segmentation (N/A)</strong></em>
Not available.</p><hr><p><em><strong>Task 4.3: Word Recognition (2015 edition)</strong></em>
<strong>Training Set</strong>
Training Set Word Images, along with Transcriptions Ground truth (40.5MB).- ~4468 cut out word images corresponding to the axis oriented bounding boxes of the words are provided along with a single text file with the relative coordinates of the bounding shape within each word image. Transcription ground truth is provided in a single txt file.</p><p><strong>Test Set</strong>
Test Set Word Images (21.5MB).- 2077 cut out word images corresponding to the axis oriented bounding boxes of the words are provided along with a single text file with the relative coordinates of the bounding shape within each word image. You can submit your results for this Task over the images of the test set through the My Methods section.</p><p>Test Set Ground Truth (49Kb). - A single text file with the transcriptions of the 2077 images of the test set. Each line corresponds to an image of the test set.</p><hr><p><em><strong>Task 4.4: End to End (2015 edition)</strong></em>
<strong>Training Set</strong>
Training Set Images (88.5MB).- 1000 images obtained with wearable cameras</p><p>Training Set Vocabulary (16KB).- Vocabulary of all words (words of 3 characters or longer comprising only letters) appearing in the training set</p><p>Training Set Per-image Vocabularies (504KB).- Vocabularies of 100 words per image, comprising the words appearing in the image plus distractors</p><p>Training Set Localisation and Transcription Ground Truth (157KB).- 1000 text files with word level localisation and transcription ground truth</p><p><strong>Test Set</strong>
Test Set Images (43.3MB).- 500 images obtained with wearable cameras. You can submit your results for this Task over the images of the test set through the My Methods section.</p><p>Test Set Vocabulary (8KB).- Vocabulary of all words (words of 3 characters or longer comprising only letters) appearing in the test set</p><p>Test Set Per-image Vocabularies (248KB).- Vocabularies of 100 words per image, comprising the words appearing in the image plus distractors</p><p>Test Set Ground Truth (244 Kb). - 500 text files with text localisation bounding boxes for the images of the test set.</p><hr><p><em><strong>Other</strong></em>
Generic Vocabulary (796 KB).- A vocabulary of about 90 k words derived from the dataset publicly available here. Please consult [1,2] for further information as well as the disclaimer in the vocabulary file itself.</p><h3 id=iiit5k>iiit5k<a hidden class=anchor aria-hidden=true href=#iiit5k>#</a></h3><ul><li><a href=http://cvit.iiit.ac.in/projects/SceneTextUnderstanding/IIIT5K.html>主页</a></li><li>下载：<a href=http://cvit.iiit.ac.in/projects/SceneTextUnderstanding/IIIT5K-Word_V3.0.tar.gz>IIIT5K-Word_V3.0.tar.gz</a> (106 MB)</li></ul><h3 id=svt>svt<a hidden class=anchor aria-hidden=true href=#svt>#</a></h3><ul><li><a href=http://vision.ucsd.edu/~kai/svt/>主页</a></li><li>下载：<a href=http://vision.ucsd.edu/~kai/svt/svt.zip>Street View Text </a>(118MB)</li></ul><h3 id=synth90k>synth90k<a hidden class=anchor aria-hidden=true href=#synth90k>#</a></h3><ul><li><a href=http://www.robots.ox.ac.uk/~vgg/data/text/>主页</a></li><li>下载：<a href=http://www.robots.ox.ac.uk/~vgg/data/text/mjsynth.tar.gz>mjsynth.tar.gz</a> ( 10 GB )，解压后约34 G，生成的 tfrecord 约16 G。</li></ul><p><img loading=lazy src=00a14ca29dfe9d485.png alt></p><h3 id=synthtext>synthtext<a hidden class=anchor aria-hidden=true href=#synthtext>#</a></h3><ul><li><a href=http://www.robots.ox.ac.uk/~vgg/data/scenetext/>主页</a></li><li>下载：<a href=http://www.robots.ox.ac.uk/~vgg/data/scenetext/SynthText.zip>SynthText.zip</a> 约40G</li></ul><h2 id=数据集处理>数据集处理<a hidden class=anchor aria-hidden=true href=#数据集处理>#</a></h2><p>在 <code>~/tf/data</code> 目录下存放数据集文件夹，配置 <code>~/tf/aster/tools/creat_*.py</code> 中的输入输出目录，运行脚本可在数据集同目录下得到tfrecord文件。</p><p><img loading=lazy src=6eef02a0dd85222b4.png alt></p><h2 id=训练>训练<a hidden class=anchor aria-hidden=true href=#训练>#</a></h2><p>在<code>~/tf/data/</code>目录下存放<code>tfrecord</code>文件；</p><p>在<code>~/tf/aster/experiments/</code> 新建<code>train1</code> 文件夹，再在其中新建<code>config</code> 和 <code>log</code> 文件夹；</p><p>在<code>config</code> 文件夹内新建<code>trainval.prototxt</code> ，内容参照<code>~/tf/aster/experiments/demo/config/trainval.prototxt</code> 。</p><p>执行训练命令后在<code>~/tf/aster/experiments/train1/log</code> 目录下生成checkpoint文件等。</p><p>train :</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/tf/
</span></span><span style=display:flex><span>python aster/train.py --exp_dir<span style=color:#f92672>=</span>aster/experiments/train1/ --num_clones<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> 
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=f361d71802d5c7ab1.png alt></p><p>eval :</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>cd ~/tf/
</span></span><span style=display:flex><span>python aster/eval.py  --exp_dir<span style=color:#f92672>=</span>aster/experiments/train1/
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=933febc8810c68943.png alt></p><h1 id=其他>其他<a hidden class=anchor aria-hidden=true href=#其他>#</a></h1><h2 id=提高访问速度>提高访问速度<a hidden class=anchor aria-hidden=true href=#提高访问速度>#</a></h2><p>如果是位于国内的服务器，可更改部分操作以提高访问速度。</p><h3 id=修改ubuntu更新源>修改Ubuntu更新源<a hidden class=anchor aria-hidden=true href=#修改ubuntu更新源>#</a></h3><p>编辑Ubuntu16.04的 <code>/etc/apt/source.list</code> 为以下内容。</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-updates main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-backports main restricted universe multiverse
</span></span><span style=display:flex><span>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ xenial-security main restricted universe multiverse
</span></span></code></pre></td></tr></table></div></div><h3 id=使用ssh>使用ssh<a hidden class=anchor aria-hidden=true href=#使用ssh>#</a></h3><p><code>sudo apt update && sudo apt install openssh-server && sudo service ssh start</code></p><p><code>sudo apt install lrzsz</code> 安装 lrzsz 后用<code>sz</code> / <code>rz</code> 命令进行小文件传输，大文件用sftp。</p><h3 id=下载anaconda>下载Anaconda<a hidden class=anchor aria-hidden=true href=#下载anaconda>#</a></h3><p><code>wget https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/Anaconda3-4.2.0-Linux-x86_64.sh</code></p><h3 id=修改anaconda软件源>修改Anaconda软件源<a hidden class=anchor aria-hidden=true href=#修改anaconda软件源>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/ 
</span></span><span style=display:flex><span>conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/
</span></span><span style=display:flex><span>conda config --set show_channel_urls yes
</span></span></code></pre></td></tr></table></div></div><h3 id=修改pip源>修改pip源<a hidden class=anchor aria-hidden=true href=#修改pip源>#</a></h3><ul><li><p><code>mkdir -p ~/.pip && touch ~/.pip/pip.conf</code></p></li><li><p>修改 <code>~/.pip/pip.conf</code> 内容为</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>global<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>index-url <span style=color:#f92672>=</span> https://pypi.tuna.tsinghua.edu.cn/simple
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>install<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>trusted-host<span style=color:#f92672>=</span>mirrors.aliyun.com
</span></span></code></pre></td></tr></table></div></div></li></ul><p>（Windows下为 <code>C:\Users\USERNAME\AppData\Roaming\pip\pip.ini</code> ）</p><h2 id=克隆github公开repo到私有>克隆GitHub公开repo到私有<a hidden class=anchor aria-hidden=true href=#克隆github公开repo到私有>#</a></h2><p>GitHub前段时间已经支持免费使用私有仓库，可以将代码仓库镜像自己的私有仓库，更方便地记录代码更改。</p><ul><li><p>sudo apt install git</p></li><li><p>设置git配置和远程访问</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git config --global user.name findneo
</span></span><span style=display:flex><span>git config --global user.email username@gmail.com
</span></span><span style=display:flex><span>ssh-keygen -t rsa -b <span style=color:#ae81ff>4096</span> -C <span style=color:#e6db74>&#34;usernameo@gmail.com&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>将~/.ssh/id_rsa.pub添加到GitHub的SSH keys。</p></li><li><p><code>ssh -T git@github.com</code> 测试是否成功</p></li><li><p>mirror 公开仓库 bgshih/aster 到 私有仓库 findneo/myaster</p><ul><li><p>在GitHub新建名为myaster的私有仓库</p></li><li><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>git clone --bare https://github.com/bgshih/aster.git
</span></span><span style=display:flex><span>cd aster.git
</span></span><span style=display:flex><span>git push -mirror https://github.com/findneo/myaster.git
</span></span><span style=display:flex><span>cd ..
</span></span><span style=display:flex><span>rm -rf aster.git
</span></span><span style=display:flex><span>git clone git@github.com:findneo/myaster.git
</span></span></code></pre></td></tr></table></div></div></li></ul></li></ul><h2 id=protocol-buffers>protocol buffers<a hidden class=anchor aria-hidden=true href=#protocol-buffers>#</a></h2><p>和XML/JSON/Thrift类似，优点在于简单，快，小，后向兼容，语言平台应用无关；缺点在于自解释性不够，不能表示很复杂的结构。</p><p>只要描述proto文件，就可以使用编译器protoc(支持c++/Java/Python)自动生成用于序列化、反序列化、读写对象的操作的代码。</p><h1 id=感谢>感谢<a hidden class=anchor aria-hidden=true href=#感谢>#</a></h1><p>最后，感谢慷慨借用信用卡的朋友。</p><h1 id=参考链接>参考链接<a hidden class=anchor aria-hidden=true href=#参考链接>#</a></h1><ul><li><a href=https://www.xuezishi.net/>学姿势 - 校园金融第一站</a> ——学习信用卡相关的姿势</li><li><a href=http://www.haoweichi.com/>美国人信息生成，美国身份生成-世界各国身份信息、地址、信用卡生成</a></li><li><a href=https://developer.nvidia.com/cuda-toolkit-archive>CUDA 下载</a></li><li><a href=https://developer.nvidia.com/cudnn>cuDNN下载</a></li><li><a href="https://www.nvidia.com/Download/index.aspx?lang=en-us">NVIDIA显卡驱动下载</a></li><li><a href=https://www.cnblogs.com/zpcdbky/p/9757821.html>保姆级教程——Ubuntu16.04 Server下深度学习环境搭建：安装CUDA8.0，cuDNN6.0，Bazel0.5.4，源码编译安装TensorFlow1.4.0(GPU版)</a></li><li><a href=https://www.cnblogs.com/pprp/p/9463974.html>深度学习环境搭建：Tensorflow1.4.0+Ubuntu16.04+Python3.5+Cuda8.0+Cudnn6.0</a></li><li>论文下载：<a href=http://www.vlrlab.net/admin/uploads/avatars/ASTER_An_Attentional_Scene_Text_Recognizer_with_Flexible_Rectification.pdf>【PAMI2018】ASTER_An Attentional Scene Text Recognizer with Flexible Rectification.pdf</a></li><li>代码仓库：<a href=https://github.com/bgshih/aster>https://github.com/bgshih/aster</a></li><li><a href=https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/>清华大学开源软件镜像站</a><ul><li><a href=https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/>国内Anaconda下载</a></li></ul></li><li><a href=https://repo.continuum.io/archive/>国际Anaconda下载</a></li><li><a href=https://help.github.com/en/articles/duplicating-a-repository>Duplicating a repository</a></li><li><a href=https://www.ibm.com/developerworks/cn/linux/l-cn-gpb/index.html>Google Protocol Buffer 的使用和原理</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ret2neo.cn/post/190326-clock-manage-problem/><span class=title>« Prev</span><br><span>拨钟问题</span></a>
<a class=next href=https://ret2neo.cn/post/190223-tamuctf/><span class=title>Next »</span><br><span>TAMUctf writeup</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://ret2neo.cn/>闲言语</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2303473689051162" crossorigin=anonymous></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>